@import '../../scss/media';
@import '../../scss/colors';
@import '../../scss/util';

.head {
    padding-top: 3em;
    padding-bottom: 3em;
    max-width: 650px;
    position: relative;

    @include respond-above(md) {
        padding-top: 4em;
    }

    .icon {
        position: absolute;
        top: 40px;
        left: -100px;
        height: 420px;
        width: 420px;
        background-size: contain;
        background-position: center center;
        background-repeat: no-repeat;
        opacity: 0.035;
        pointer-events: none;
    }

    .subhead {
        opacity: 0.6;
        text-transform: uppercase;
        letter-spacing: 1px;
        font-size: 1rem;
        font-weight: 300;
        margin-bottom: 0.5rem;
    }

    .title {
        font-weight: 400;
        font-size: 2.7rem;
        margin-bottom: 0.6em;
        line-height: 0.95em;
    }

    .dates {
        margin-bottom: 1.9em;

        & > div {
            & > p {
                font-size: 1.1rem;
                font-weight: 400;
                margin-bottom: -4px;

                &:first-child {
                    opacity: 0.6;
                }
            }

            &:first-child {
                margin-right: 4em;
            }
        }
    }

    .lead-text {
        margin-bottom: 1.8em;
    }

    .topics {
        margin-bottom: 2rem;
    }
}

.project-content {
    position: relative;
    box-sizing: border-box;
    width: 100%;
    color: darken($-light, 12.5%);
    padding-bottom: 6rem;
    padding-top: 4rem;

    & > *:first-child {
        margin-top: 0 !important;
    }

    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
        color: $-light;
    }

    h2 {
        margin-top: 2.5rem;
    }

    h3 {
        margin-top: 1.75rem;
    }

    h4,
    h5 {
        margin-top: 1.5rem;
    }

    blockquote {
        background-color: rgba(blend($-tertiary, $-dark, 0.75), 0.4);
        padding: 2rem 2.5rem 1.5rem;
        margin-top: 2.5rem;
        margin-bottom: 2.5rem;
        border-left: solid 0.6rem $-tertiary;

        @include respond-below(sm) {
            padding: 1.5rem 1.75rem;
        }

        & > *:first-child {
            margin-top: 0;
        }

        & > *:last-child {
            margin-bottom: 0;
        }
    }

    li {
        &:last-child {
            margin-bottom: 0.5rem;
        }

        &:first-child {
            margin-top: 0.5rem;
        }

        p {
            margin-bottom: 0;
        }
    }

    table {
        margin-bottom: 1.5rem;
        border-collapse: collapse;
        border: none;

        td,
        th {
            min-width: 6rem;
            padding: 0.75rem;
            vertical-align: top;
            border-top: 1px solid rgba($-light, 0.4);
            background-color: rgba($-light, 0.05);
        }

        td:not(:first-child),
        th:not(:first-child) {
            min-width: 8rem;
        }

        @include respond-below(md) {
            td:not(:first-child),
            th:not(:first-child) {
                min-width: 10rem;
            }
        }

        tr {
            border: 1px solid rgba($-light, 0.4);
        }

        tr:nth-child(2n) {
            background-color: rgba($-light, 0.06);
        }

        tbody {
            border: none;
        }

        thead {
            tr {
                background-color: rgba($-light, 0.12) !important;
            }

            th {
                font-size: 0.9rem;
                text-transform: uppercase;
                color: rgba($-light, 0.6);
                letter-spacing: 1px;
            }
        }

        td {
            font-size: 0.9rem;
            font-weight: 400;
        }
    }

    $img-border-radius: 8px;
    %img {
        border-radius: $img-border-radius !important;
        box-shadow: 0 0 24px 0 rgba(0, 0, 0, 0.3) !important;
    }

    img:not(.brand-img):not(.button-image) {
        @extend %img;
    }

    p {
        .gatsby-resp-image-wrapper + em {
            display: table;
            margin: -0.5rem auto 3rem;
            max-width: 40rem;
            text-align: center;
            font-style: normal;
            opacity: 0.8;
        }
    }

    .gatsby-resp-image-wrapper {
        max-width: none !important;

        .gatsby-resp-image-background-image {
            @extend %img;
        }
    }

    p + hr {
        margin-top: 1.5rem;
    }

    hr.short {
        margin-top: 0;
    }
    * + hr.short {
        margin-top: 2rem;
    }

    figure {
        &.gatsby-resp-image-figure {
            width: 100%;
            margin-left: auto;
            margin-right: auto;
        }

        &.left {
            margin-left: 0;
        }

        &.merged-figure {
            p {
                @extend %img;
            }

            a:not(:first-child) {
                span.gatsby-resp-image-background-image,
                img.gatsby-resp-image-image {
                    border-top-left-radius: 0 !important;
                    border-top-right-radius: 0 !important;
                }
            }

            span.gatsby-resp-image-background-image,
            img.gatsby-resp-image-image {
                box-shadow: none !important;
            }
        }

        &.figure,
        &.gatsby-resp-image-figure {
            display: table;
            margin-top: 3rem;
            margin-bottom: 3rem;
            max-width: 800px;

            p {
                margin-bottom: 0;
            }

            a {
                display: inline !important;
            }

            img:not(.brand-img) {
                border-bottom-left-radius: 0 !important;
                border-bottom-right-radius: 0 !important;
                box-shadow: 0 0 24px 0 rgba(0, 0, 0, 0.3);
                margin-bottom: 0;
            }

            figcaption {
                padding: 10px 16px;
                background-color: #252e44;
                border: solid 1px #2f3b56;
                border-top: none;
                color: #f7f8f8;
                border-bottom-right-radius: $img-border-radius !important;
                border-bottom-left-radius: $img-border-radius !important;
                opacity: 0.8;

                display: table-caption;
                caption-side: bottom;
                box-shadow: 0 4px 24px 0 rgba(0, 0, 0, 0.3);
            }
        }
    }

    iframe {
        margin-top: 1rem;
    }
}

.background-top {
    @include respond-below(lg) {
        /* Fill more height on smaller screens */
        background-position-x: -800px !important;
        background-size: 2700px 800px !important;
    }
}
