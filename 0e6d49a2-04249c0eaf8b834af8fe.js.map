{"version":3,"file":"0e6d49a2-04249c0eaf8b834af8fe.js","mappings":"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","sources":["webpack://jazevedo.me/./src/templates/Homepage.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport { graphql, useStaticQuery } from \"gatsby\";\nimport { StaticImage } from \"gatsby-plugin-image\";\nimport styled from \"@emotion/styled\";\nimport classNames from \"classnames\";\n\nimport HeroBackground from \"../components/HeroBackground\";\nimport Layout from \"../components/Layout\";\nimport EmailSpoiler from \"../components/EmailSpoiler\";\nimport { gap } from \"../theme/spacing\";\nimport { contentWidth, sitePadding } from \"../theme/layout\";\nimport { shadow } from \"../theme/shadows\";\nimport Icon from \"../components/Icon\";\nimport { highlightLinks } from \"../theme/mixins\";\nimport { down } from \"../theme/media\";\nimport type { ProjectCardFragment } from \"../components/ProjectCard/types\";\nimport BaseProjectCarousel from \"../components/ProjectCarousel\";\nimport Mdx from \"../components/Mdx\";\n\nconst ContentWrapperCommon = styled.div`\n  padding-left: var(--content-padding);\n\n  & p {\n    font-size: 1.2rem;\n    margin-bottom: ${gap.nano};\n    font-weight: 400;\n  }\n\n  & p a {\n    ${highlightLinks}\n  }\n\n  & h2 {\n    font-size: 1.5rem;\n    font-weight: 700;\n    margin-top: ${gap.centi};\n    margin-bottom: ${gap.micro};\n  }\n`;\n\nconst Styled = {\n  PageLayout: styled.article`\n    position: relative;\n    z-index: 0;\n    --image-size: 256px;\n\n    ${down(\"md\")} {\n      --image-size: 180px;\n    }\n\n    display: grid;\n    grid-template-rows: auto auto auto;\n    grid-template-columns:\n      ${sitePadding}\n      1fr\n      var(--image-size)\n      min(\n        calc(${contentWidth} - var(--image-size)),\n        calc(100% - (2 * ${sitePadding}) - var(--image-size))\n      )\n      1fr\n      ${sitePadding};\n    grid-template-areas:\n      \". . profile name . .\"\n      \". . profile content . .\"\n      \"carouselBleed carouselBleed carouselBleed carousel carousel carousel\"\n      \". . . postCarouselContent . .\";\n\n    padding-top: ${gap.milli};\n    padding-bottom: ${gap.milli};\n\n    ${down(\"xl\")} {\n      padding-top: ${gap.nano};\n    }\n\n    ${down(\"lg\")} {\n      grid-template-rows: max-content auto auto auto;\n      grid-template-columns:\n        ${sitePadding}\n        1fr\n        min(${contentWidth}, calc(100% - (2 * ${sitePadding})))\n        1fr\n        ${sitePadding};\n      grid-template-areas:\n        \". . profile . .\"\n        \". . name    . .\"\n        \". . content . .\"\n        \"carouselBleed carouselBleed carousel carousel carousel\"\n        \". . postCarouselContent . .\";\n\n      padding-top: ${gap.femto};\n    }\n\n    --content-padding: ${gap.centi};\n    ${down(\"lg\")} {\n      --content-padding: 0;\n    }\n  `,\n  ProfileWrapper: styled.div`\n    grid-area: profile;\n    border: 8px solid white;\n    border-radius: 1000px;\n    overflow: hidden;\n    box-shadow: ${shadow(\"z3\")};\n    justify-self: start;\n    width: var(--image-size);\n    height: var(--image-size);\n\n    img,\n    picture {\n      /* Needed for image to appear correctly on iOS */\n      border-radius: 1000px;\n    }\n  `,\n  NameWrapper: styled.article`\n    grid-area: name;\n    padding-left: var(--content-padding);\n  `,\n  Name: styled.h1`\n    font-weight: 900;\n    font-size: 4rem;\n    margin-bottom: ${gap.nano};\n    /* Visually center name near profile */\n    margin-top: 40px;\n    line-height: 0.9;\n\n    ${down(\"lg\")} {\n      margin-top: ${gap.micro};\n    }\n  `,\n  Headline: styled.h2`\n    font-size: 2rem;\n    margin-bottom: ${gap.femto};\n    font-weight: 300;\n  `,\n  SubHeadline: styled.h3`\n    font-size: 1.5rem;\n    font-weight: 400;\n  `,\n  Content: styled(ContentWrapperCommon)`\n    grid-area: content;\n  `,\n  PostCarouselContent: styled(ContentWrapperCommon)`\n    grid-area: postCarouselContent;\n  `,\n  EmailSpoilerHeading: styled.h4`\n    font-size: 1.05rem;\n    margin-top: ${gap.micro};\n  `,\n  Carousel: styled(BaseProjectCarousel)`\n    // Initially, the carousel is placed in the \"carousel\" area, which\n    // will cause it to cut off the left side of the carousel when it is\n    // scrolled (and the scrolled elements go into the \"carouselBleed\" area).\n    // To fix this, we move the carousel to span both the \"carouselBleed\" and\n    // \"carousel\" areas on the second render, while at the same time applying\n    // a positive padding-left to the inner scrolling area to place the\n    // carousel back in the correct position.\n    // This is a compromise between preventing very visible layout shifts\n    // and keeping the site usable without JavaScript.\n    grid-area: carousel;\n    width: 100%;\n\n    &.place-in-bleed-area {\n      // Span the \"carouselBleed\" and \"carousel\" areas\n      grid-column-start: carouselBleed;\n      grid-column-end: carousel;\n      grid-row-start: carousel;\n      grid-row-end: carousel;\n    }\n  `,\n  CarouselPositioner: styled.div`\n    margin-left: var(--content-padding);\n    grid-area: content;\n    pointer-events: none;\n  `,\n};\n\n// Must stay synchronized with below static query\ntype StaticQueryResult = {\n  topProjects: {\n    projectFiles: Array<{\n      childMdx: ProjectCardFragment;\n    }>;\n  };\n};\n\nfunction useData(): StaticQueryResult {\n  return useStaticQuery<StaticQueryResult>(\n    graphql`\n      query {\n        topProjects: allFile(\n          sort: { childMdx: { frontmatter: { importance: DESC } } }\n          limit: 10\n          filter: {\n            childMdx: { frontmatter: { importance: { ne: null } } }\n            relativePath: { regex: \"/^[^/]+/index.mdx$/\" }\n            sourceInstanceName: { eq: \"projects\" }\n          }\n        ) {\n          projectFiles: nodes {\n            childMdx {\n              ...ProjectCard\n            }\n          }\n        }\n      }\n    `\n  );\n}\n\nexport type HomepageLayoutProps = {\n  children?: React.ReactNode;\n};\n\n/**\n * MDX Layout component for the /src/pages/index.mdx page.\n *\n * This uses a CSS Grid to lay out its 4 sub-components:\n *\n * - `<HomepageLayout.ProfilePicture>` - the large profile picture\n * - `<HomepageLayout.Name>` the 'name' section, including the heading/\n *   sub-heading and email\n * - `<HomepageLayout.Content>` - the main content (containing an \"About\"\n *   section). This also should contain the heading, if any, for the project\n *   carousel, since it aligns the heading with the left of the initial scroll\n *   of the carousel (which is actually a full-bleed horizontal scroll\n *   container).\n * - `<HomepageLayout.ProjectCarousel>` - a horizontally-scrolling project\n *   carousel\n */\nfunction HomepageLayout({ children }: HomepageLayoutProps): React.ReactElement {\n  return (\n    <Layout\n      headerProps={{ spacing: \"sparse\" }}\n      style={{ overflowX: \"hidden\" }}\n      overlayChildren={<HeroBackground />}\n    >\n      <Styled.PageLayout>\n        <Mdx>{children}</Mdx>\n      </Styled.PageLayout>\n    </Layout>\n  );\n}\n\n// Set up and export the aggregate (parent & sub-components):\ntype HomepageLayoutAggregateType = typeof HomepageLayout & {\n  ProfilePicture: typeof ProfilePicture;\n  Name: typeof Name;\n  Content: typeof Styled.Content;\n  ProjectCarousel: typeof ProjectCarousel;\n  PostCarouselContent: typeof Styled.PostCarouselContent;\n};\nconst HomepageLayoutAggregate: HomepageLayoutAggregateType =\n  HomepageLayout as HomepageLayoutAggregateType;\nHomepageLayoutAggregate.ProfilePicture = ProfilePicture;\nHomepageLayoutAggregate.Name = Name;\nHomepageLayoutAggregate.Content = Styled.Content;\nHomepageLayoutAggregate.ProjectCarousel = ProjectCarousel;\nHomepageLayoutAggregate.PostCarouselContent = Styled.PostCarouselContent;\nexport default HomepageLayoutAggregate;\n\n// ? --------------\n// ? Sub Components\n// ? --------------\n\nfunction ProfilePicture(): React.ReactElement {\n  return (\n    <Styled.ProfileWrapper>\n      <StaticImage\n        src=\"../../static/img/profile.jpg\"\n        alt=\"\"\n        layout=\"constrained\"\n        width={256}\n        quality={90}\n        placeholder=\"blurred\"\n      />\n    </Styled.ProfileWrapper>\n  );\n}\n\nexport type NameProps = {\n  name: React.ReactNode;\n  headline: React.ReactNode;\n  subHeadline: React.ReactNode;\n  email: React.ReactNode;\n};\n\nfunction Name({\n  name,\n  headline,\n  subHeadline,\n  email,\n}: NameProps): React.ReactElement {\n  return (\n    <Styled.NameWrapper>\n      <Styled.Name>{name}</Styled.Name>\n      <Styled.Headline>{headline}</Styled.Headline>\n      <Styled.SubHeadline>{subHeadline}</Styled.SubHeadline>\n      <Styled.EmailSpoilerHeading>\n        <Icon name=\"envelope\" style={{ marginRight: gap.nano }} />\n        <EmailSpoiler email={email} />\n      </Styled.EmailSpoilerHeading>\n    </Styled.NameWrapper>\n  );\n}\n\nfunction ProjectCarousel(): React.ReactElement {\n  const data = useData();\n  const projects = data.topProjects.projectFiles.map(\n    ({ childMdx }) => childMdx\n  );\n\n  const positionerRef = useRef() as React.RefObject<HTMLDivElement>;\n  // See comment in CSS for the approach to this element.\n  // This state will be updated to trigger the second render\n  // of the component, which will use the measured padding and span both\n  // grid areas.\n  const [measuredPadding, setMeasuredPadding] = useState<number | null>(null);\n  /* No point in using useLayoutEffect, since the page will have painted\n  already due to the SSR HTML rendering initially. */\n  useEffect(() => {\n    const handleResize = (): void => {\n      if (positionerRef.current == null) return;\n      const { x } = positionerRef.current.getBoundingClientRect();\n      setMeasuredPadding(x);\n    };\n\n    // Upon mounting, configure the size of the carousel\n    handleResize();\n\n    window.addEventListener(\"resize\", handleResize);\n    return (): void => window.removeEventListener(\"resize\", handleResize);\n  }, []);\n\n  return (\n    <>\n      <Styled.CarouselPositioner ref={positionerRef} />\n      <Styled.Carousel\n        projects={projects}\n        // If we have not yet measured the padding, then use the CSS variable\n        // \"content-padding\" as the padding. This will align the left of the\n        // carousel when it is placed outside the bleed area with the\n        // left of the content.\n        leftPadding={measuredPadding ?? \"var(--content-padding)\"}\n        className={classNames({\n          \"place-in-bleed-area\": measuredPadding !== null,\n        })}\n      />\n    </>\n  );\n}\n"],"names":["ContentWrapperCommon","gap","highlightLinks","Styled","PageLayout","down","sitePadding","contentWidth","ProfileWrapper","shadow","NameWrapper","Name","Headline","SubHeadline","Content","_styled","PostCarouselContent","EmailSpoilerHeading","Carousel","BaseProjectCarousel","CarouselPositioner","HomepageLayoutAggregate","children","___EmotionJSX","Layout","headerProps","spacing","style","overflowX","overlayChildren","HeroBackground","Mdx","ProfilePicture","StaticImage","src","alt","layout","width","quality","placeholder","name","headline","subHeadline","email","Icon","marginRight","EmailSpoiler","ProjectCarousel","projects","useStaticQuery","topProjects","projectFiles","map","_ref3","childMdx","positionerRef","useRef","measuredPadding","setMeasuredPadding","useState","useEffect","handleResize","current","x","getBoundingClientRect","window","addEventListener","removeEventListener","ref","leftPadding","className","classNames"],"sourceRoot":""}