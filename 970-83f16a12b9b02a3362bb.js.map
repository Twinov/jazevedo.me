{"version":3,"file":"970-83f16a12b9b02a3362bb.js","mappings":"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AK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KACnwCC,EAAY,CAAC,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI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","sources":["webpack://jazevedo.me/./content/projects/risk-game/local/demo/vue-interop.tsx","webpack://jazevedo.me/./node_modules/konva/lib/Animation.js","webpack://jazevedo.me/./node_modules/konva/lib/BaseLayer.js","webpack://jazevedo.me/./node_modules/konva/lib/Canvas.js","webpack://jazevedo.me/./node_modules/konva/lib/Container.js","webpack://jazevedo.me/./node_modules/konva/lib/Context.js","webpack://jazevedo.me/./node_modules/konva/lib/DragAndDrop.js","webpack://jazevedo.me/./node_modules/konva/lib/Factory.js","webpack://jazevedo.me/./node_modules/konva/lib/FastLayer.js","webpack://jazevedo.me/./node_modules/konva/lib/Global.js","webpack://jazevedo.me/./node_modules/konva/lib/Group.js","webpack://jazevedo.me/./node_modules/konva/lib/Layer.js","webpack://jazevedo.me/./node_modules/konva/lib/Node.js","webpack://jazevedo.me/./node_modules/konva/lib/PointerEvents.js","webpack://jazevedo.me/./node_modules/konva/lib/Shape.js","webpack://jazevedo.me/./node_modules/konva/lib/Stage.js","webpack://jazevedo.me/./node_modules/konva/lib/Tween.js","webpack://jazevedo.me/./node_modules/konva/lib/Util.js","webpack://jazevedo.me/./node_modules/konva/lib/Validators.js","webpack://jazevedo.me/./node_modules/konva/lib/_CoreInternals.js","webpack://jazevedo.me/./node_modules/konva/lib/_FullInternals.js","webpack://jazevedo.me/./node_modules/konva/lib/filters/Blur.js","webpack://jazevedo.me/./node_modules/konva/lib/filters/Brighten.js","webpack://jazevedo.me/./node_modules/konva/lib/filters/Contrast.js","webpack://jazevedo.me/./node_modules/konva/lib/filters/Emboss.js","webpack://jazevedo.me/./node_modules/konva/lib/filters/Enhance.js","webpack://jazevedo.me/./node_modules/konva/lib/filters/Grayscale.js","webpack://jazevedo.me/./node_modules/konva/lib/filters/HSL.js","webpack://jazevedo.me/./node_modules/konva/lib/filters/HSV.js","webpack://jazevedo.me/./node_modules/konva/lib/filters/Invert.js","webpack://jazevedo.me/./node_modules/konva/lib/filters/Kaleidoscope.js","webpack://jazevedo.me/./node_modules/konva/lib/filters/Mask.js","webpack://jazevedo.me/./node_modules/konva/lib/filters/Noise.js","webpack://jazevedo.me/./node_modules/konva/lib/filters/Pixelate.js","webpack://jazevedo.me/./node_modules/konva/lib/filters/Posterize.js","webpack://jazevedo.me/./node_modules/konva/lib/filters/RGB.js","webpack://jazevedo.me/./node_modules/konva/lib/filters/RGBA.js","webpack://jazevedo.me/./node_modules/konva/lib/filters/Sepia.js","webpack://jazevedo.me/./node_modules/konva/lib/filters/Solarize.js","webpack://jazevedo.me/./node_modules/konva/lib/filters/Threshold.js","webpack://jazevedo.me/./node_modules/konva/lib/index.js","webpack://jazevedo.me/./node_modules/konva/lib/shapes/Arc.js","webpack://jazevedo.me/./node_modules/konva/lib/shapes/Arrow.js","webpack://jazevedo.me/./node_modules/konva/lib/shapes/Circle.js","webpack://jazevedo.me/./node_modules/konva/lib/shapes/Ellipse.js","webpack://jazevedo.me/./node_modules/konva/lib/shapes/Image.js","webpack://jazevedo.me/./node_modules/konva/lib/shapes/Label.js","webpack://jazevedo.me/./node_modules/konva/lib/shapes/Line.js","webpack://jazevedo.me/./node_modules/konva/lib/shapes/Path.js","webpack://jazevedo.me/./node_modules/konva/lib/shapes/Rect.js","webpack://jazevedo.me/./node_modules/konva/lib/shapes/RegularPolygon.js","webpack://jazevedo.me/./node_modules/konva/lib/shapes/Ring.js","webpack://jazevedo.me/./node_modules/konva/lib/shapes/Sprite.js","webpack://jazevedo.me/./node_modules/konva/lib/shapes/Star.js","webpack://jazevedo.me/./node_modules/konva/lib/shapes/Text.js","webpack://jazevedo.me/./node_modules/konva/lib/shapes/TextPath.js","webpack://jazevedo.me/./node_modules/konva/lib/shapes/Transformer.js","webpack://jazevedo.me/./node_modules/konva/lib/shapes/Wedge.js","webpack://jazevedo.me/./node_modules/vue-konva/umd/vue-konva.js","webpack://jazevedo.me/./node_modules/vuera/dist/vuera.cjs.js","webpack://jazevedo.me/./node_modules/gatsby/node_modules/core-js/internals/classof.js","webpack://jazevedo.me/./node_modules/gatsby/node_modules/core-js/internals/string-trim-forced.js","webpack://jazevedo.me/./node_modules/gatsby/node_modules/core-js/internals/string-trim.js","webpack://jazevedo.me/./node_modules/gatsby/node_modules/core-js/internals/to-string-tag-support.js","webpack://jazevedo.me/./node_modules/gatsby/node_modules/core-js/internals/to-string.js","webpack://jazevedo.me/./node_modules/gatsby/node_modules/core-js/internals/whitespaces.js","webpack://jazevedo.me/./node_modules/gatsby/node_modules/core-js/modules/es.string.trim-end.js","webpack://jazevedo.me/./node_modules/gatsby/node_modules/core-js/modules/es.string.trim-start.js","webpack://jazevedo.me/./content/projects/risk-game/local/demo/vue/GameCanvas.vue?eb48","webpack://jazevedo.me/./content/projects/risk-game/local/demo/vue/util.js","webpack://jazevedo.me/./node_modules/vue-loader/lib/runtime/componentNormalizer.js","webpack://jazevedo.me/./content/projects/risk-game/local/demo/vue/ArmyShape.vue","webpack://jazevedo.me/content/projects/risk-game/local/demo/vue/ArmyShape.vue","webpack://jazevedo.me/./content/projects/risk-game/local/demo/vue/ArmyShape.vue?7f11","webpack://jazevedo.me/content/projects/risk-game/local/demo/vue/CastleIcon.vue","webpack://jazevedo.me/./content/projects/risk-game/local/demo/vue/CastleIcon.vue","webpack://jazevedo.me/./content/projects/risk-game/local/demo/vue/CastleIcon.vue?d22a","webpack://jazevedo.me/./content/projects/risk-game/local/demo/vue/Territory.vue","webpack://jazevedo.me/content/projects/risk-game/local/demo/vue/Territory.vue","webpack://jazevedo.me/./content/projects/risk-game/local/demo/vue/Territory.vue?36bd","webpack://jazevedo.me/content/projects/risk-game/local/demo/vue/GameCanvas.vue","webpack://jazevedo.me/./content/projects/risk-game/local/demo/vue/GameCanvas.vue"],"sourcesContent":["import React from \"react\";\nimport { VueWrapper } from \"vuera\";\n\nimport { log } from \"./index\";\n\nlet GameCanvas: unknown;\n\nexport type VueInteropProps = {\n  preload: () => void;\n  passthroughProps: Record<string, unknown>;\n};\n\ntype VueInteropState = {\n  mount: boolean;\n};\n\n/**\n * Lazily loads the game canvas at runtime into the React application\n */\nclass VueInterop extends React.Component<VueInteropProps, VueInteropState> {\n  constructor(props: VueInteropProps) {\n    super(props);\n    // The state is \"unused\" in that it is only used to force a re-render:\n    // eslint-disable-next-line react/no-unused-state\n    this.state = { mount: false };\n  }\n\n  componentDidMount(): void {\n    const { preload } = this.props;\n    if (preload != null) preload();\n\n    // eslint-disable-next-line max-len\n    // eslint-disable-next-line global-require,@typescript-eslint/no-var-requires\n    GameCanvas = (require(\"./vue/GameCanvas.vue\") as { default: unknown })\n      .default;\n\n    // The state is \"unused\" in that it is only used to force a re-render:\n    // eslint-disable-next-line react/no-unused-state\n    this.setState({ mount: true });\n    log(\"Loading Vue component, forcing re-render\");\n  }\n\n  render(): React.ReactElement | null {\n    const { passthroughProps } = this.props;\n    if (GameCanvas == null) return <div />;\n    // eslint-disable-next-line react/jsx-props-no-spreading\n    return <VueWrapper component={GameCanvas} {...passthroughProps} />;\n  }\n}\n\nexport default VueInterop;\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Global_1 = require(\"./Global\");\n\nvar now = function () {\n  if (Global_1.glob.performance && Global_1.glob.performance.now) {\n    return function () {\n      return Global_1.glob.performance.now();\n    };\n  }\n\n  return function () {\n    return new Date().getTime();\n  };\n}();\n\nvar Animation = function () {\n  function Animation(func, layers) {\n    this.id = Animation.animIdCounter++;\n    this.frame = {\n      time: 0,\n      timeDiff: 0,\n      lastTime: now(),\n      frameRate: 0\n    };\n    this.func = func;\n    this.setLayers(layers);\n  }\n\n  Animation.prototype.setLayers = function (layers) {\n    var lays = [];\n\n    if (!layers) {\n      lays = [];\n    } else if (layers.length > 0) {\n      lays = layers;\n    } else {\n      lays = [layers];\n    }\n\n    this.layers = lays;\n    return this;\n  };\n\n  Animation.prototype.getLayers = function () {\n    return this.layers;\n  };\n\n  Animation.prototype.addLayer = function (layer) {\n    var layers = this.layers,\n        len = layers.length,\n        n;\n\n    for (n = 0; n < len; n++) {\n      if (layers[n]._id === layer._id) {\n        return false;\n      }\n    }\n\n    this.layers.push(layer);\n    return true;\n  };\n\n  Animation.prototype.isRunning = function () {\n    var a = Animation,\n        animations = a.animations,\n        len = animations.length,\n        n;\n\n    for (n = 0; n < len; n++) {\n      if (animations[n].id === this.id) {\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  Animation.prototype.start = function () {\n    this.stop();\n    this.frame.timeDiff = 0;\n    this.frame.lastTime = now();\n\n    Animation._addAnimation(this);\n\n    return this;\n  };\n\n  Animation.prototype.stop = function () {\n    Animation._removeAnimation(this);\n\n    return this;\n  };\n\n  Animation.prototype._updateFrameObject = function (time) {\n    this.frame.timeDiff = time - this.frame.lastTime;\n    this.frame.lastTime = time;\n    this.frame.time += this.frame.timeDiff;\n    this.frame.frameRate = 1000 / this.frame.timeDiff;\n  };\n\n  Animation._addAnimation = function (anim) {\n    this.animations.push(anim);\n\n    this._handleAnimation();\n  };\n\n  Animation._removeAnimation = function (anim) {\n    var id = anim.id,\n        animations = this.animations,\n        len = animations.length,\n        n;\n\n    for (n = 0; n < len; n++) {\n      if (animations[n].id === id) {\n        this.animations.splice(n, 1);\n        break;\n      }\n    }\n  };\n\n  Animation._runFrames = function () {\n    var layerHash = {},\n        animations = this.animations,\n        anim,\n        layers,\n        func,\n        n,\n        i,\n        layersLen,\n        layer,\n        key,\n        needRedraw;\n\n    for (n = 0; n < animations.length; n++) {\n      anim = animations[n];\n      layers = anim.layers;\n      func = anim.func;\n\n      anim._updateFrameObject(now());\n\n      layersLen = layers.length;\n\n      if (func) {\n        needRedraw = func.call(anim, anim.frame) !== false;\n      } else {\n        needRedraw = true;\n      }\n\n      if (!needRedraw) {\n        continue;\n      }\n\n      for (i = 0; i < layersLen; i++) {\n        layer = layers[i];\n\n        if (layer._id !== undefined) {\n          layerHash[layer._id] = layer;\n        }\n      }\n    }\n\n    for (key in layerHash) {\n      if (!layerHash.hasOwnProperty(key)) {\n        continue;\n      }\n\n      layerHash[key].draw();\n    }\n  };\n\n  Animation._animationLoop = function () {\n    var Anim = Animation;\n\n    if (Anim.animations.length) {\n      Anim._runFrames();\n\n      requestAnimationFrame(Anim._animationLoop);\n    } else {\n      Anim.animRunning = false;\n    }\n  };\n\n  Animation._handleAnimation = function () {\n    if (!this.animRunning) {\n      this.animRunning = true;\n      requestAnimationFrame(this._animationLoop);\n    }\n  };\n\n  Animation.animations = [];\n  Animation.animIdCounter = 0;\n  Animation.animRunning = false;\n  return Animation;\n}();\n\nexports.Animation = Animation;","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Util_1 = require(\"./Util\");\n\nvar Container_1 = require(\"./Container\");\n\nvar Node_1 = require(\"./Node\");\n\nvar Factory_1 = require(\"./Factory\");\n\nvar Canvas_1 = require(\"./Canvas\");\n\nvar BaseLayer = function (_super) {\n  __extends(BaseLayer, _super);\n\n  function BaseLayer(config) {\n    var _this = _super.call(this, config) || this;\n\n    _this.canvas = new Canvas_1.SceneCanvas();\n    _this._waitingForDraw = false;\n\n    _this.on('visibleChange', _this._checkVisibility);\n\n    _this._checkVisibility();\n\n    _this.on('imageSmoothingEnabledChange', _this._checkSmooth);\n\n    _this._checkSmooth();\n\n    return _this;\n  }\n\n  BaseLayer.prototype.createPNGStream = function () {\n    var c = this.canvas._canvas;\n    return c.createPNGStream();\n  };\n\n  BaseLayer.prototype.getCanvas = function () {\n    return this.canvas;\n  };\n\n  BaseLayer.prototype.getHitCanvas = function () {\n    return this.hitCanvas;\n  };\n\n  BaseLayer.prototype.getContext = function () {\n    return this.getCanvas().getContext();\n  };\n\n  BaseLayer.prototype.clear = function (bounds) {\n    this.getContext().clear(bounds);\n    return this;\n  };\n\n  BaseLayer.prototype.setZIndex = function (index) {\n    _super.prototype.setZIndex.call(this, index);\n\n    var stage = this.getStage();\n\n    if (stage) {\n      stage.content.removeChild(this.getCanvas()._canvas);\n\n      if (index < stage.getChildren().length - 1) {\n        stage.content.insertBefore(this.getCanvas()._canvas, stage.getChildren()[index + 1].getCanvas()._canvas);\n      } else {\n        stage.content.appendChild(this.getCanvas()._canvas);\n      }\n    }\n\n    return this;\n  };\n\n  BaseLayer.prototype.moveToTop = function () {\n    Node_1.Node.prototype.moveToTop.call(this);\n    var stage = this.getStage();\n\n    if (stage) {\n      stage.content.removeChild(this.getCanvas()._canvas);\n      stage.content.appendChild(this.getCanvas()._canvas);\n    }\n\n    return true;\n  };\n\n  BaseLayer.prototype.moveUp = function () {\n    var moved = Node_1.Node.prototype.moveUp.call(this);\n\n    if (!moved) {\n      return false;\n    }\n\n    var stage = this.getStage();\n\n    if (!stage) {\n      return false;\n    }\n\n    stage.content.removeChild(this.getCanvas()._canvas);\n\n    if (this.index < stage.getChildren().length - 1) {\n      stage.content.insertBefore(this.getCanvas()._canvas, stage.getChildren()[this.index + 1].getCanvas()._canvas);\n    } else {\n      stage.content.appendChild(this.getCanvas()._canvas);\n    }\n\n    return true;\n  };\n\n  BaseLayer.prototype.moveDown = function () {\n    if (Node_1.Node.prototype.moveDown.call(this)) {\n      var stage = this.getStage();\n\n      if (stage) {\n        var children = stage.getChildren();\n        stage.content.removeChild(this.getCanvas()._canvas);\n        stage.content.insertBefore(this.getCanvas()._canvas, children[this.index + 1].getCanvas()._canvas);\n      }\n\n      return true;\n    }\n\n    return false;\n  };\n\n  BaseLayer.prototype.moveToBottom = function () {\n    if (Node_1.Node.prototype.moveToBottom.call(this)) {\n      var stage = this.getStage();\n\n      if (stage) {\n        var children = stage.getChildren();\n        stage.content.removeChild(this.getCanvas()._canvas);\n        stage.content.insertBefore(this.getCanvas()._canvas, children[1].getCanvas()._canvas);\n      }\n\n      return true;\n    }\n\n    return false;\n  };\n\n  BaseLayer.prototype.getLayer = function () {\n    return this;\n  };\n\n  BaseLayer.prototype.remove = function () {\n    var _canvas = this.getCanvas()._canvas;\n\n    Node_1.Node.prototype.remove.call(this);\n\n    if (_canvas && _canvas.parentNode && Util_1.Util._isInDocument(_canvas)) {\n      _canvas.parentNode.removeChild(_canvas);\n    }\n\n    return this;\n  };\n\n  BaseLayer.prototype.getStage = function () {\n    return this.parent;\n  };\n\n  BaseLayer.prototype.setSize = function (_a) {\n    var width = _a.width,\n        height = _a.height;\n    this.canvas.setSize(width, height);\n    return this;\n  };\n\n  BaseLayer.prototype._toKonvaCanvas = function (config) {\n    config = config || {};\n    config.width = config.width || this.getWidth();\n    config.height = config.height || this.getHeight();\n    config.x = config.x !== undefined ? config.x : this.x();\n    config.y = config.y !== undefined ? config.y : this.y();\n    return Node_1.Node.prototype._toKonvaCanvas.call(this, config);\n  };\n\n  BaseLayer.prototype._checkVisibility = function () {\n    var visible = this.visible();\n\n    if (visible) {\n      this.canvas._canvas.style.display = 'block';\n    } else {\n      this.canvas._canvas.style.display = 'none';\n    }\n  };\n\n  BaseLayer.prototype._checkSmooth = function () {\n    this.getContext()._context.imageSmoothingEnabled = this.imageSmoothingEnabled();\n  };\n\n  BaseLayer.prototype.getWidth = function () {\n    if (this.parent) {\n      return this.parent.width();\n    }\n  };\n\n  BaseLayer.prototype.setWidth = function () {\n    Util_1.Util.warn('Can not change width of layer. Use \"stage.width(value)\" function instead.');\n  };\n\n  BaseLayer.prototype.getHeight = function () {\n    if (this.parent) {\n      return this.parent.height();\n    }\n  };\n\n  BaseLayer.prototype.setHeight = function () {\n    Util_1.Util.warn('Can not change height of layer. Use \"stage.height(value)\" function instead.');\n  };\n\n  BaseLayer.prototype.getIntersection = function (pos, selector) {\n    return null;\n  };\n\n  BaseLayer.prototype.batchDraw = function () {\n    var _this = this;\n\n    if (!this._waitingForDraw) {\n      this._waitingForDraw = true;\n      Util_1.Util.requestAnimFrame(function () {\n        _this.draw();\n\n        _this._waitingForDraw = false;\n      });\n    }\n\n    return this;\n  };\n\n  BaseLayer.prototype._applyTransform = function (shape, context, top) {\n    var m = shape.getAbsoluteTransform(top).getMatrix();\n    context.transform(m[0], m[1], m[2], m[3], m[4], m[5]);\n  };\n\n  return BaseLayer;\n}(Container_1.Container);\n\nexports.BaseLayer = BaseLayer;\nBaseLayer.prototype.nodeType = 'BaseLayer';\nFactory_1.Factory.addGetterSetter(BaseLayer, 'imageSmoothingEnabled', true);\nFactory_1.Factory.addGetterSetter(BaseLayer, 'clearBeforeDraw', true);\nUtil_1.Collection.mapMethods(BaseLayer);","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Util_1 = require(\"./Util\");\n\nvar Context_1 = require(\"./Context\");\n\nvar Global_1 = require(\"./Global\");\n\nvar Factory_1 = require(\"./Factory\");\n\nvar Validators_1 = require(\"./Validators\");\n\nvar _pixelRatio;\n\nfunction getDevicePixelRatio() {\n  if (_pixelRatio) {\n    return _pixelRatio;\n  }\n\n  var canvas = Util_1.Util.createCanvasElement();\n  var context = canvas.getContext('2d');\n\n  _pixelRatio = function () {\n    var devicePixelRatio = Global_1.Konva._global.devicePixelRatio || 1,\n        backingStoreRatio = context.webkitBackingStorePixelRatio || context.mozBackingStorePixelRatio || context.msBackingStorePixelRatio || context.oBackingStorePixelRatio || context.backingStorePixelRatio || 1;\n    return devicePixelRatio / backingStoreRatio;\n  }();\n\n  return _pixelRatio;\n}\n\nvar Canvas = function () {\n  function Canvas(config) {\n    this.pixelRatio = 1;\n    this.width = 0;\n    this.height = 0;\n    this.isCache = false;\n    var conf = config || {};\n    var pixelRatio = conf.pixelRatio || Global_1.Konva.pixelRatio || getDevicePixelRatio();\n    this.pixelRatio = pixelRatio;\n    this._canvas = Util_1.Util.createCanvasElement();\n    this._canvas.style.padding = '0';\n    this._canvas.style.margin = '0';\n    this._canvas.style.border = '0';\n    this._canvas.style.background = 'transparent';\n    this._canvas.style.position = 'absolute';\n    this._canvas.style.top = '0';\n    this._canvas.style.left = '0';\n  }\n\n  Canvas.prototype.getContext = function () {\n    return this.context;\n  };\n\n  Canvas.prototype.getPixelRatio = function () {\n    return this.pixelRatio;\n  };\n\n  Canvas.prototype.setPixelRatio = function (pixelRatio) {\n    var previousRatio = this.pixelRatio;\n    this.pixelRatio = pixelRatio;\n    this.setSize(this.getWidth() / previousRatio, this.getHeight() / previousRatio);\n  };\n\n  Canvas.prototype.setWidth = function (width) {\n    this.width = this._canvas.width = width * this.pixelRatio;\n    this._canvas.style.width = width + 'px';\n\n    var pixelRatio = this.pixelRatio,\n        _context = this.getContext()._context;\n\n    _context.scale(pixelRatio, pixelRatio);\n  };\n\n  Canvas.prototype.setHeight = function (height) {\n    this.height = this._canvas.height = height * this.pixelRatio;\n    this._canvas.style.height = height + 'px';\n\n    var pixelRatio = this.pixelRatio,\n        _context = this.getContext()._context;\n\n    _context.scale(pixelRatio, pixelRatio);\n  };\n\n  Canvas.prototype.getWidth = function () {\n    return this.width;\n  };\n\n  Canvas.prototype.getHeight = function () {\n    return this.height;\n  };\n\n  Canvas.prototype.setSize = function (width, height) {\n    this.setWidth(width);\n    this.setHeight(height);\n  };\n\n  Canvas.prototype.toDataURL = function (mimeType, quality) {\n    try {\n      return this._canvas.toDataURL(mimeType, quality);\n    } catch (e) {\n      try {\n        return this._canvas.toDataURL();\n      } catch (err) {\n        Util_1.Util.error('Unable to get data URL. ' + err.message);\n        return '';\n      }\n    }\n  };\n\n  return Canvas;\n}();\n\nexports.Canvas = Canvas;\nFactory_1.Factory.addGetterSetter(Canvas, 'pixelRatio', undefined, Validators_1.getNumberValidator());\n\nvar SceneCanvas = function (_super) {\n  __extends(SceneCanvas, _super);\n\n  function SceneCanvas(config) {\n    if (config === void 0) {\n      config = {\n        width: 0,\n        height: 0\n      };\n    }\n\n    var _this = _super.call(this, config) || this;\n\n    _this.context = new Context_1.SceneContext(_this);\n\n    _this.setSize(config.width, config.height);\n\n    return _this;\n  }\n\n  return SceneCanvas;\n}(Canvas);\n\nexports.SceneCanvas = SceneCanvas;\n\nvar HitCanvas = function (_super) {\n  __extends(HitCanvas, _super);\n\n  function HitCanvas(config) {\n    if (config === void 0) {\n      config = {\n        width: 0,\n        height: 0\n      };\n    }\n\n    var _this = _super.call(this, config) || this;\n\n    _this.hitCanvas = true;\n    _this.context = new Context_1.HitContext(_this);\n\n    _this.setSize(config.width, config.height);\n\n    return _this;\n  }\n\n  return HitCanvas;\n}(Canvas);\n\nexports.HitCanvas = HitCanvas;","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Util_1 = require(\"./Util\");\n\nvar Factory_1 = require(\"./Factory\");\n\nvar Node_1 = require(\"./Node\");\n\nvar DragAndDrop_1 = require(\"./DragAndDrop\");\n\nvar Validators_1 = require(\"./Validators\");\n\nvar Container = function (_super) {\n  __extends(Container, _super);\n\n  function Container() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.children = new Util_1.Collection();\n    return _this;\n  }\n\n  Container.prototype.getChildren = function (filterFunc) {\n    if (!filterFunc) {\n      return this.children;\n    }\n\n    var results = new Util_1.Collection();\n    this.children.each(function (child) {\n      if (filterFunc(child)) {\n        results.push(child);\n      }\n    });\n    return results;\n  };\n\n  Container.prototype.hasChildren = function () {\n    return this.getChildren().length > 0;\n  };\n\n  Container.prototype.removeChildren = function () {\n    var child;\n\n    for (var i = 0; i < this.children.length; i++) {\n      child = this.children[i];\n      child.parent = null;\n      child.index = 0;\n      child.remove();\n    }\n\n    this.children = new Util_1.Collection();\n    return this;\n  };\n\n  Container.prototype.destroyChildren = function () {\n    var child;\n\n    for (var i = 0; i < this.children.length; i++) {\n      child = this.children[i];\n      child.parent = null;\n      child.index = 0;\n      child.destroy();\n    }\n\n    this.children = new Util_1.Collection();\n    return this;\n  };\n\n  Container.prototype.add = function (child) {\n    if (arguments.length > 1) {\n      for (var i = 0; i < arguments.length; i++) {\n        this.add(arguments[i]);\n      }\n\n      return this;\n    }\n\n    if (child.getParent()) {\n      child.moveTo(this);\n      return this;\n    }\n\n    var children = this.children;\n\n    this._validateAdd(child);\n\n    child.index = children.length;\n    child.parent = this;\n    children.push(child);\n\n    this._fire('add', {\n      child: child\n    });\n\n    if (child.isDragging()) {\n      DragAndDrop_1.DD.anim.setLayers(child.getLayer());\n    }\n\n    return this;\n  };\n\n  Container.prototype.destroy = function () {\n    if (this.hasChildren()) {\n      this.destroyChildren();\n    }\n\n    _super.prototype.destroy.call(this);\n\n    return this;\n  };\n\n  Container.prototype.find = function (selector) {\n    return this._generalFind(selector, false);\n  };\n\n  Container.prototype.get = function (selector) {\n    Util_1.Util.warn('collection.get() method is deprecated. Please use collection.find() instead.');\n    return this.find(selector);\n  };\n\n  Container.prototype.findOne = function (selector) {\n    var result = this._generalFind(selector, true);\n\n    return result.length > 0 ? result[0] : undefined;\n  };\n\n  Container.prototype._generalFind = function (selector, findOne) {\n    var retArr = [];\n\n    this._descendants(function (node) {\n      var valid = node._isMatch(selector);\n\n      if (valid) {\n        retArr.push(node);\n      }\n\n      if (valid && findOne) {\n        return true;\n      }\n\n      return false;\n    });\n\n    return Util_1.Collection.toCollection(retArr);\n  };\n\n  Container.prototype._descendants = function (fn) {\n    var shouldStop = false;\n\n    for (var i = 0; i < this.children.length; i++) {\n      var child = this.children[i];\n      shouldStop = fn(child);\n\n      if (shouldStop) {\n        return true;\n      }\n\n      if (!child.hasChildren()) {\n        continue;\n      }\n\n      shouldStop = child._descendants(fn);\n\n      if (shouldStop) {\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  Container.prototype.toObject = function () {\n    var obj = Node_1.Node.prototype.toObject.call(this);\n    obj.children = [];\n    var children = this.getChildren();\n    var len = children.length;\n\n    for (var n = 0; n < len; n++) {\n      var child = children[n];\n      obj.children.push(child.toObject());\n    }\n\n    return obj;\n  };\n\n  Container.prototype._getDescendants = function (arr) {\n    var retArr = [];\n    var len = arr.length;\n\n    for (var n = 0; n < len; n++) {\n      var node = arr[n];\n\n      if (this.isAncestorOf(node)) {\n        retArr.push(node);\n      }\n    }\n\n    return retArr;\n  };\n\n  Container.prototype.isAncestorOf = function (node) {\n    var parent = node.getParent();\n\n    while (parent) {\n      if (parent._id === this._id) {\n        return true;\n      }\n\n      parent = parent.getParent();\n    }\n\n    return false;\n  };\n\n  Container.prototype.clone = function (obj) {\n    var node = Node_1.Node.prototype.clone.call(this, obj);\n    this.getChildren().each(function (no) {\n      node.add(no.clone());\n    });\n    return node;\n  };\n\n  Container.prototype.getAllIntersections = function (pos) {\n    var arr = [];\n    this.find('Shape').each(function (shape) {\n      if (shape.isVisible() && shape.intersects(pos)) {\n        arr.push(shape);\n      }\n    });\n    return arr;\n  };\n\n  Container.prototype._setChildrenIndices = function () {\n    this.children.each(function (child, n) {\n      child.index = n;\n    });\n  };\n\n  Container.prototype.drawScene = function (can, top, caching) {\n    var layer = this.getLayer(),\n        canvas = can || layer && layer.getCanvas(),\n        context = canvas && canvas.getContext(),\n        cachedCanvas = this._getCanvasCache(),\n        cachedSceneCanvas = cachedCanvas && cachedCanvas.scene;\n\n    if (this.isVisible() || caching) {\n      if (!caching && cachedSceneCanvas) {\n        context.save();\n\n        layer._applyTransform(this, context, top);\n\n        this._drawCachedSceneCanvas(context);\n\n        context.restore();\n      } else {\n        this._drawChildren(canvas, 'drawScene', top, false, caching, caching);\n      }\n    }\n\n    return this;\n  };\n\n  Container.prototype.drawHit = function (can, top, caching) {\n    var layer = this.getLayer(),\n        canvas = can || layer && layer.hitCanvas,\n        context = canvas && canvas.getContext(),\n        cachedCanvas = this._getCanvasCache(),\n        cachedHitCanvas = cachedCanvas && cachedCanvas.hit;\n\n    if (this.shouldDrawHit(canvas) || caching) {\n      if (!caching && cachedHitCanvas) {\n        context.save();\n\n        layer._applyTransform(this, context, top);\n\n        this._drawCachedHitCanvas(context);\n\n        context.restore();\n      } else {\n        this._drawChildren(canvas, 'drawHit', top, false, caching, caching);\n      }\n    }\n\n    return this;\n  };\n\n  Container.prototype._drawChildren = function (canvas, drawMethod, top, caching, skipBuffer, skipComposition) {\n    var layer = this.getLayer(),\n        context = canvas && canvas.getContext(),\n        clipWidth = this.clipWidth(),\n        clipHeight = this.clipHeight(),\n        clipFunc = this.clipFunc(),\n        hasClip = clipWidth && clipHeight || clipFunc,\n        clipX,\n        clipY;\n\n    if (hasClip && layer) {\n      context.save();\n      var transform = this.getAbsoluteTransform(top);\n      var m = transform.getMatrix();\n      context.transform(m[0], m[1], m[2], m[3], m[4], m[5]);\n      context.beginPath();\n\n      if (clipFunc) {\n        clipFunc.call(this, context, this);\n      } else {\n        clipX = this.clipX();\n        clipY = this.clipY();\n        context.rect(clipX, clipY, clipWidth, clipHeight);\n      }\n\n      context.clip();\n      m = transform.copy().invert().getMatrix();\n      context.transform(m[0], m[1], m[2], m[3], m[4], m[5]);\n    }\n\n    var hasComposition = this.globalCompositeOperation() !== 'source-over' && !skipComposition;\n\n    if (hasComposition && layer) {\n      context.save();\n\n      context._applyGlobalCompositeOperation(this);\n    }\n\n    this.children.each(function (child) {\n      child[drawMethod](canvas, top, caching, skipBuffer);\n    });\n\n    if (hasComposition && layer) {\n      context.restore();\n    }\n\n    if (hasClip && layer) {\n      context.restore();\n    }\n  };\n\n  Container.prototype.shouldDrawHit = function (canvas) {\n    var layer = this.getLayer();\n    var layerUnderDrag = DragAndDrop_1.DD.isDragging && DragAndDrop_1.DD.anim.getLayers().indexOf(layer) !== -1;\n    return canvas && canvas.isCache || layer && layer.hitGraphEnabled() && this.isVisible() && !layerUnderDrag;\n  };\n\n  Container.prototype.getClientRect = function (attrs) {\n    attrs = attrs || {};\n    var skipTransform = attrs.skipTransform;\n    var relativeTo = attrs.relativeTo;\n    var minX, minY, maxX, maxY;\n    var selfRect = {\n      x: Infinity,\n      y: Infinity,\n      width: 0,\n      height: 0\n    };\n    var that = this;\n    this.children.each(function (child) {\n      if (!child.visible()) {\n        return;\n      }\n\n      var rect = child.getClientRect({\n        relativeTo: that,\n        skipShadow: attrs.skipShadow,\n        skipStroke: attrs.skipStroke\n      });\n\n      if (rect.width === 0 && rect.height === 0) {\n        return;\n      }\n\n      if (minX === undefined) {\n        minX = rect.x;\n        minY = rect.y;\n        maxX = rect.x + rect.width;\n        maxY = rect.y + rect.height;\n      } else {\n        minX = Math.min(minX, rect.x);\n        minY = Math.min(minY, rect.y);\n        maxX = Math.max(maxX, rect.x + rect.width);\n        maxY = Math.max(maxY, rect.y + rect.height);\n      }\n    });\n    var shapes = this.find('Shape');\n    var hasVisible = false;\n\n    for (var i = 0; i < shapes.length; i++) {\n      var shape = shapes[i];\n\n      if (shape._isVisible(this)) {\n        hasVisible = true;\n        break;\n      }\n    }\n\n    if (hasVisible) {\n      selfRect = {\n        x: minX,\n        y: minY,\n        width: maxX - minX,\n        height: maxY - minY\n      };\n    } else {\n      selfRect = {\n        x: 0,\n        y: 0,\n        width: 0,\n        height: 0\n      };\n    }\n\n    if (!skipTransform) {\n      return this._transformedRect(selfRect, relativeTo);\n    }\n\n    return selfRect;\n  };\n\n  return Container;\n}(Node_1.Node);\n\nexports.Container = Container;\nFactory_1.Factory.addComponentsGetterSetter(Container, 'clip', ['x', 'y', 'width', 'height']);\nFactory_1.Factory.addGetterSetter(Container, 'clipX', undefined, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Container, 'clipY', undefined, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Container, 'clipWidth', undefined, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Container, 'clipHeight', undefined, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Container, 'clipFunc');\nUtil_1.Collection.mapMethods(Container);","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Util_1 = require(\"./Util\");\n\nvar Global_1 = require(\"./Global\");\n\nvar COMMA = ',',\n    OPEN_PAREN = '(',\n    CLOSE_PAREN = ')',\n    OPEN_PAREN_BRACKET = '([',\n    CLOSE_BRACKET_PAREN = '])',\n    SEMICOLON = ';',\n    DOUBLE_PAREN = '()',\n    EQUALS = '=',\n    CONTEXT_METHODS = ['arc', 'arcTo', 'beginPath', 'bezierCurveTo', 'clearRect', 'clip', 'closePath', 'createLinearGradient', 'createPattern', 'createRadialGradient', 'drawImage', 'ellipse', 'fill', 'fillText', 'getImageData', 'createImageData', 'lineTo', 'moveTo', 'putImageData', 'quadraticCurveTo', 'rect', 'restore', 'rotate', 'save', 'scale', 'setLineDash', 'setTransform', 'stroke', 'strokeText', 'transform', 'translate'];\nvar CONTEXT_PROPERTIES = ['fillStyle', 'strokeStyle', 'shadowColor', 'shadowBlur', 'shadowOffsetX', 'shadowOffsetY', 'lineCap', 'lineDashOffset', 'lineJoin', 'lineWidth', 'miterLimit', 'font', 'textAlign', 'textBaseline', 'globalAlpha', 'globalCompositeOperation', 'imageSmoothingEnabled'];\nvar traceArrMax = 100;\n\nvar Context = function () {\n  function Context(canvas) {\n    this.canvas = canvas;\n    this._context = canvas._canvas.getContext('2d');\n\n    if (Global_1.Konva.enableTrace) {\n      this.traceArr = [];\n\n      this._enableTrace();\n    }\n  }\n\n  Context.prototype.fillShape = function (shape) {\n    if (shape.getFillEnabled()) {\n      this._fill(shape);\n    }\n  };\n\n  Context.prototype._fill = function (shape) {};\n\n  Context.prototype.strokeShape = function (shape) {\n    if (shape.getStrokeEnabled()) {\n      this._stroke(shape);\n    }\n  };\n\n  Context.prototype._stroke = function (shape) {};\n\n  Context.prototype.fillStrokeShape = function (shape) {\n    if (shape.getFillEnabled()) {\n      this._fill(shape);\n    }\n\n    if (shape.getStrokeEnabled()) {\n      this._stroke(shape);\n    }\n  };\n\n  Context.prototype.getTrace = function (relaxed) {\n    var traceArr = this.traceArr,\n        len = traceArr.length,\n        str = '',\n        n,\n        trace,\n        method,\n        args;\n\n    for (n = 0; n < len; n++) {\n      trace = traceArr[n];\n      method = trace.method;\n\n      if (method) {\n        args = trace.args;\n        str += method;\n\n        if (relaxed) {\n          str += DOUBLE_PAREN;\n        } else {\n          if (Util_1.Util._isArray(args[0])) {\n            str += OPEN_PAREN_BRACKET + args.join(COMMA) + CLOSE_BRACKET_PAREN;\n          } else {\n            str += OPEN_PAREN + args.join(COMMA) + CLOSE_PAREN;\n          }\n        }\n      } else {\n        str += trace.property;\n\n        if (!relaxed) {\n          str += EQUALS + trace.val;\n        }\n      }\n\n      str += SEMICOLON;\n    }\n\n    return str;\n  };\n\n  Context.prototype.clearTrace = function () {\n    this.traceArr = [];\n  };\n\n  Context.prototype._trace = function (str) {\n    var traceArr = this.traceArr,\n        len;\n    traceArr.push(str);\n    len = traceArr.length;\n\n    if (len >= traceArrMax) {\n      traceArr.shift();\n    }\n  };\n\n  Context.prototype.reset = function () {\n    var pixelRatio = this.getCanvas().getPixelRatio();\n    this.setTransform(1 * pixelRatio, 0, 0, 1 * pixelRatio, 0, 0);\n  };\n\n  Context.prototype.getCanvas = function () {\n    return this.canvas;\n  };\n\n  Context.prototype.clear = function (bounds) {\n    var canvas = this.getCanvas();\n\n    if (bounds) {\n      this.clearRect(bounds.x || 0, bounds.y || 0, bounds.width || 0, bounds.height || 0);\n    } else {\n      this.clearRect(0, 0, canvas.getWidth() / canvas.pixelRatio, canvas.getHeight() / canvas.pixelRatio);\n    }\n  };\n\n  Context.prototype._applyLineCap = function (shape) {\n    var lineCap = shape.getLineCap();\n\n    if (lineCap) {\n      this.setAttr('lineCap', lineCap);\n    }\n  };\n\n  Context.prototype._applyOpacity = function (shape) {\n    var absOpacity = shape.getAbsoluteOpacity();\n\n    if (absOpacity !== 1) {\n      this.setAttr('globalAlpha', absOpacity);\n    }\n  };\n\n  Context.prototype._applyLineJoin = function (shape) {\n    var lineJoin = shape.getLineJoin();\n\n    if (lineJoin) {\n      this.setAttr('lineJoin', lineJoin);\n    }\n  };\n\n  Context.prototype.setAttr = function (attr, val) {\n    this._context[attr] = val;\n  };\n\n  Context.prototype.arc = function (a0, a1, a2, a3, a4, a5) {\n    this._context.arc(a0, a1, a2, a3, a4, a5);\n  };\n\n  Context.prototype.arcTo = function (a0, a1, a2, a3, a4, a5) {\n    this._context.arc(a0, a1, a2, a3, a4, a5);\n  };\n\n  Context.prototype.beginPath = function () {\n    this._context.beginPath();\n  };\n\n  Context.prototype.bezierCurveTo = function (a0, a1, a2, a3, a4, a5) {\n    this._context.bezierCurveTo(a0, a1, a2, a3, a4, a5);\n  };\n\n  Context.prototype.clearRect = function (a0, a1, a2, a3) {\n    this._context.clearRect(a0, a1, a2, a3);\n  };\n\n  Context.prototype.clip = function () {\n    this._context.clip();\n  };\n\n  Context.prototype.closePath = function () {\n    this._context.closePath();\n  };\n\n  Context.prototype.createImageData = function (a0, a1) {\n    var a = arguments;\n\n    if (a.length === 2) {\n      return this._context.createImageData(a0, a1);\n    } else if (a.length === 1) {\n      return this._context.createImageData(a0);\n    }\n  };\n\n  Context.prototype.createLinearGradient = function (a0, a1, a2, a3) {\n    return this._context.createLinearGradient(a0, a1, a2, a3);\n  };\n\n  Context.prototype.createPattern = function (a0, a1) {\n    return this._context.createPattern(a0, a1);\n  };\n\n  Context.prototype.createRadialGradient = function (a0, a1, a2, a3, a4, a5) {\n    return this._context.createRadialGradient(a0, a1, a2, a3, a4, a5);\n  };\n\n  Context.prototype.drawImage = function (a0, a1, a2, a3, a4, a5, a6, a7, a8) {\n    var a = arguments,\n        _context = this._context;\n\n    if (a.length === 3) {\n      _context.drawImage(a0, a1, a2);\n    } else if (a.length === 5) {\n      _context.drawImage(a0, a1, a2, a3, a4);\n    } else if (a.length === 9) {\n      _context.drawImage(a0, a1, a2, a3, a4, a5, a6, a7, a8);\n    }\n  };\n\n  Context.prototype.ellipse = function (a0, a1, a2, a3, a4, a5, a6, a7) {\n    this._context.ellipse(a0, a1, a2, a3, a4, a5, a6, a7);\n  };\n\n  Context.prototype.isPointInPath = function (x, y) {\n    return this._context.isPointInPath(x, y);\n  };\n\n  Context.prototype.fill = function () {\n    this._context.fill();\n  };\n\n  Context.prototype.fillRect = function (x, y, width, height) {\n    this._context.fillRect(x, y, width, height);\n  };\n\n  Context.prototype.strokeRect = function (x, y, width, height) {\n    this._context.strokeRect(x, y, width, height);\n  };\n\n  Context.prototype.fillText = function (a0, a1, a2) {\n    this._context.fillText(a0, a1, a2);\n  };\n\n  Context.prototype.measureText = function (text) {\n    return this._context.measureText(text);\n  };\n\n  Context.prototype.getImageData = function (a0, a1, a2, a3) {\n    return this._context.getImageData(a0, a1, a2, a3);\n  };\n\n  Context.prototype.lineTo = function (a0, a1) {\n    this._context.lineTo(a0, a1);\n  };\n\n  Context.prototype.moveTo = function (a0, a1) {\n    this._context.moveTo(a0, a1);\n  };\n\n  Context.prototype.rect = function (a0, a1, a2, a3) {\n    this._context.rect(a0, a1, a2, a3);\n  };\n\n  Context.prototype.putImageData = function (a0, a1, a2) {\n    this._context.putImageData(a0, a1, a2);\n  };\n\n  Context.prototype.quadraticCurveTo = function (a0, a1, a2, a3) {\n    this._context.quadraticCurveTo(a0, a1, a2, a3);\n  };\n\n  Context.prototype.restore = function () {\n    this._context.restore();\n  };\n\n  Context.prototype.rotate = function (a0) {\n    this._context.rotate(a0);\n  };\n\n  Context.prototype.save = function () {\n    this._context.save();\n  };\n\n  Context.prototype.scale = function (a0, a1) {\n    this._context.scale(a0, a1);\n  };\n\n  Context.prototype.setLineDash = function (a0) {\n    if (this._context.setLineDash) {\n      this._context.setLineDash(a0);\n    } else if ('mozDash' in this._context) {\n      this._context['mozDash'] = a0;\n    } else if ('webkitLineDash' in this._context) {\n      this._context['webkitLineDash'] = a0;\n    }\n  };\n\n  Context.prototype.getLineDash = function () {\n    return this._context.getLineDash();\n  };\n\n  Context.prototype.setTransform = function (a0, a1, a2, a3, a4, a5) {\n    this._context.setTransform(a0, a1, a2, a3, a4, a5);\n  };\n\n  Context.prototype.stroke = function () {\n    this._context.stroke();\n  };\n\n  Context.prototype.strokeText = function (a0, a1, a2, a3) {\n    this._context.strokeText(a0, a1, a2, a3);\n  };\n\n  Context.prototype.transform = function (a0, a1, a2, a3, a4, a5) {\n    this._context.transform(a0, a1, a2, a3, a4, a5);\n  };\n\n  Context.prototype.translate = function (a0, a1) {\n    this._context.translate(a0, a1);\n  };\n\n  Context.prototype._enableTrace = function () {\n    var that = this,\n        len = CONTEXT_METHODS.length,\n        _simplifyArray = Util_1.Util._simplifyArray,\n        origSetter = this.setAttr,\n        n,\n        args;\n\n    var func = function func(methodName) {\n      var origMethod = that[methodName],\n          ret;\n\n      that[methodName] = function () {\n        args = _simplifyArray(Array.prototype.slice.call(arguments, 0));\n        ret = origMethod.apply(that, arguments);\n\n        that._trace({\n          method: methodName,\n          args: args\n        });\n\n        return ret;\n      };\n    };\n\n    for (n = 0; n < len; n++) {\n      func(CONTEXT_METHODS[n]);\n    }\n\n    that.setAttr = function () {\n      origSetter.apply(that, arguments);\n      var prop = arguments[0];\n      var val = arguments[1];\n\n      if (prop === 'shadowOffsetX' || prop === 'shadowOffsetY' || prop === 'shadowBlur') {\n        val = val / this.canvas.getPixelRatio();\n      }\n\n      that._trace({\n        property: prop,\n        val: val\n      });\n    };\n  };\n\n  Context.prototype._applyGlobalCompositeOperation = function (node) {\n    var globalCompositeOperation = node.getGlobalCompositeOperation();\n\n    if (globalCompositeOperation !== 'source-over') {\n      this.setAttr('globalCompositeOperation', globalCompositeOperation);\n    }\n  };\n\n  return Context;\n}();\n\nexports.Context = Context;\nCONTEXT_PROPERTIES.forEach(function (prop) {\n  Object.defineProperty(Context.prototype, prop, {\n    get: function get() {\n      return this._context[prop];\n    },\n    set: function set(val) {\n      this._context[prop] = val;\n    }\n  });\n});\n\nvar SceneContext = function (_super) {\n  __extends(SceneContext, _super);\n\n  function SceneContext() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  SceneContext.prototype._fillColor = function (shape) {\n    var fill = shape.fill();\n    this.setAttr('fillStyle', fill);\n\n    shape._fillFunc(this);\n  };\n\n  SceneContext.prototype._fillPattern = function (shape) {\n    var fillPatternX = shape.getFillPatternX(),\n        fillPatternY = shape.getFillPatternY(),\n        fillPatternScaleX = shape.getFillPatternScaleX(),\n        fillPatternScaleY = shape.getFillPatternScaleY(),\n        fillPatternRotation = Global_1.Konva.getAngle(shape.getFillPatternRotation()),\n        fillPatternOffsetX = shape.getFillPatternOffsetX(),\n        fillPatternOffsetY = shape.getFillPatternOffsetY();\n\n    if (fillPatternX || fillPatternY) {\n      this.translate(fillPatternX || 0, fillPatternY || 0);\n    }\n\n    if (fillPatternRotation) {\n      this.rotate(fillPatternRotation);\n    }\n\n    if (fillPatternScaleX || fillPatternScaleY) {\n      this.scale(fillPatternScaleX, fillPatternScaleY);\n    }\n\n    if (fillPatternOffsetX || fillPatternOffsetY) {\n      this.translate(-1 * fillPatternOffsetX, -1 * fillPatternOffsetY);\n    }\n\n    this.setAttr('fillStyle', shape._getFillPattern());\n\n    shape._fillFunc(this);\n  };\n\n  SceneContext.prototype._fillLinearGradient = function (shape) {\n    var grd = shape._getLinearGradient();\n\n    if (grd) {\n      this.setAttr('fillStyle', grd);\n\n      shape._fillFunc(this);\n    }\n  };\n\n  SceneContext.prototype._fillRadialGradient = function (shape) {\n    var grd = shape._getRadialGradient();\n\n    if (grd) {\n      this.setAttr('fillStyle', grd);\n\n      shape._fillFunc(this);\n    }\n  };\n\n  SceneContext.prototype._fill = function (shape) {\n    var hasColor = shape.fill(),\n        fillPriority = shape.getFillPriority();\n\n    if (hasColor && fillPriority === 'color') {\n      this._fillColor(shape);\n\n      return;\n    }\n\n    var hasPattern = shape.getFillPatternImage();\n\n    if (hasPattern && fillPriority === 'pattern') {\n      this._fillPattern(shape);\n\n      return;\n    }\n\n    var hasLinearGradient = shape.getFillLinearGradientColorStops();\n\n    if (hasLinearGradient && fillPriority === 'linear-gradient') {\n      this._fillLinearGradient(shape);\n\n      return;\n    }\n\n    var hasRadialGradient = shape.getFillRadialGradientColorStops();\n\n    if (hasRadialGradient && fillPriority === 'radial-gradient') {\n      this._fillRadialGradient(shape);\n\n      return;\n    }\n\n    if (hasColor) {\n      this._fillColor(shape);\n    } else if (hasPattern) {\n      this._fillPattern(shape);\n    } else if (hasLinearGradient) {\n      this._fillLinearGradient(shape);\n    } else if (hasRadialGradient) {\n      this._fillRadialGradient(shape);\n    }\n  };\n\n  SceneContext.prototype._strokeLinearGradient = function (shape) {\n    var start = shape.getStrokeLinearGradientStartPoint(),\n        end = shape.getStrokeLinearGradientEndPoint(),\n        colorStops = shape.getStrokeLinearGradientColorStops(),\n        grd = this.createLinearGradient(start.x, start.y, end.x, end.y);\n\n    if (colorStops) {\n      for (var n = 0; n < colorStops.length; n += 2) {\n        grd.addColorStop(colorStops[n], colorStops[n + 1]);\n      }\n\n      this.setAttr('strokeStyle', grd);\n    }\n  };\n\n  SceneContext.prototype._stroke = function (shape) {\n    var dash = shape.dash(),\n        strokeScaleEnabled = shape.getStrokeScaleEnabled();\n\n    if (shape.hasStroke()) {\n      if (!strokeScaleEnabled) {\n        this.save();\n        var pixelRatio = this.getCanvas().getPixelRatio();\n        this.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);\n      }\n\n      this._applyLineCap(shape);\n\n      if (dash && shape.dashEnabled()) {\n        this.setLineDash(dash);\n        this.setAttr('lineDashOffset', shape.dashOffset());\n      }\n\n      this.setAttr('lineWidth', shape.strokeWidth());\n\n      if (!shape.getShadowForStrokeEnabled()) {\n        this.setAttr('shadowColor', 'rgba(0,0,0,0)');\n      }\n\n      var hasLinearGradient = shape.getStrokeLinearGradientColorStops();\n\n      if (hasLinearGradient) {\n        this._strokeLinearGradient(shape);\n      } else {\n        this.setAttr('strokeStyle', shape.stroke());\n      }\n\n      shape._strokeFunc(this);\n\n      if (!strokeScaleEnabled) {\n        this.restore();\n      }\n    }\n  };\n\n  SceneContext.prototype._applyShadow = function (shape) {\n    var util = Util_1.Util,\n        color = util.get(shape.getShadowRGBA(), 'black'),\n        blur = util.get(shape.getShadowBlur(), 5),\n        offset = util.get(shape.getShadowOffset(), {\n      x: 0,\n      y: 0\n    }),\n        scale = shape.getAbsoluteScale(),\n        ratio = this.canvas.getPixelRatio(),\n        scaleX = scale.x * ratio,\n        scaleY = scale.y * ratio;\n    this.setAttr('shadowColor', color);\n    this.setAttr('shadowBlur', blur * Math.min(Math.abs(scaleX), Math.abs(scaleY)));\n    this.setAttr('shadowOffsetX', offset.x * scaleX);\n    this.setAttr('shadowOffsetY', offset.y * scaleY);\n  };\n\n  return SceneContext;\n}(Context);\n\nexports.SceneContext = SceneContext;\n\nvar HitContext = function (_super) {\n  __extends(HitContext, _super);\n\n  function HitContext() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  HitContext.prototype._fill = function (shape) {\n    this.save();\n    this.setAttr('fillStyle', shape.colorKey);\n\n    shape._fillFuncHit(this);\n\n    this.restore();\n  };\n\n  HitContext.prototype._stroke = function (shape) {\n    if (shape.hasStroke() && shape.hitStrokeWidth()) {\n      var strokeScaleEnabled = shape.getStrokeScaleEnabled();\n\n      if (!strokeScaleEnabled) {\n        this.save();\n        var pixelRatio = this.getCanvas().getPixelRatio();\n        this.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);\n      }\n\n      this._applyLineCap(shape);\n\n      var hitStrokeWidth = shape.hitStrokeWidth();\n      var strokeWidth = hitStrokeWidth === 'auto' ? shape.strokeWidth() : hitStrokeWidth;\n      this.setAttr('lineWidth', strokeWidth);\n      this.setAttr('strokeStyle', shape.colorKey);\n\n      shape._strokeFuncHit(this);\n\n      if (!strokeScaleEnabled) {\n        this.restore();\n      }\n    }\n  };\n\n  return HitContext;\n}(Context);\n\nexports.HitContext = HitContext;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Animation_1 = require(\"./Animation\");\n\nvar Global_1 = require(\"./Global\");\n\nexports.DD = {\n  startPointerPos: {\n    x: 0,\n    y: 0\n  },\n  anim: new Animation_1.Animation(function () {\n    var b = this.dirty;\n    this.dirty = false;\n    return b;\n  }),\n  isDragging: false,\n  justDragged: false,\n  offset: {\n    x: 0,\n    y: 0\n  },\n  node: null,\n  _drag: function _drag(evt) {\n    var node = exports.DD.node;\n\n    if (node) {\n      if (!exports.DD.isDragging) {\n        var pos = node.getStage().getPointerPosition();\n\n        if (!pos) {\n          node.getStage().setPointersPositions(evt);\n          pos = node.getStage().getPointerPosition();\n        }\n\n        var dragDistance = node.dragDistance();\n        var distance = Math.max(Math.abs(pos.x - exports.DD.startPointerPos.x), Math.abs(pos.y - exports.DD.startPointerPos.y));\n\n        if (distance < dragDistance) {\n          return;\n        }\n      }\n\n      node.getStage().setPointersPositions(evt);\n\n      if (!exports.DD.isDragging) {\n        exports.DD.isDragging = true;\n        node.fire('dragstart', {\n          type: 'dragstart',\n          target: node,\n          evt: evt\n        }, true);\n\n        if (!node.isDragging()) {\n          return;\n        }\n      }\n\n      node._setDragPosition(evt);\n\n      node.fire('dragmove', {\n        type: 'dragmove',\n        target: node,\n        evt: evt\n      }, true);\n    }\n  },\n  _endDragBefore: function _endDragBefore(evt) {\n    var node = exports.DD.node;\n\n    if (node) {\n      exports.DD.anim.stop();\n\n      if (exports.DD.isDragging) {\n        exports.DD.isDragging = false;\n        exports.DD.justDragged = true;\n        Global_1.Konva.listenClickTap = false;\n\n        if (evt) {\n          evt.dragEndNode = node;\n        }\n      }\n\n      exports.DD.node = null;\n      var drawNode = node.getLayer() || node instanceof Global_1.Konva['Stage'] && node;\n\n      if (drawNode) {\n        drawNode.draw();\n      }\n    }\n  },\n  _endDragAfter: function _endDragAfter(evt) {\n    evt = evt || {};\n    var dragEndNode = evt.dragEndNode;\n\n    if (evt && dragEndNode) {\n      dragEndNode.fire('dragend', {\n        type: 'dragend',\n        target: dragEndNode,\n        evt: evt\n      }, true);\n    }\n  }\n};\n\nif (Global_1.Konva.isBrowser) {\n  window.addEventListener('mouseup', exports.DD._endDragBefore, true);\n  window.addEventListener('touchend', exports.DD._endDragBefore, true);\n  window.addEventListener('mousemove', exports.DD._drag);\n  window.addEventListener('touchmove', exports.DD._drag);\n  window.addEventListener('mouseup', exports.DD._endDragAfter, false);\n  window.addEventListener('touchend', exports.DD._endDragAfter, false);\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Util_1 = require(\"./Util\");\n\nvar Validators_1 = require(\"./Validators\");\n\nvar GET = 'get',\n    SET = 'set';\nexports.Factory = {\n  addGetterSetter: function addGetterSetter(constructor, attr, def, validator, after) {\n    this.addGetter(constructor, attr, def);\n    this.addSetter(constructor, attr, validator, after);\n    this.addOverloadedGetterSetter(constructor, attr);\n  },\n  addGetter: function addGetter(constructor, attr, def) {\n    var method = GET + Util_1.Util._capitalize(attr);\n\n    constructor.prototype[method] = constructor.prototype[method] || function () {\n      var val = this.attrs[attr];\n      return val === undefined ? def : val;\n    };\n  },\n  addSetter: function addSetter(constructor, attr, validator, after) {\n    var method = SET + Util_1.Util._capitalize(attr);\n\n    if (!constructor.prototype[method]) {\n      exports.Factory.overWriteSetter(constructor, attr, validator, after);\n    }\n  },\n  overWriteSetter: function overWriteSetter(constructor, attr, validator, after) {\n    var method = SET + Util_1.Util._capitalize(attr);\n\n    constructor.prototype[method] = function (val) {\n      if (validator && val !== undefined && val !== null) {\n        val = validator.call(this, val, attr);\n      }\n\n      this._setAttr(attr, val);\n\n      if (after) {\n        after.call(this);\n      }\n\n      return this;\n    };\n  },\n  addComponentsGetterSetter: function addComponentsGetterSetter(constructor, attr, components, validator, after) {\n    var len = components.length,\n        capitalize = Util_1.Util._capitalize,\n        getter = GET + capitalize(attr),\n        setter = SET + capitalize(attr),\n        n,\n        component;\n\n    constructor.prototype[getter] = function () {\n      var ret = {};\n\n      for (n = 0; n < len; n++) {\n        component = components[n];\n        ret[component] = this.getAttr(attr + capitalize(component));\n      }\n\n      return ret;\n    };\n\n    var basicValidator = Validators_1.getComponentValidator(components);\n\n    constructor.prototype[setter] = function (val) {\n      var oldVal = this.attrs[attr],\n          key;\n\n      if (validator) {\n        val = validator.call(this, val);\n      }\n\n      if (basicValidator) {\n        basicValidator.call(this, val, attr);\n      }\n\n      for (key in val) {\n        if (!val.hasOwnProperty(key)) {\n          continue;\n        }\n\n        this._setAttr(attr + capitalize(key), val[key]);\n      }\n\n      this._fireChangeEvent(attr, oldVal, val);\n\n      if (after) {\n        after.call(this);\n      }\n\n      return this;\n    };\n\n    this.addOverloadedGetterSetter(constructor, attr);\n  },\n  addOverloadedGetterSetter: function addOverloadedGetterSetter(constructor, attr) {\n    var capitalizedAttr = Util_1.Util._capitalize(attr),\n        setter = SET + capitalizedAttr,\n        getter = GET + capitalizedAttr;\n\n    constructor.prototype[attr] = function () {\n      if (arguments.length) {\n        this[setter](arguments[0]);\n        return this;\n      }\n\n      return this[getter]();\n    };\n  },\n  addDeprecatedGetterSetter: function addDeprecatedGetterSetter(constructor, attr, def, validator) {\n    Util_1.Util.error('Adding deprecated ' + attr);\n\n    var method = GET + Util_1.Util._capitalize(attr);\n\n    var message = attr + ' property is deprecated and will be removed soon. Look at Konva change log for more information.';\n\n    constructor.prototype[method] = function () {\n      Util_1.Util.error(message);\n      var val = this.attrs[attr];\n      return val === undefined ? def : val;\n    };\n\n    this.addSetter(constructor, attr, validator, function () {\n      Util_1.Util.error(message);\n    });\n    this.addOverloadedGetterSetter(constructor, attr);\n  },\n  backCompat: function backCompat(constructor, methods) {\n    Util_1.Util.each(methods, function (oldMethodName, newMethodName) {\n      var method = constructor.prototype[newMethodName];\n\n      var oldGetter = GET + Util_1.Util._capitalize(oldMethodName);\n\n      var oldSetter = SET + Util_1.Util._capitalize(oldMethodName);\n\n      function deprecated() {\n        method.apply(this, arguments);\n        Util_1.Util.error('\"' + oldMethodName + '\" method is deprecated and will be removed soon. Use \"\"' + newMethodName + '\" instead.');\n      }\n\n      constructor.prototype[oldMethodName] = deprecated;\n      constructor.prototype[oldGetter] = deprecated;\n      constructor.prototype[oldSetter] = deprecated;\n    });\n  },\n  afterSetFilter: function afterSetFilter() {\n    this._filterUpToDate = false;\n  }\n};","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Util_1 = require(\"./Util\");\n\nvar Container_1 = require(\"./Container\");\n\nvar BaseLayer_1 = require(\"./BaseLayer\");\n\nvar Global_1 = require(\"./Global\");\n\nvar FastLayer = function (_super) {\n  __extends(FastLayer, _super);\n\n  function FastLayer() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  FastLayer.prototype._validateAdd = function (child) {\n    var type = child.getType();\n\n    if (type !== 'Shape') {\n      Util_1.Util.throw('You may only add shapes to a fast layer.');\n    }\n  };\n\n  FastLayer.prototype._setCanvasSize = function (width, height) {\n    this.canvas.setSize(width, height);\n\n    this._checkSmooth();\n  };\n\n  FastLayer.prototype.hitGraphEnabled = function () {\n    return false;\n  };\n\n  FastLayer.prototype.drawScene = function (can) {\n    var layer = this.getLayer(),\n        canvas = can || layer && layer.getCanvas();\n\n    if (this.clearBeforeDraw()) {\n      canvas.getContext().clear();\n    }\n\n    Container_1.Container.prototype.drawScene.call(this, canvas);\n    return this;\n  };\n\n  FastLayer.prototype.draw = function () {\n    this.drawScene();\n    return this;\n  };\n\n  return FastLayer;\n}(BaseLayer_1.BaseLayer);\n\nexports.FastLayer = FastLayer;\nFastLayer.prototype.nodeType = 'FastLayer';\n\nGlobal_1._registerNode(FastLayer);\n\nUtil_1.Collection.mapMethods(FastLayer);","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar PI_OVER_180 = Math.PI / 180;\n\nfunction detectBrowser() {\n  return typeof window !== 'undefined' && ({}.toString.call(window) === '[object Window]' || {}.toString.call(window) === '[object global]');\n}\n\nvar _detectIE = function _detectIE(ua) {\n  var msie = ua.indexOf('msie ');\n\n  if (msie > 0) {\n    return parseInt(ua.substring(msie + 5, ua.indexOf('.', msie)), 10);\n  }\n\n  var trident = ua.indexOf('trident/');\n\n  if (trident > 0) {\n    var rv = ua.indexOf('rv:');\n    return parseInt(ua.substring(rv + 3, ua.indexOf('.', rv)), 10);\n  }\n\n  var edge = ua.indexOf('edge/');\n\n  if (edge > 0) {\n    return parseInt(ua.substring(edge + 5, ua.indexOf('.', edge)), 10);\n  }\n\n  return false;\n};\n\nexports._parseUA = function (userAgent) {\n  var ua = userAgent.toLowerCase(),\n      match = /(chrome)[ /]([\\w.]+)/.exec(ua) || /(webkit)[ /]([\\w.]+)/.exec(ua) || /(opera)(?:.*version|)[ /]([\\w.]+)/.exec(ua) || /(msie) ([\\w.]+)/.exec(ua) || ua.indexOf('compatible') < 0 && /(mozilla)(?:.*? rv:([\\w.]+)|)/.exec(ua) || [],\n      mobile = !!userAgent.match(/Android|BlackBerry|iPhone|iPad|iPod|Opera Mini|IEMobile/i),\n      ieMobile = !!userAgent.match(/IEMobile/i);\n  return {\n    browser: match[1] || '',\n    version: match[2] || '0',\n    isIE: _detectIE(ua),\n    mobile: mobile,\n    ieMobile: ieMobile\n  };\n};\n\nexports.glob = typeof global !== 'undefined' ? global : typeof window !== 'undefined' ? window : typeof WorkerGlobalScope !== 'undefined' ? self : {};\nexports.Konva = {\n  _global: exports.glob,\n  version: '3.4.1',\n  isBrowser: detectBrowser(),\n  isUnminified: /param/.test(function (param) {}.toString()),\n  dblClickWindow: 400,\n  getAngle: function getAngle(angle) {\n    return exports.Konva.angleDeg ? angle * PI_OVER_180 : angle;\n  },\n  enableTrace: false,\n  _pointerEventsEnabled: false,\n  listenClickTap: false,\n  inDblClickWindow: false,\n  pixelRatio: undefined,\n  dragDistance: 3,\n  angleDeg: true,\n  showWarnings: true,\n  dragButtons: [0, 1],\n  isDragging: function isDragging() {\n    return exports.Konva['DD'].isDragging;\n  },\n  isDragReady: function isDragReady() {\n    return !!exports.Konva['DD'].node;\n  },\n  UA: exports._parseUA(exports.glob.navigator && exports.glob.navigator.userAgent || ''),\n  document: exports.glob.document,\n  _injectGlobal: function _injectGlobal(Konva) {\n    exports.glob.Konva = Konva;\n  },\n  _parseUA: exports._parseUA\n};\nexports._NODES_REGISTRY = {};\n\nexports._registerNode = function (NodeClass) {\n  exports._NODES_REGISTRY[NodeClass.prototype.getClassName()] = NodeClass;\n  exports.Konva[NodeClass.prototype.getClassName()] = NodeClass;\n};","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Util_1 = require(\"./Util\");\n\nvar Container_1 = require(\"./Container\");\n\nvar Global_1 = require(\"./Global\");\n\nvar Group = function (_super) {\n  __extends(Group, _super);\n\n  function Group() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  Group.prototype._validateAdd = function (child) {\n    var type = child.getType();\n\n    if (type !== 'Group' && type !== 'Shape') {\n      Util_1.Util.throw('You may only add groups and shapes to groups.');\n    }\n  };\n\n  return Group;\n}(Container_1.Container);\n\nexports.Group = Group;\nGroup.prototype.nodeType = 'Group';\n\nGlobal_1._registerNode(Group);\n\nUtil_1.Collection.mapMethods(Group);","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Util_1 = require(\"./Util\");\n\nvar Container_1 = require(\"./Container\");\n\nvar Factory_1 = require(\"./Factory\");\n\nvar BaseLayer_1 = require(\"./BaseLayer\");\n\nvar Canvas_1 = require(\"./Canvas\");\n\nvar Shape_1 = require(\"./Shape\");\n\nvar Validators_1 = require(\"./Validators\");\n\nvar Global_1 = require(\"./Global\");\n\nvar HASH = '#',\n    BEFORE_DRAW = 'beforeDraw',\n    DRAW = 'draw',\n    INTERSECTION_OFFSETS = [{\n  x: 0,\n  y: 0\n}, {\n  x: -1,\n  y: -1\n}, {\n  x: 1,\n  y: -1\n}, {\n  x: 1,\n  y: 1\n}, {\n  x: -1,\n  y: 1\n}],\n    INTERSECTION_OFFSETS_LEN = INTERSECTION_OFFSETS.length;\n\nvar Layer = function (_super) {\n  __extends(Layer, _super);\n\n  function Layer() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.hitCanvas = new Canvas_1.HitCanvas({\n      pixelRatio: 1\n    });\n    return _this;\n  }\n\n  Layer.prototype._setCanvasSize = function (width, height) {\n    this.canvas.setSize(width, height);\n    this.hitCanvas.setSize(width, height);\n\n    this._checkSmooth();\n  };\n\n  Layer.prototype._validateAdd = function (child) {\n    var type = child.getType();\n\n    if (type !== 'Group' && type !== 'Shape') {\n      Util_1.Util.throw('You may only add groups and shapes to a layer.');\n    }\n  };\n\n  Layer.prototype.getIntersection = function (pos, selector) {\n    var obj, i, intersectionOffset, shape;\n\n    if (!this.hitGraphEnabled() || !this.isVisible()) {\n      return null;\n    }\n\n    var spiralSearchDistance = 1;\n    var continueSearch = false;\n\n    while (true) {\n      for (i = 0; i < INTERSECTION_OFFSETS_LEN; i++) {\n        intersectionOffset = INTERSECTION_OFFSETS[i];\n        obj = this._getIntersection({\n          x: pos.x + intersectionOffset.x * spiralSearchDistance,\n          y: pos.y + intersectionOffset.y * spiralSearchDistance\n        });\n        shape = obj.shape;\n\n        if (shape && selector) {\n          return shape.findAncestor(selector, true);\n        } else if (shape) {\n          return shape;\n        }\n\n        continueSearch = !!obj.antialiased;\n\n        if (!obj.antialiased) {\n          break;\n        }\n      }\n\n      if (continueSearch) {\n        spiralSearchDistance += 1;\n      } else {\n        return null;\n      }\n    }\n  };\n\n  Layer.prototype._getIntersection = function (pos) {\n    var ratio = this.hitCanvas.pixelRatio;\n    var p = this.hitCanvas.context.getImageData(Math.round(pos.x * ratio), Math.round(pos.y * ratio), 1, 1).data,\n        p3 = p[3],\n        colorKey,\n        shape;\n\n    if (p3 === 255) {\n      colorKey = Util_1.Util._rgbToHex(p[0], p[1], p[2]);\n      shape = Shape_1.shapes[HASH + colorKey];\n\n      if (shape) {\n        return {\n          shape: shape\n        };\n      }\n\n      return {\n        antialiased: true\n      };\n    } else if (p3 > 0) {\n      return {\n        antialiased: true\n      };\n    }\n\n    return {};\n  };\n\n  Layer.prototype.drawScene = function (can, top) {\n    var layer = this.getLayer(),\n        canvas = can || layer && layer.getCanvas();\n\n    this._fire(BEFORE_DRAW, {\n      node: this\n    });\n\n    if (this.clearBeforeDraw()) {\n      canvas.getContext().clear();\n    }\n\n    Container_1.Container.prototype.drawScene.call(this, canvas, top);\n\n    this._fire(DRAW, {\n      node: this\n    });\n\n    return this;\n  };\n\n  Layer.prototype.drawHit = function (can, top) {\n    var layer = this.getLayer(),\n        canvas = can || layer && layer.hitCanvas;\n\n    if (layer && layer.clearBeforeDraw()) {\n      layer.getHitCanvas().getContext().clear();\n    }\n\n    Container_1.Container.prototype.drawHit.call(this, canvas, top);\n    return this;\n  };\n\n  Layer.prototype.clear = function (bounds) {\n    BaseLayer_1.BaseLayer.prototype.clear.call(this, bounds);\n    this.getHitCanvas().getContext().clear(bounds);\n    return this;\n  };\n\n  Layer.prototype.enableHitGraph = function () {\n    this.hitGraphEnabled(true);\n    return this;\n  };\n\n  Layer.prototype.disableHitGraph = function () {\n    this.hitGraphEnabled(false);\n    return this;\n  };\n\n  Layer.prototype.toggleHitCanvas = function () {\n    if (!this.parent) {\n      return;\n    }\n\n    var parent = this.parent;\n    var added = !!this.hitCanvas._canvas.parentNode;\n\n    if (added) {\n      parent.content.removeChild(this.hitCanvas._canvas);\n    } else {\n      parent.content.appendChild(this.hitCanvas._canvas);\n    }\n  };\n\n  Layer.prototype.setSize = function (_a) {\n    var width = _a.width,\n        height = _a.height;\n\n    _super.prototype.setSize.call(this, {\n      width: width,\n      height: height\n    });\n\n    this.hitCanvas.setSize(width, height);\n    return this;\n  };\n\n  return Layer;\n}(BaseLayer_1.BaseLayer);\n\nexports.Layer = Layer;\nLayer.prototype.nodeType = 'Layer';\n\nGlobal_1._registerNode(Layer);\n\nFactory_1.Factory.addGetterSetter(Layer, 'hitGraphEnabled', true, Validators_1.getBooleanValidator());\nUtil_1.Collection.mapMethods(Layer);","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Util_1 = require(\"./Util\");\n\nvar Factory_1 = require(\"./Factory\");\n\nvar Canvas_1 = require(\"./Canvas\");\n\nvar Global_1 = require(\"./Global\");\n\nvar DragAndDrop_1 = require(\"./DragAndDrop\");\n\nvar Validators_1 = require(\"./Validators\");\n\nexports.ids = {};\nexports.names = {};\n\nvar _addId = function _addId(node, id) {\n  if (!id) {\n    return;\n  }\n\n  exports.ids[id] = node;\n};\n\nexports._removeId = function (id, node) {\n  if (!id) {\n    return;\n  }\n\n  if (exports.ids[id] !== node) {\n    return;\n  }\n\n  delete exports.ids[id];\n};\n\nexports._addName = function (node, name) {\n  if (name) {\n    if (!exports.names[name]) {\n      exports.names[name] = [];\n    }\n\n    exports.names[name].push(node);\n  }\n};\n\nexports._removeName = function (name, _id) {\n  if (!name) {\n    return;\n  }\n\n  var nodes = exports.names[name];\n\n  if (!nodes) {\n    return;\n  }\n\n  for (var n = 0; n < nodes.length; n++) {\n    var no = nodes[n];\n\n    if (no._id === _id) {\n      nodes.splice(n, 1);\n    }\n  }\n\n  if (nodes.length === 0) {\n    delete exports.names[name];\n  }\n};\n\nvar ABSOLUTE_OPACITY = 'absoluteOpacity',\n    ABSOLUTE_TRANSFORM = 'absoluteTransform',\n    ABSOLUTE_SCALE = 'absoluteScale',\n    CANVAS = 'canvas',\n    CHANGE = 'Change',\n    CHILDREN = 'children',\n    KONVA = 'konva',\n    LISTENING = 'listening',\n    MOUSEENTER = 'mouseenter',\n    MOUSELEAVE = 'mouseleave',\n    NAME = 'name',\n    SET = 'set',\n    SHAPE = 'Shape',\n    SPACE = ' ',\n    STAGE = 'stage',\n    TRANSFORM = 'transform',\n    UPPER_STAGE = 'Stage',\n    VISIBLE = 'visible',\n    CLONE_BLACK_LIST = ['id'],\n    TRANSFORM_CHANGE_STR = ['xChange.konva', 'yChange.konva', 'scaleXChange.konva', 'scaleYChange.konva', 'skewXChange.konva', 'skewYChange.konva', 'rotationChange.konva', 'offsetXChange.konva', 'offsetYChange.konva', 'transformsEnabledChange.konva'].join(SPACE),\n    SCALE_CHANGE_STR = ['scaleXChange.konva', 'scaleYChange.konva'].join(SPACE);\nvar emptyChildren = new Util_1.Collection();\nvar idCounter = 1;\n\nvar Node = function () {\n  function Node(config) {\n    var _this = this;\n\n    this._id = idCounter++;\n    this.eventListeners = {};\n    this.attrs = {};\n    this.index = 0;\n    this.parent = null;\n    this._cache = new Map();\n    this._lastPos = null;\n    this._filterUpToDate = false;\n    this._isUnderCache = false;\n    this.children = emptyChildren;\n    this.setAttrs(config);\n    this.on(TRANSFORM_CHANGE_STR, function () {\n      _this._clearCache(TRANSFORM);\n\n      _this._clearSelfAndDescendantCache(ABSOLUTE_TRANSFORM);\n    });\n    this.on(SCALE_CHANGE_STR, function () {\n      _this._clearSelfAndDescendantCache(ABSOLUTE_SCALE);\n    });\n    this.on('visibleChange.konva', function () {\n      _this._clearSelfAndDescendantCache(VISIBLE);\n    });\n    this.on('listeningChange.konva', function () {\n      _this._clearSelfAndDescendantCache(LISTENING);\n    });\n    this.on('opacityChange.konva', function () {\n      _this._clearSelfAndDescendantCache(ABSOLUTE_OPACITY);\n    });\n  }\n\n  Node.prototype.hasChildren = function () {\n    return false;\n  };\n\n  Node.prototype.getChildren = function () {\n    return emptyChildren;\n  };\n\n  Node.prototype._clearCache = function (attr) {\n    if (attr) {\n      this._cache.delete(attr);\n    } else {\n      this._cache.clear();\n    }\n  };\n\n  Node.prototype._getCache = function (attr, privateGetter) {\n    var cache = this._cache.get(attr);\n\n    if (cache === undefined) {\n      cache = privateGetter.call(this);\n\n      this._cache.set(attr, cache);\n    }\n\n    return cache;\n  };\n\n  Node.prototype._getCanvasCache = function () {\n    return this._cache.get(CANVAS);\n  };\n\n  Node.prototype._clearSelfAndDescendantCache = function (attr) {\n    this._clearCache(attr);\n\n    if (this._getCanvasCache()) {\n      return;\n    }\n\n    if (this.children) {\n      this.children.each(function (node) {\n        node._clearSelfAndDescendantCache(attr);\n      });\n    }\n  };\n\n  Node.prototype.clearCache = function () {\n    this._cache.delete(CANVAS);\n\n    this._clearSelfAndDescendantCache();\n\n    return this;\n  };\n\n  Node.prototype.cache = function (config) {\n    var conf = config || {};\n    var rect = {};\n\n    if (conf.x === undefined || conf.y === undefined || conf.width === undefined || conf.height === undefined) {\n      rect = this.getClientRect({\n        skipTransform: true,\n        relativeTo: this.getParent()\n      });\n    }\n\n    var width = conf.width || rect.width,\n        height = conf.height || rect.height,\n        pixelRatio = conf.pixelRatio,\n        x = conf.x === undefined ? rect.x : conf.x,\n        y = conf.y === undefined ? rect.y : conf.y,\n        offset = conf.offset || 0,\n        drawBorder = conf.drawBorder || false;\n\n    if (!width || !height) {\n      Util_1.Util.error('Can not cache the node. Width or height of the node equals 0. Caching is skipped.');\n      return;\n    }\n\n    width += offset * 2;\n    height += offset * 2;\n    x -= offset;\n    y -= offset;\n    var cachedSceneCanvas = new Canvas_1.SceneCanvas({\n      pixelRatio: pixelRatio,\n      width: width,\n      height: height\n    }),\n        cachedFilterCanvas = new Canvas_1.SceneCanvas({\n      pixelRatio: pixelRatio,\n      width: width,\n      height: height\n    }),\n        cachedHitCanvas = new Canvas_1.HitCanvas({\n      pixelRatio: 1,\n      width: width,\n      height: height\n    }),\n        sceneContext = cachedSceneCanvas.getContext(),\n        hitContext = cachedHitCanvas.getContext();\n    cachedHitCanvas.isCache = true;\n\n    this._cache.delete('canvas');\n\n    this._filterUpToDate = false;\n\n    if (conf.imageSmoothingEnabled === false) {\n      cachedSceneCanvas.getContext()._context.imageSmoothingEnabled = false;\n      cachedFilterCanvas.getContext()._context.imageSmoothingEnabled = false;\n      cachedHitCanvas.getContext()._context.imageSmoothingEnabled = false;\n    }\n\n    sceneContext.save();\n    hitContext.save();\n    sceneContext.translate(-x, -y);\n    hitContext.translate(-x, -y);\n    this._isUnderCache = true;\n\n    this._clearSelfAndDescendantCache(ABSOLUTE_OPACITY);\n\n    this._clearSelfAndDescendantCache(ABSOLUTE_SCALE);\n\n    this.drawScene(cachedSceneCanvas, this, true);\n    this.drawHit(cachedHitCanvas, this, true);\n    this._isUnderCache = false;\n    sceneContext.restore();\n    hitContext.restore();\n\n    if (drawBorder) {\n      sceneContext.save();\n      sceneContext.beginPath();\n      sceneContext.rect(0, 0, width, height);\n      sceneContext.closePath();\n      sceneContext.setAttr('strokeStyle', 'red');\n      sceneContext.setAttr('lineWidth', 5);\n      sceneContext.stroke();\n      sceneContext.restore();\n    }\n\n    this._cache.set(CANVAS, {\n      scene: cachedSceneCanvas,\n      filter: cachedFilterCanvas,\n      hit: cachedHitCanvas,\n      x: x,\n      y: y\n    });\n\n    return this;\n  };\n\n  Node.prototype.getClientRect = function (config) {\n    throw new Error('abstract \"getClientRect\" method call');\n  };\n\n  Node.prototype._transformedRect = function (rect, top) {\n    var points = [{\n      x: rect.x,\n      y: rect.y\n    }, {\n      x: rect.x + rect.width,\n      y: rect.y\n    }, {\n      x: rect.x + rect.width,\n      y: rect.y + rect.height\n    }, {\n      x: rect.x,\n      y: rect.y + rect.height\n    }];\n    var minX, minY, maxX, maxY;\n    var trans = this.getAbsoluteTransform(top);\n    points.forEach(function (point) {\n      var transformed = trans.point(point);\n\n      if (minX === undefined) {\n        minX = maxX = transformed.x;\n        minY = maxY = transformed.y;\n      }\n\n      minX = Math.min(minX, transformed.x);\n      minY = Math.min(minY, transformed.y);\n      maxX = Math.max(maxX, transformed.x);\n      maxY = Math.max(maxY, transformed.y);\n    });\n    return {\n      x: minX,\n      y: minY,\n      width: maxX - minX,\n      height: maxY - minY\n    };\n  };\n\n  Node.prototype._drawCachedSceneCanvas = function (context) {\n    context.save();\n\n    context._applyOpacity(this);\n\n    context._applyGlobalCompositeOperation(this);\n\n    var canvasCache = this._getCanvasCache();\n\n    context.translate(canvasCache.x, canvasCache.y);\n\n    var cacheCanvas = this._getCachedSceneCanvas();\n\n    var ratio = cacheCanvas.pixelRatio;\n    context.drawImage(cacheCanvas._canvas, 0, 0, cacheCanvas.width / ratio, cacheCanvas.height / ratio);\n    context.restore();\n  };\n\n  Node.prototype._drawCachedHitCanvas = function (context) {\n    var canvasCache = this._getCanvasCache(),\n        hitCanvas = canvasCache.hit;\n\n    context.save();\n\n    context._applyGlobalCompositeOperation(this);\n\n    context.translate(canvasCache.x, canvasCache.y);\n    context.drawImage(hitCanvas._canvas, 0, 0);\n    context.restore();\n  };\n\n  Node.prototype._getCachedSceneCanvas = function () {\n    var filters = this.filters(),\n        cachedCanvas = this._getCanvasCache(),\n        sceneCanvas = cachedCanvas.scene,\n        filterCanvas = cachedCanvas.filter,\n        filterContext = filterCanvas.getContext(),\n        len,\n        imageData,\n        n,\n        filter;\n\n    if (filters) {\n      if (!this._filterUpToDate) {\n        var ratio = sceneCanvas.pixelRatio;\n\n        try {\n          len = filters.length;\n          filterContext.clear();\n          filterContext.drawImage(sceneCanvas._canvas, 0, 0, sceneCanvas.getWidth() / ratio, sceneCanvas.getHeight() / ratio);\n          imageData = filterContext.getImageData(0, 0, filterCanvas.getWidth(), filterCanvas.getHeight());\n\n          for (n = 0; n < len; n++) {\n            filter = filters[n];\n\n            if (typeof filter !== 'function') {\n              Util_1.Util.error('Filter should be type of function, but got ' + typeof filter + ' insted. Please check correct filters');\n              continue;\n            }\n\n            filter.call(this, imageData);\n            filterContext.putImageData(imageData, 0, 0);\n          }\n        } catch (e) {\n          Util_1.Util.error('Unable to apply filter. ' + e.message);\n        }\n\n        this._filterUpToDate = true;\n      }\n\n      return filterCanvas;\n    }\n\n    return sceneCanvas;\n  };\n\n  Node.prototype.on = function (evtStr, handler) {\n    if (arguments.length === 3) {\n      return this._delegate.apply(this, arguments);\n    }\n\n    var events = evtStr.split(SPACE),\n        len = events.length,\n        n,\n        event,\n        parts,\n        baseEvent,\n        name;\n\n    for (n = 0; n < len; n++) {\n      event = events[n];\n      parts = event.split('.');\n      baseEvent = parts[0];\n      name = parts[1] || '';\n\n      if (!this.eventListeners[baseEvent]) {\n        this.eventListeners[baseEvent] = [];\n      }\n\n      this.eventListeners[baseEvent].push({\n        name: name,\n        handler: handler\n      });\n    }\n\n    return this;\n  };\n\n  Node.prototype.off = function (evtStr, callback) {\n    var events = (evtStr || '').split(SPACE),\n        len = events.length,\n        n,\n        t,\n        event,\n        parts,\n        baseEvent,\n        name;\n\n    if (!evtStr) {\n      for (t in this.eventListeners) {\n        this._off(t);\n      }\n    }\n\n    for (n = 0; n < len; n++) {\n      event = events[n];\n      parts = event.split('.');\n      baseEvent = parts[0];\n      name = parts[1];\n\n      if (baseEvent) {\n        if (this.eventListeners[baseEvent]) {\n          this._off(baseEvent, name, callback);\n        }\n      } else {\n        for (t in this.eventListeners) {\n          this._off(t, name, callback);\n        }\n      }\n    }\n\n    return this;\n  };\n\n  Node.prototype.dispatchEvent = function (evt) {\n    var e = {\n      target: this,\n      type: evt.type,\n      evt: evt\n    };\n    this.fire(evt.type, e);\n    return this;\n  };\n\n  Node.prototype.addEventListener = function (type, handler) {\n    this.on(type, function (evt) {\n      handler.call(this, evt.evt);\n    });\n    return this;\n  };\n\n  Node.prototype.removeEventListener = function (type) {\n    this.off(type);\n    return this;\n  };\n\n  Node.prototype._delegate = function (event, selector, handler) {\n    var stopNode = this;\n    this.on(event, function (evt) {\n      var targets = evt.target.findAncestors(selector, true, stopNode);\n\n      for (var i = 0; i < targets.length; i++) {\n        evt = Util_1.Util.cloneObject(evt);\n        evt.currentTarget = targets[i];\n        handler.call(targets[i], evt);\n      }\n    });\n  };\n\n  Node.prototype.remove = function () {\n    if (DragAndDrop_1.DD.node && DragAndDrop_1.DD.node === this) {\n      this.stopDrag();\n    }\n\n    this._remove();\n\n    return this;\n  };\n\n  Node.prototype._remove = function () {\n    this._clearSelfAndDescendantCache(STAGE);\n\n    this._clearSelfAndDescendantCache(ABSOLUTE_TRANSFORM);\n\n    this._clearSelfAndDescendantCache(VISIBLE);\n\n    this._clearSelfAndDescendantCache(LISTENING);\n\n    this._clearSelfAndDescendantCache(ABSOLUTE_OPACITY);\n\n    var parent = this.getParent();\n\n    if (parent && parent.children) {\n      parent.children.splice(this.index, 1);\n\n      parent._setChildrenIndices();\n\n      this.parent = null;\n    }\n  };\n\n  Node.prototype.destroy = function () {\n    exports._removeId(this.id(), this);\n\n    var names = (this.name() || '').split(/\\s/g);\n\n    for (var i = 0; i < names.length; i++) {\n      var subname = names[i];\n\n      exports._removeName(subname, this._id);\n    }\n\n    this.remove();\n    return this;\n  };\n\n  Node.prototype.getAttr = function (attr) {\n    var method = 'get' + Util_1.Util._capitalize(attr);\n\n    if (Util_1.Util._isFunction(this[method])) {\n      return this[method]();\n    }\n\n    return this.attrs[attr];\n  };\n\n  Node.prototype.getAncestors = function () {\n    var parent = this.getParent(),\n        ancestors = new Util_1.Collection();\n\n    while (parent) {\n      ancestors.push(parent);\n      parent = parent.getParent();\n    }\n\n    return ancestors;\n  };\n\n  Node.prototype.getAttrs = function () {\n    return this.attrs || {};\n  };\n\n  Node.prototype.setAttrs = function (config) {\n    var key, method;\n\n    if (!config) {\n      return this;\n    }\n\n    for (key in config) {\n      if (key === CHILDREN) {\n        continue;\n      }\n\n      method = SET + Util_1.Util._capitalize(key);\n\n      if (Util_1.Util._isFunction(this[method])) {\n        this[method](config[key]);\n      } else {\n        this._setAttr(key, config[key]);\n      }\n    }\n\n    return this;\n  };\n\n  Node.prototype.isListening = function () {\n    return this._getCache(LISTENING, this._isListening);\n  };\n\n  Node.prototype._isListening = function () {\n    var listening = this.listening(),\n        parent = this.getParent();\n\n    if (listening === 'inherit') {\n      if (parent) {\n        return parent.isListening();\n      } else {\n        return true;\n      }\n    } else {\n      return listening;\n    }\n  };\n\n  Node.prototype.isVisible = function () {\n    return this._getCache(VISIBLE, this._isVisible);\n  };\n\n  Node.prototype._isVisible = function (relativeTo) {\n    var visible = this.visible(),\n        parent = this.getParent();\n\n    if (visible === 'inherit') {\n      if (parent && parent !== relativeTo) {\n        return parent._isVisible(relativeTo);\n      } else {\n        return true;\n      }\n    } else {\n      return visible;\n    }\n  };\n\n  Node.prototype.shouldDrawHit = function () {\n    var layer = this.getLayer();\n    return !layer && this.isListening() && this.isVisible() || layer && layer.hitGraphEnabled() && this.isListening() && this.isVisible();\n  };\n\n  Node.prototype.show = function () {\n    this.visible(true);\n    return this;\n  };\n\n  Node.prototype.hide = function () {\n    this.visible(false);\n    return this;\n  };\n\n  Node.prototype.getZIndex = function () {\n    return this.index || 0;\n  };\n\n  Node.prototype.getAbsoluteZIndex = function () {\n    var depth = this.getDepth(),\n        that = this,\n        index = 0,\n        nodes,\n        len,\n        n,\n        child;\n\n    function addChildren(children) {\n      nodes = [];\n      len = children.length;\n\n      for (n = 0; n < len; n++) {\n        child = children[n];\n        index++;\n\n        if (child.nodeType !== SHAPE) {\n          nodes = nodes.concat(child.getChildren().toArray());\n        }\n\n        if (child._id === that._id) {\n          n = len;\n        }\n      }\n\n      if (nodes.length > 0 && nodes[0].getDepth() <= depth) {\n        addChildren(nodes);\n      }\n    }\n\n    if (that.nodeType !== UPPER_STAGE) {\n      addChildren(that.getStage().getChildren());\n    }\n\n    return index;\n  };\n\n  Node.prototype.getDepth = function () {\n    var depth = 0,\n        parent = this.parent;\n\n    while (parent) {\n      depth++;\n      parent = parent.parent;\n    }\n\n    return depth;\n  };\n\n  Node.prototype.setPosition = function (pos) {\n    this.x(pos.x);\n    this.y(pos.y);\n    return this;\n  };\n\n  Node.prototype.getPosition = function () {\n    return {\n      x: this.x(),\n      y: this.y()\n    };\n  };\n\n  Node.prototype.getAbsolutePosition = function (top) {\n    var absoluteMatrix = this.getAbsoluteTransform(top).getMatrix(),\n        absoluteTransform = new Util_1.Transform(),\n        offset = this.offset();\n    absoluteTransform.m = absoluteMatrix.slice();\n    absoluteTransform.translate(offset.x, offset.y);\n    return absoluteTransform.getTranslation();\n  };\n\n  Node.prototype.setAbsolutePosition = function (pos) {\n    var origTrans = this._clearTransform(),\n        it;\n\n    this.attrs.x = origTrans.x;\n    this.attrs.y = origTrans.y;\n    delete origTrans.x;\n    delete origTrans.y;\n    it = this.getAbsoluteTransform();\n    it.invert();\n    it.translate(pos.x, pos.y);\n    pos = {\n      x: this.attrs.x + it.getTranslation().x,\n      y: this.attrs.y + it.getTranslation().y\n    };\n    this.setPosition({\n      x: pos.x,\n      y: pos.y\n    });\n\n    this._setTransform(origTrans);\n\n    return this;\n  };\n\n  Node.prototype._setTransform = function (trans) {\n    var key;\n\n    for (key in trans) {\n      this.attrs[key] = trans[key];\n    }\n\n    this._clearCache(TRANSFORM);\n\n    this._clearSelfAndDescendantCache(ABSOLUTE_TRANSFORM);\n  };\n\n  Node.prototype._clearTransform = function () {\n    var trans = {\n      x: this.x(),\n      y: this.y(),\n      rotation: this.rotation(),\n      scaleX: this.scaleX(),\n      scaleY: this.scaleY(),\n      offsetX: this.offsetX(),\n      offsetY: this.offsetY(),\n      skewX: this.skewX(),\n      skewY: this.skewY()\n    };\n    this.attrs.x = 0;\n    this.attrs.y = 0;\n    this.attrs.rotation = 0;\n    this.attrs.scaleX = 1;\n    this.attrs.scaleY = 1;\n    this.attrs.offsetX = 0;\n    this.attrs.offsetY = 0;\n    this.attrs.skewX = 0;\n    this.attrs.skewY = 0;\n\n    this._clearCache(TRANSFORM);\n\n    this._clearSelfAndDescendantCache(ABSOLUTE_TRANSFORM);\n\n    return trans;\n  };\n\n  Node.prototype.move = function (change) {\n    var changeX = change.x,\n        changeY = change.y,\n        x = this.x(),\n        y = this.y();\n\n    if (changeX !== undefined) {\n      x += changeX;\n    }\n\n    if (changeY !== undefined) {\n      y += changeY;\n    }\n\n    this.setPosition({\n      x: x,\n      y: y\n    });\n    return this;\n  };\n\n  Node.prototype._eachAncestorReverse = function (func, top) {\n    var family = [],\n        parent = this.getParent(),\n        len,\n        n;\n\n    if (top && top._id === this._id) {\n      func(this);\n      return;\n    }\n\n    family.unshift(this);\n\n    while (parent && (!top || parent._id !== top._id)) {\n      family.unshift(parent);\n      parent = parent.parent;\n    }\n\n    len = family.length;\n\n    for (n = 0; n < len; n++) {\n      func(family[n]);\n    }\n  };\n\n  Node.prototype.rotate = function (theta) {\n    this.rotation(this.rotation() + theta);\n    return this;\n  };\n\n  Node.prototype.moveToTop = function () {\n    if (!this.parent) {\n      Util_1.Util.warn('Node has no parent. moveToTop function is ignored.');\n      return false;\n    }\n\n    var index = this.index;\n    this.parent.children.splice(index, 1);\n    this.parent.children.push(this);\n\n    this.parent._setChildrenIndices();\n\n    return true;\n  };\n\n  Node.prototype.moveUp = function () {\n    if (!this.parent) {\n      Util_1.Util.warn('Node has no parent. moveUp function is ignored.');\n      return false;\n    }\n\n    var index = this.index,\n        len = this.parent.getChildren().length;\n\n    if (index < len - 1) {\n      this.parent.children.splice(index, 1);\n      this.parent.children.splice(index + 1, 0, this);\n\n      this.parent._setChildrenIndices();\n\n      return true;\n    }\n\n    return false;\n  };\n\n  Node.prototype.moveDown = function () {\n    if (!this.parent) {\n      Util_1.Util.warn('Node has no parent. moveDown function is ignored.');\n      return false;\n    }\n\n    var index = this.index;\n\n    if (index > 0) {\n      this.parent.children.splice(index, 1);\n      this.parent.children.splice(index - 1, 0, this);\n\n      this.parent._setChildrenIndices();\n\n      return true;\n    }\n\n    return false;\n  };\n\n  Node.prototype.moveToBottom = function () {\n    if (!this.parent) {\n      Util_1.Util.warn('Node has no parent. moveToBottom function is ignored.');\n      return false;\n    }\n\n    var index = this.index;\n\n    if (index > 0) {\n      this.parent.children.splice(index, 1);\n      this.parent.children.unshift(this);\n\n      this.parent._setChildrenIndices();\n\n      return true;\n    }\n\n    return false;\n  };\n\n  Node.prototype.setZIndex = function (zIndex) {\n    if (!this.parent) {\n      Util_1.Util.warn('Node has no parent. zIndex parameter is ignored.');\n      return this;\n    }\n\n    if (zIndex < 0 || zIndex >= this.parent.children.length) {\n      Util_1.Util.warn('Unexpected value ' + zIndex + ' for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to ' + (this.parent.children.length - 1) + '.');\n    }\n\n    var index = this.index;\n    this.parent.children.splice(index, 1);\n    this.parent.children.splice(zIndex, 0, this);\n\n    this.parent._setChildrenIndices();\n\n    return this;\n  };\n\n  Node.prototype.getAbsoluteOpacity = function () {\n    return this._getCache(ABSOLUTE_OPACITY, this._getAbsoluteOpacity);\n  };\n\n  Node.prototype._getAbsoluteOpacity = function () {\n    var absOpacity = this.opacity();\n    var parent = this.getParent();\n\n    if (parent && !parent._isUnderCache) {\n      absOpacity *= parent.getAbsoluteOpacity();\n    }\n\n    return absOpacity;\n  };\n\n  Node.prototype.moveTo = function (newContainer) {\n    if (this.getParent() !== newContainer) {\n      this._remove();\n\n      newContainer.add(this);\n    }\n\n    return this;\n  };\n\n  Node.prototype.toObject = function () {\n    var obj = {},\n        attrs = this.getAttrs(),\n        key,\n        val,\n        getter,\n        defaultValue,\n        nonPlainObject;\n    obj.attrs = {};\n\n    for (key in attrs) {\n      val = attrs[key];\n      nonPlainObject = Util_1.Util.isObject(val) && !Util_1.Util._isPlainObject(val) && !Util_1.Util._isArray(val);\n\n      if (nonPlainObject) {\n        continue;\n      }\n\n      getter = typeof this[key] === 'function' && this[key];\n      delete attrs[key];\n      defaultValue = getter ? getter.call(this) : null;\n      attrs[key] = val;\n\n      if (defaultValue !== val) {\n        obj.attrs[key] = val;\n      }\n    }\n\n    obj.className = this.getClassName();\n    return Util_1.Util._prepareToStringify(obj);\n  };\n\n  Node.prototype.toJSON = function () {\n    return JSON.stringify(this.toObject());\n  };\n\n  Node.prototype.getParent = function () {\n    return this.parent;\n  };\n\n  Node.prototype.findAncestors = function (selector, includeSelf, stopNode) {\n    var res = [];\n\n    if (includeSelf && this._isMatch(selector)) {\n      res.push(this);\n    }\n\n    var ancestor = this.parent;\n\n    while (ancestor) {\n      if (ancestor === stopNode) {\n        return res;\n      }\n\n      if (ancestor._isMatch(selector)) {\n        res.push(ancestor);\n      }\n\n      ancestor = ancestor.parent;\n    }\n\n    return res;\n  };\n\n  Node.prototype.isAncestorOf = function (node) {\n    return false;\n  };\n\n  Node.prototype.findAncestor = function (selector, includeSelf, stopNode) {\n    return this.findAncestors(selector, includeSelf, stopNode)[0];\n  };\n\n  Node.prototype._isMatch = function (selector) {\n    if (!selector) {\n      return false;\n    }\n\n    if (typeof selector === 'function') {\n      return selector(this);\n    }\n\n    var selectorArr = selector.replace(/ /g, '').split(','),\n        len = selectorArr.length,\n        n,\n        sel;\n\n    for (n = 0; n < len; n++) {\n      sel = selectorArr[n];\n\n      if (!Util_1.Util.isValidSelector(sel)) {\n        Util_1.Util.warn('Selector \"' + sel + '\" is invalid. Allowed selectors examples are \"#foo\", \".bar\" or \"Group\".');\n        Util_1.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like \"Triangle\".');\n        Util_1.Util.warn('Konva is awesome, right?');\n      }\n\n      if (sel.charAt(0) === '#') {\n        if (this.id() === sel.slice(1)) {\n          return true;\n        }\n      } else if (sel.charAt(0) === '.') {\n        if (this.hasName(sel.slice(1))) {\n          return true;\n        }\n      } else if (this.className === selector || this.nodeType === selector) {\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  Node.prototype.getLayer = function () {\n    var parent = this.getParent();\n    return parent ? parent.getLayer() : null;\n  };\n\n  Node.prototype.getStage = function () {\n    return this._getCache(STAGE, this._getStage);\n  };\n\n  Node.prototype._getStage = function () {\n    var parent = this.getParent();\n\n    if (parent) {\n      return parent.getStage();\n    } else {\n      return undefined;\n    }\n  };\n\n  Node.prototype.fire = function (eventType, evt, bubble) {\n    evt = evt || {};\n    evt.target = evt.target || this;\n\n    if (bubble) {\n      this._fireAndBubble(eventType, evt);\n    } else {\n      this._fire(eventType, evt);\n    }\n\n    return this;\n  };\n\n  Node.prototype.getAbsoluteTransform = function (top) {\n    if (top) {\n      return this._getAbsoluteTransform(top);\n    } else {\n      return this._getCache(ABSOLUTE_TRANSFORM, this._getAbsoluteTransform);\n    }\n  };\n\n  Node.prototype._getAbsoluteTransform = function (top) {\n    var at = new Util_1.Transform();\n\n    this._eachAncestorReverse(function (node) {\n      var transformsEnabled = node.getTransformsEnabled();\n\n      if (transformsEnabled === 'all') {\n        at.multiply(node.getTransform());\n      } else if (transformsEnabled === 'position') {\n        at.translate(node.getX() - node.getOffsetX(), node.getY() - node.getOffsetY());\n      }\n    }, top);\n\n    return at;\n  };\n\n  Node.prototype.getAbsoluteScale = function (top) {\n    if (top) {\n      return this._getAbsoluteScale(top);\n    } else {\n      return this._getCache(ABSOLUTE_SCALE, this._getAbsoluteScale);\n    }\n  };\n\n  Node.prototype._getAbsoluteScale = function (top) {\n    var parent = this;\n\n    while (parent) {\n      if (parent._isUnderCache) {\n        top = parent;\n      }\n\n      parent = parent.getParent();\n    }\n\n    var scaleX = 1,\n        scaleY = 1;\n\n    this._eachAncestorReverse(function (node) {\n      scaleX *= node.scaleX();\n      scaleY *= node.scaleY();\n    }, top);\n\n    return {\n      x: scaleX,\n      y: scaleY\n    };\n  };\n\n  Node.prototype.getTransform = function () {\n    return this._getCache(TRANSFORM, this._getTransform);\n  };\n\n  Node.prototype._getTransform = function () {\n    var m = new Util_1.Transform(),\n        x = this.x(),\n        y = this.y(),\n        rotation = Global_1.Konva.getAngle(this.rotation()),\n        scaleX = this.scaleX(),\n        scaleY = this.scaleY(),\n        skewX = this.skewX(),\n        skewY = this.skewY(),\n        offsetX = this.offsetX(),\n        offsetY = this.offsetY();\n\n    if (x !== 0 || y !== 0) {\n      m.translate(x, y);\n    }\n\n    if (rotation !== 0) {\n      m.rotate(rotation);\n    }\n\n    if (skewX !== 0 || skewY !== 0) {\n      m.skew(skewX, skewY);\n    }\n\n    if (scaleX !== 1 || scaleY !== 1) {\n      m.scale(scaleX, scaleY);\n    }\n\n    if (offsetX !== 0 || offsetY !== 0) {\n      m.translate(-1 * offsetX, -1 * offsetY);\n    }\n\n    return m;\n  };\n\n  Node.prototype.clone = function (obj) {\n    var attrs = Util_1.Util.cloneObject(this.attrs),\n        key,\n        allListeners,\n        len,\n        n,\n        listener;\n\n    for (var i in CLONE_BLACK_LIST) {\n      var blockAttr = CLONE_BLACK_LIST[i];\n      delete attrs[blockAttr];\n    }\n\n    for (key in obj) {\n      attrs[key] = obj[key];\n    }\n\n    var node = new this.constructor(attrs);\n\n    for (key in this.eventListeners) {\n      allListeners = this.eventListeners[key];\n      len = allListeners.length;\n\n      for (n = 0; n < len; n++) {\n        listener = allListeners[n];\n\n        if (listener.name.indexOf(KONVA) < 0) {\n          if (!node.eventListeners[key]) {\n            node.eventListeners[key] = [];\n          }\n\n          node.eventListeners[key].push(listener);\n        }\n      }\n    }\n\n    return node;\n  };\n\n  Node.prototype._toKonvaCanvas = function (config) {\n    config = config || {};\n    var box = this.getClientRect();\n    var stage = this.getStage(),\n        x = config.x !== undefined ? config.x : box.x,\n        y = config.y !== undefined ? config.y : box.y,\n        pixelRatio = config.pixelRatio || 1,\n        canvas = new Canvas_1.SceneCanvas({\n      width: config.width || box.width || (stage ? stage.getWidth() : 0),\n      height: config.height || box.height || (stage ? stage.getHeight() : 0),\n      pixelRatio: pixelRatio\n    }),\n        context = canvas.getContext();\n    context.save();\n\n    if (x || y) {\n      context.translate(-1 * x, -1 * y);\n    }\n\n    this.drawScene(canvas);\n    context.restore();\n    return canvas;\n  };\n\n  Node.prototype.toCanvas = function (config) {\n    return this._toKonvaCanvas(config)._canvas;\n  };\n\n  Node.prototype.toDataURL = function (config) {\n    config = config || {};\n    var mimeType = config.mimeType || null,\n        quality = config.quality || null;\n\n    var url = this._toKonvaCanvas(config).toDataURL(mimeType, quality);\n\n    if (config.callback) {\n      config.callback(url);\n    }\n\n    return url;\n  };\n\n  Node.prototype.toImage = function (config) {\n    if (!config || !config.callback) {\n      throw 'callback required for toImage method config argument';\n    }\n\n    var callback = config.callback;\n    delete config.callback;\n\n    Util_1.Util._urlToImage(this.toDataURL(config), function (img) {\n      callback(img);\n    });\n  };\n\n  Node.prototype.setSize = function (size) {\n    this.width(size.width);\n    this.height(size.height);\n    return this;\n  };\n\n  Node.prototype.getSize = function () {\n    return {\n      width: this.width(),\n      height: this.height()\n    };\n  };\n\n  Node.prototype.getClassName = function () {\n    return this.className || this.nodeType;\n  };\n\n  Node.prototype.getType = function () {\n    return this.nodeType;\n  };\n\n  Node.prototype.getDragDistance = function () {\n    if (this.attrs.dragDistance !== undefined) {\n      return this.attrs.dragDistance;\n    } else if (this.parent) {\n      return this.parent.getDragDistance();\n    } else {\n      return Global_1.Konva.dragDistance;\n    }\n  };\n\n  Node.prototype._off = function (type, name, callback) {\n    var evtListeners = this.eventListeners[type],\n        i,\n        evtName,\n        handler;\n\n    for (i = 0; i < evtListeners.length; i++) {\n      evtName = evtListeners[i].name;\n      handler = evtListeners[i].handler;\n\n      if ((evtName !== 'konva' || name === 'konva') && (!name || evtName === name) && (!callback || callback === handler)) {\n        evtListeners.splice(i, 1);\n\n        if (evtListeners.length === 0) {\n          delete this.eventListeners[type];\n          break;\n        }\n\n        i--;\n      }\n    }\n  };\n\n  Node.prototype._fireChangeEvent = function (attr, oldVal, newVal) {\n    this._fire(attr + CHANGE, {\n      oldVal: oldVal,\n      newVal: newVal\n    });\n  };\n\n  Node.prototype.setId = function (id) {\n    var oldId = this.id();\n\n    exports._removeId(oldId, this);\n\n    _addId(this, id);\n\n    this._setAttr('id', id);\n\n    return this;\n  };\n\n  Node.prototype.setName = function (name) {\n    var oldNames = (this.name() || '').split(/\\s/g);\n    var newNames = (name || '').split(/\\s/g);\n    var subname, i;\n\n    for (i = 0; i < oldNames.length; i++) {\n      subname = oldNames[i];\n\n      if (newNames.indexOf(subname) === -1 && subname) {\n        exports._removeName(subname, this._id);\n      }\n    }\n\n    for (i = 0; i < newNames.length; i++) {\n      subname = newNames[i];\n\n      if (oldNames.indexOf(subname) === -1 && subname) {\n        exports._addName(this, subname);\n      }\n    }\n\n    this._setAttr(NAME, name);\n\n    return this;\n  };\n\n  Node.prototype.addName = function (name) {\n    if (!this.hasName(name)) {\n      var oldName = this.name();\n      var newName = oldName ? oldName + ' ' + name : name;\n      this.setName(newName);\n    }\n\n    return this;\n  };\n\n  Node.prototype.hasName = function (name) {\n    if (!name) {\n      return false;\n    }\n\n    var fullName = this.name();\n\n    if (!fullName) {\n      return false;\n    }\n\n    var names = (fullName || '').split(/\\s/g);\n    return names.indexOf(name) !== -1;\n  };\n\n  Node.prototype.removeName = function (name) {\n    var names = (this.name() || '').split(/\\s/g);\n    var index = names.indexOf(name);\n\n    if (index !== -1) {\n      names.splice(index, 1);\n      this.setName(names.join(' '));\n    }\n\n    return this;\n  };\n\n  Node.prototype.setAttr = function (attr, val) {\n    var func = this[SET + Util_1.Util._capitalize(attr)];\n\n    if (Util_1.Util._isFunction(func)) {\n      func.call(this, val);\n    } else {\n      this._setAttr(attr, val);\n    }\n\n    return this;\n  };\n\n  Node.prototype._setAttr = function (key, val) {\n    var oldVal = this.attrs[key];\n\n    if (oldVal === val && !Util_1.Util.isObject(val)) {\n      return;\n    }\n\n    if (val === undefined || val === null) {\n      delete this.attrs[key];\n    } else {\n      this.attrs[key] = val;\n    }\n\n    this._fireChangeEvent(key, oldVal, val);\n  };\n\n  Node.prototype._setComponentAttr = function (key, component, val) {\n    var oldVal;\n\n    if (val !== undefined) {\n      oldVal = this.attrs[key];\n\n      if (!oldVal) {\n        this.attrs[key] = this.getAttr(key);\n      }\n\n      this.attrs[key][component] = val;\n\n      this._fireChangeEvent(key, oldVal, val);\n    }\n  };\n\n  Node.prototype._fireAndBubble = function (eventType, evt, compareShape) {\n    if (evt && this.nodeType === SHAPE) {\n      evt.target = this;\n    }\n\n    var shouldStop = (eventType === MOUSEENTER || eventType === MOUSELEAVE) && (compareShape && (this === compareShape || this.isAncestorOf && this.isAncestorOf(compareShape)) || this.nodeType === 'Stage' && !compareShape);\n\n    if (!shouldStop) {\n      this._fire(eventType, evt);\n\n      var stopBubble = (eventType === MOUSEENTER || eventType === MOUSELEAVE) && compareShape && compareShape.isAncestorOf && compareShape.isAncestorOf(this) && !compareShape.isAncestorOf(this.parent);\n\n      if ((evt && !evt.cancelBubble || !evt) && this.parent && this.parent.isListening() && !stopBubble) {\n        if (compareShape && compareShape.parent) {\n          this._fireAndBubble.call(this.parent, eventType, evt, compareShape.parent);\n        } else {\n          this._fireAndBubble.call(this.parent, eventType, evt);\n        }\n      }\n    }\n  };\n\n  Node.prototype._fire = function (eventType, evt) {\n    var events = this.eventListeners[eventType],\n        i;\n\n    if (events) {\n      evt = evt || {};\n      evt.currentTarget = this;\n      evt.type = eventType;\n\n      for (i = 0; i < events.length; i++) {\n        events[i].handler.call(this, evt);\n      }\n    }\n  };\n\n  Node.prototype.draw = function () {\n    this.drawScene();\n    this.drawHit();\n    return this;\n  };\n\n  Node.prototype.startDrag = function () {\n    var stage = this.getStage(),\n        layer = this.getLayer(),\n        pos = stage.getPointerPosition(),\n        ap = this.getAbsolutePosition();\n\n    if (pos) {\n      if (DragAndDrop_1.DD.node) {\n        DragAndDrop_1.DD.node.stopDrag();\n      }\n\n      DragAndDrop_1.DD.node = this;\n      DragAndDrop_1.DD.startPointerPos = pos;\n      DragAndDrop_1.DD.offset.x = pos.x - ap.x;\n      DragAndDrop_1.DD.offset.y = pos.y - ap.y;\n      DragAndDrop_1.DD.anim.setLayers(layer || this['getLayers']());\n      DragAndDrop_1.DD.anim.start();\n\n      this._setDragPosition();\n    }\n  };\n\n  Node.prototype._setDragPosition = function (evt) {\n    var pos = this.getStage().getPointerPosition(),\n        dbf = this.dragBoundFunc();\n\n    if (!pos) {\n      return;\n    }\n\n    var newNodePos = {\n      x: pos.x - DragAndDrop_1.DD.offset.x,\n      y: pos.y - DragAndDrop_1.DD.offset.y\n    };\n\n    if (dbf !== undefined) {\n      newNodePos = dbf.call(this, newNodePos, evt);\n    }\n\n    this.setAbsolutePosition(newNodePos);\n\n    if (!this._lastPos || this._lastPos.x !== newNodePos.x || this._lastPos.y !== newNodePos.y) {\n      DragAndDrop_1.DD.anim['dirty'] = true;\n    }\n\n    this._lastPos = newNodePos;\n  };\n\n  Node.prototype.stopDrag = function () {\n    var evt = {};\n\n    DragAndDrop_1.DD._endDragBefore(evt);\n\n    DragAndDrop_1.DD._endDragAfter(evt);\n  };\n\n  Node.prototype.setDraggable = function (draggable) {\n    this._setAttr('draggable', draggable);\n\n    this._dragChange();\n  };\n\n  Node.prototype.isDragging = function () {\n    return !!(DragAndDrop_1.DD.node && DragAndDrop_1.DD.node === this && DragAndDrop_1.DD.isDragging);\n  };\n\n  Node.prototype._listenDrag = function () {\n    this._dragCleanup();\n\n    this.on('mousedown.konva touchstart.konva', function (evt) {\n      var shouldCheckButton = evt.evt['button'] !== undefined;\n      var canDrag = !shouldCheckButton || Global_1.Konva.dragButtons.indexOf(evt.evt['button']) >= 0;\n\n      if (!canDrag) {\n        return;\n      }\n\n      if (!DragAndDrop_1.DD.node) {\n        this.startDrag();\n      }\n    });\n  };\n\n  Node.prototype._dragChange = function () {\n    if (this.attrs.draggable) {\n      this._listenDrag();\n    } else {\n      this._dragCleanup();\n\n      var stage = this.getStage();\n      var dd = DragAndDrop_1.DD;\n\n      if (stage && dd.node && dd.node._id === this._id) {\n        dd.node.stopDrag();\n      }\n    }\n  };\n\n  Node.prototype._dragCleanup = function () {\n    this.off('mousedown.konva');\n    this.off('touchstart.konva');\n  };\n\n  Node.create = function (data, container) {\n    if (Util_1.Util._isString(data)) {\n      data = JSON.parse(data);\n    }\n\n    return this._createNode(data, container);\n  };\n\n  Node._createNode = function (obj, container) {\n    var className = Node.prototype.getClassName.call(obj),\n        children = obj.children,\n        no,\n        len,\n        n;\n\n    if (container) {\n      obj.attrs.container = container;\n    }\n\n    if (!Global_1._NODES_REGISTRY[className]) {\n      Util_1.Util.warn('Can not find a node with class name \"' + className + '\". Fallback to \"Shape\".');\n      className = 'Shape';\n    }\n\n    var Class = Global_1._NODES_REGISTRY[className];\n    no = new Class(obj.attrs);\n\n    if (children) {\n      len = children.length;\n\n      for (n = 0; n < len; n++) {\n        no.add(Node._createNode(children[n]));\n      }\n    }\n\n    return no;\n  };\n\n  return Node;\n}();\n\nexports.Node = Node;\nNode.prototype.nodeType = 'Node';\nNode.prototype._attrsAffectingSize = [];\nFactory_1.Factory.addGetterSetter(Node, 'zIndex');\nFactory_1.Factory.addGetterSetter(Node, 'absolutePosition');\nFactory_1.Factory.addGetterSetter(Node, 'position');\nFactory_1.Factory.addGetterSetter(Node, 'x', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Node, 'y', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Node, 'globalCompositeOperation', 'source-over', Validators_1.getStringValidator());\nFactory_1.Factory.addGetterSetter(Node, 'opacity', 1, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Node, 'name', '', Validators_1.getStringValidator());\nFactory_1.Factory.addGetterSetter(Node, 'id', '', Validators_1.getStringValidator());\nFactory_1.Factory.addGetterSetter(Node, 'rotation', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addComponentsGetterSetter(Node, 'scale', ['x', 'y']);\nFactory_1.Factory.addGetterSetter(Node, 'scaleX', 1, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Node, 'scaleY', 1, Validators_1.getNumberValidator());\nFactory_1.Factory.addComponentsGetterSetter(Node, 'skew', ['x', 'y']);\nFactory_1.Factory.addGetterSetter(Node, 'skewX', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Node, 'skewY', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addComponentsGetterSetter(Node, 'offset', ['x', 'y']);\nFactory_1.Factory.addGetterSetter(Node, 'offsetX', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Node, 'offsetY', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Node, 'dragDistance', null, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Node, 'width', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Node, 'height', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Node, 'listening', 'inherit', function (val) {\n  var isValid = val === true || val === false || val === 'inherit';\n\n  if (!isValid) {\n    Util_1.Util.warn(val + ' is a not valid value for \"listening\" attribute. The value may be true, false or \"inherit\".');\n  }\n\n  return val;\n});\nFactory_1.Factory.addGetterSetter(Node, 'preventDefault', true, Validators_1.getBooleanValidator());\nFactory_1.Factory.addGetterSetter(Node, 'filters', null, function (val) {\n  this._filterUpToDate = false;\n  return val;\n});\nFactory_1.Factory.addGetterSetter(Node, 'visible', 'inherit', function (val) {\n  var isValid = val === true || val === false || val === 'inherit';\n\n  if (!isValid) {\n    Util_1.Util.warn(val + ' is a not valid value for \"visible\" attribute. The value may be true, false or \"inherit\".');\n  }\n\n  return val;\n});\nFactory_1.Factory.addGetterSetter(Node, 'transformsEnabled', 'all', Validators_1.getStringValidator());\nFactory_1.Factory.addGetterSetter(Node, 'size');\nFactory_1.Factory.addGetterSetter(Node, 'dragBoundFunc');\nFactory_1.Factory.addGetterSetter(Node, 'draggable', false, Validators_1.getBooleanValidator());\nFactory_1.Factory.backCompat(Node, {\n  rotateDeg: 'rotate',\n  setRotationDeg: 'setRotation',\n  getRotationDeg: 'getRotation'\n});\nUtil_1.Collection.mapMethods(Node);","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar Captures = new Map();\n\nfunction getCapturedShape(pointerId) {\n  return Captures.get(pointerId);\n}\n\nexports.getCapturedShape = getCapturedShape;\n\nfunction createEvent(evt) {\n  return {\n    evt: evt,\n    pointerId: evt.pointerId\n  };\n}\n\nexports.createEvent = createEvent;\n\nfunction hasPointerCapture(pointerId, shape) {\n  return Captures.get(pointerId) === shape;\n}\n\nexports.hasPointerCapture = hasPointerCapture;\n\nfunction setPointerCapture(pointerId, shape) {\n  releaseCapture(pointerId);\n  var stage = shape.getStage();\n  if (!stage) return;\n  Captures.set(pointerId, shape);\n\n  shape._fire('gotpointercapture', createEvent(new PointerEvent('gotpointercapture')));\n}\n\nexports.setPointerCapture = setPointerCapture;\n\nfunction releaseCapture(pointerId, target) {\n  var shape = Captures.get(pointerId);\n  if (!shape) return;\n  var stage = shape.getStage();\n\n  if (stage && stage.content) {\n    stage.content.releasePointerCapture(pointerId);\n  }\n\n  Captures.delete(pointerId);\n\n  shape._fire('lostpointercapture', createEvent(new PointerEvent('lostpointercapture')));\n}\n\nexports.releaseCapture = releaseCapture;","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Util_1 = require(\"./Util\");\n\nvar Factory_1 = require(\"./Factory\");\n\nvar Node_1 = require(\"./Node\");\n\nvar Validators_1 = require(\"./Validators\");\n\nvar Global_1 = require(\"./Global\");\n\nvar PointerEvents = require(\"./PointerEvents\");\n\nvar HAS_SHADOW = 'hasShadow';\nvar SHADOW_RGBA = 'shadowRGBA';\nvar patternImage = 'patternImage';\nvar linearGradient = 'linearGradient';\nvar radialGradient = 'radialGradient';\nvar dummyContext;\n\nfunction getDummyContext() {\n  if (dummyContext) {\n    return dummyContext;\n  }\n\n  dummyContext = Util_1.Util.createCanvasElement().getContext('2d');\n  return dummyContext;\n}\n\nexports.shapes = {};\n\nfunction _fillFunc(context) {\n  context.fill();\n}\n\nfunction _strokeFunc(context) {\n  context.stroke();\n}\n\nfunction _fillFuncHit(context) {\n  context.fill();\n}\n\nfunction _strokeFuncHit(context) {\n  context.stroke();\n}\n\nfunction _clearHasShadowCache() {\n  this._clearCache(HAS_SHADOW);\n}\n\nfunction _clearGetShadowRGBACache() {\n  this._clearCache(SHADOW_RGBA);\n}\n\nfunction _clearFillPatternCache() {\n  this._clearCache(patternImage);\n}\n\nfunction _clearLinearGradientCache() {\n  this._clearCache(linearGradient);\n}\n\nfunction _clearRadialGradientCache() {\n  this._clearCache(radialGradient);\n}\n\nvar Shape = function (_super) {\n  __extends(Shape, _super);\n\n  function Shape(config) {\n    var _this = _super.call(this, config) || this;\n\n    var key;\n\n    while (true) {\n      key = Util_1.Util.getRandomColor();\n\n      if (key && !(key in exports.shapes)) {\n        break;\n      }\n    }\n\n    _this.colorKey = key;\n    exports.shapes[key] = _this;\n\n    _this.on('shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva', _clearHasShadowCache);\n\n    _this.on('shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva', _clearGetShadowRGBACache);\n\n    _this.on('fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva', _clearFillPatternCache);\n\n    _this.on('fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva', _clearLinearGradientCache);\n\n    _this.on('fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva', _clearRadialGradientCache);\n\n    return _this;\n  }\n\n  Shape.prototype.getContext = function () {\n    return this.getLayer().getContext();\n  };\n\n  Shape.prototype.getCanvas = function () {\n    return this.getLayer().getCanvas();\n  };\n\n  Shape.prototype.getSceneFunc = function () {\n    return this.attrs.sceneFunc || this['_sceneFunc'];\n  };\n\n  Shape.prototype.getHitFunc = function () {\n    return this.attrs.hitFunc || this['_hitFunc'];\n  };\n\n  Shape.prototype.hasShadow = function () {\n    return this._getCache(HAS_SHADOW, this._hasShadow);\n  };\n\n  Shape.prototype._hasShadow = function () {\n    return this.shadowEnabled() && this.shadowOpacity() !== 0 && !!(this.shadowColor() || this.shadowBlur() || this.shadowOffsetX() || this.shadowOffsetY());\n  };\n\n  Shape.prototype._getFillPattern = function () {\n    return this._getCache(patternImage, this.__getFillPattern);\n  };\n\n  Shape.prototype.__getFillPattern = function () {\n    if (this.fillPatternImage()) {\n      var ctx = getDummyContext();\n      return ctx.createPattern(this.fillPatternImage(), this.fillPatternRepeat() || 'repeat');\n    }\n  };\n\n  Shape.prototype._getLinearGradient = function () {\n    return this._getCache(linearGradient, this.__getLinearGradient);\n  };\n\n  Shape.prototype.__getLinearGradient = function () {\n    var colorStops = this.fillLinearGradientColorStops();\n\n    if (colorStops) {\n      var ctx = getDummyContext();\n      var start = this.fillLinearGradientStartPoint();\n      var end = this.fillLinearGradientEndPoint();\n      var grd = ctx.createLinearGradient(start.x, start.y, end.x, end.y);\n\n      for (var n = 0; n < colorStops.length; n += 2) {\n        grd.addColorStop(colorStops[n], colorStops[n + 1]);\n      }\n\n      return grd;\n    }\n  };\n\n  Shape.prototype._getRadialGradient = function () {\n    return this._getCache(radialGradient, this.__getRadialGradient);\n  };\n\n  Shape.prototype.__getRadialGradient = function () {\n    var colorStops = this.fillRadialGradientColorStops();\n\n    if (colorStops) {\n      var ctx = getDummyContext();\n      var start = this.fillRadialGradientStartPoint();\n      var end = this.fillRadialGradientEndPoint();\n      var grd = ctx.createRadialGradient(start.x, start.y, this.fillRadialGradientStartRadius(), end.x, end.y, this.fillRadialGradientEndRadius());\n\n      for (var n = 0; n < colorStops.length; n += 2) {\n        grd.addColorStop(colorStops[n], colorStops[n + 1]);\n      }\n\n      return grd;\n    }\n  };\n\n  Shape.prototype.getShadowRGBA = function () {\n    return this._getCache(SHADOW_RGBA, this._getShadowRGBA);\n  };\n\n  Shape.prototype._getShadowRGBA = function () {\n    if (this.hasShadow()) {\n      var rgba = Util_1.Util.colorToRGBA(this.shadowColor());\n      return 'rgba(' + rgba.r + ',' + rgba.g + ',' + rgba.b + ',' + rgba.a * (this.shadowOpacity() || 1) + ')';\n    }\n  };\n\n  Shape.prototype.hasFill = function () {\n    return !!(this.fill() || this.fillPatternImage() || this.fillLinearGradientColorStops() || this.fillRadialGradientColorStops());\n  };\n\n  Shape.prototype.hasStroke = function () {\n    return this.strokeEnabled() && this.strokeWidth() && !!(this.stroke() || this.strokeLinearGradientColorStops());\n  };\n\n  Shape.prototype.intersects = function (point) {\n    var stage = this.getStage(),\n        bufferHitCanvas = stage.bufferHitCanvas,\n        p;\n    bufferHitCanvas.getContext().clear();\n    this.drawHit(bufferHitCanvas);\n    p = bufferHitCanvas.context.getImageData(Math.round(point.x), Math.round(point.y), 1, 1).data;\n    return p[3] > 0;\n  };\n\n  Shape.prototype.destroy = function () {\n    Node_1.Node.prototype.destroy.call(this);\n    delete exports.shapes[this.colorKey];\n    delete this.colorKey;\n    return this;\n  };\n\n  Shape.prototype._useBufferCanvas = function (caching) {\n    return !!((!caching || this.hasShadow()) && this.perfectDrawEnabled() && this.getAbsoluteOpacity() !== 1 && this.hasFill() && this.hasStroke() && this.getStage());\n  };\n\n  Shape.prototype.setStrokeHitEnabled = function (val) {\n    if (val) {\n      this.hitStrokeWidth('auto');\n    } else {\n      this.hitStrokeWidth(0);\n    }\n  };\n\n  Shape.prototype.getStrokeHitEnabled = function () {\n    if (this.hitStrokeWidth() === 0) {\n      return false;\n    } else {\n      return true;\n    }\n  };\n\n  Shape.prototype.getSelfRect = function () {\n    var size = this.size();\n    return {\n      x: this._centroid ? Math.round(-size.width / 2) : 0,\n      y: this._centroid ? Math.round(-size.height / 2) : 0,\n      width: size.width,\n      height: size.height\n    };\n  };\n\n  Shape.prototype.getClientRect = function (attrs) {\n    attrs = attrs || {};\n    var skipTransform = attrs.skipTransform;\n    var relativeTo = attrs.relativeTo;\n    var fillRect = this.getSelfRect();\n    var applyStroke = !attrs.skipStroke && this.hasStroke();\n    var strokeWidth = applyStroke && this.strokeWidth() || 0;\n    var fillAndStrokeWidth = fillRect.width + strokeWidth;\n    var fillAndStrokeHeight = fillRect.height + strokeWidth;\n    var applyShadow = !attrs.skipShadow && this.hasShadow();\n    var shadowOffsetX = applyShadow ? this.shadowOffsetX() : 0;\n    var shadowOffsetY = applyShadow ? this.shadowOffsetY() : 0;\n    var preWidth = fillAndStrokeWidth + Math.abs(shadowOffsetX);\n    var preHeight = fillAndStrokeHeight + Math.abs(shadowOffsetY);\n    var blurRadius = applyShadow && this.shadowBlur() || 0;\n    var width = preWidth + blurRadius * 2;\n    var height = preHeight + blurRadius * 2;\n    var roundingOffset = 0;\n\n    if (Math.round(strokeWidth / 2) !== strokeWidth / 2) {\n      roundingOffset = 1;\n    }\n\n    var rect = {\n      width: width + roundingOffset,\n      height: height + roundingOffset,\n      x: -Math.round(strokeWidth / 2 + blurRadius) + Math.min(shadowOffsetX, 0) + fillRect.x,\n      y: -Math.round(strokeWidth / 2 + blurRadius) + Math.min(shadowOffsetY, 0) + fillRect.y\n    };\n\n    if (!skipTransform) {\n      return this._transformedRect(rect, relativeTo);\n    }\n\n    return rect;\n  };\n\n  Shape.prototype.drawScene = function (can, top, caching, skipBuffer) {\n    var layer = this.getLayer(),\n        canvas = can || layer.getCanvas(),\n        context = canvas.getContext(),\n        cachedCanvas = this._getCanvasCache(),\n        drawFunc = this.sceneFunc(),\n        hasShadow = this.hasShadow(),\n        hasStroke = this.hasStroke(),\n        stage,\n        bufferCanvas,\n        bufferContext;\n\n    if (!this.isVisible() && !caching) {\n      return this;\n    }\n\n    if (cachedCanvas) {\n      context.save();\n\n      layer._applyTransform(this, context, top);\n\n      this._drawCachedSceneCanvas(context);\n\n      context.restore();\n      return this;\n    }\n\n    if (!drawFunc) {\n      return this;\n    }\n\n    context.save();\n\n    if (this._useBufferCanvas(caching) && !skipBuffer) {\n      stage = this.getStage();\n      bufferCanvas = stage.bufferCanvas;\n      bufferContext = bufferCanvas.getContext();\n      bufferContext.clear();\n      bufferContext.save();\n\n      bufferContext._applyLineJoin(this);\n\n      if (!caching) {\n        if (layer) {\n          layer._applyTransform(this, bufferContext, top);\n        } else {\n          var m = this.getAbsoluteTransform(top).getMatrix();\n          context.transform(m[0], m[1], m[2], m[3], m[4], m[5]);\n        }\n      }\n\n      drawFunc.call(this, bufferContext, this);\n      bufferContext.restore();\n      var ratio = bufferCanvas.pixelRatio;\n\n      if (hasShadow && !canvas.hitCanvas) {\n        context.save();\n\n        context._applyShadow(this);\n\n        context._applyOpacity(this);\n\n        context._applyGlobalCompositeOperation(this);\n\n        context.drawImage(bufferCanvas._canvas, 0, 0, bufferCanvas.width / ratio, bufferCanvas.height / ratio);\n        context.restore();\n      } else {\n        context._applyOpacity(this);\n\n        context._applyGlobalCompositeOperation(this);\n\n        context.drawImage(bufferCanvas._canvas, 0, 0, bufferCanvas.width / ratio, bufferCanvas.height / ratio);\n      }\n    } else {\n      context._applyLineJoin(this);\n\n      if (!caching) {\n        if (layer) {\n          layer._applyTransform(this, context, top);\n        } else {\n          var o = this.getAbsoluteTransform(top).getMatrix();\n          context.transform(o[0], o[1], o[2], o[3], o[4], o[5]);\n        }\n      }\n\n      if (hasShadow && hasStroke && !canvas.hitCanvas) {\n        context.save();\n\n        if (!caching) {\n          context._applyOpacity(this);\n\n          context._applyGlobalCompositeOperation(this);\n        }\n\n        context._applyShadow(this);\n\n        drawFunc.call(this, context, this);\n        context.restore();\n\n        if (this.hasFill() && this.shadowForStrokeEnabled()) {\n          drawFunc.call(this, context, this);\n        }\n      } else if (hasShadow && !canvas.hitCanvas) {\n        context.save();\n\n        if (!caching) {\n          context._applyOpacity(this);\n\n          context._applyGlobalCompositeOperation(this);\n        }\n\n        context._applyShadow(this);\n\n        drawFunc.call(this, context, this);\n        context.restore();\n      } else {\n        if (!caching) {\n          context._applyOpacity(this);\n\n          context._applyGlobalCompositeOperation(this);\n        }\n\n        drawFunc.call(this, context, this);\n      }\n    }\n\n    context.restore();\n    return this;\n  };\n\n  Shape.prototype.drawHit = function (can, top, caching) {\n    var layer = this.getLayer(),\n        canvas = can || layer.hitCanvas,\n        context = canvas && canvas.getContext(),\n        drawFunc = this.hitFunc() || this.sceneFunc(),\n        cachedCanvas = this._getCanvasCache(),\n        cachedHitCanvas = cachedCanvas && cachedCanvas.hit;\n\n    if (!this.colorKey) {\n      Util_1.Util.warn('Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. See the shape in logs above. If you want to reuse shape you should call remove() instead of destroy()');\n    }\n\n    if (!this.shouldDrawHit() && !caching) {\n      return this;\n    }\n\n    if (cachedHitCanvas) {\n      context.save();\n\n      layer._applyTransform(this, context, top);\n\n      this._drawCachedHitCanvas(context);\n\n      context.restore();\n      return this;\n    }\n\n    if (!drawFunc) {\n      return this;\n    }\n\n    context.save();\n\n    context._applyLineJoin(this);\n\n    if (!caching) {\n      if (layer) {\n        layer._applyTransform(this, context, top);\n      } else {\n        var o = this.getAbsoluteTransform(top).getMatrix();\n        context.transform(o[0], o[1], o[2], o[3], o[4], o[5]);\n      }\n    }\n\n    drawFunc.call(this, context, this);\n    context.restore();\n    return this;\n  };\n\n  Shape.prototype.drawHitFromCache = function (alphaThreshold) {\n    if (alphaThreshold === void 0) {\n      alphaThreshold = 0;\n    }\n\n    var cachedCanvas = this._getCanvasCache(),\n        sceneCanvas = this._getCachedSceneCanvas(),\n        hitCanvas = cachedCanvas.hit,\n        hitContext = hitCanvas.getContext(),\n        hitWidth = hitCanvas.getWidth(),\n        hitHeight = hitCanvas.getHeight(),\n        hitImageData,\n        hitData,\n        len,\n        rgbColorKey,\n        i,\n        alpha;\n\n    hitContext.clear();\n    hitContext.drawImage(sceneCanvas._canvas, 0, 0, hitWidth, hitHeight);\n\n    try {\n      hitImageData = hitContext.getImageData(0, 0, hitWidth, hitHeight);\n      hitData = hitImageData.data;\n      len = hitData.length;\n      rgbColorKey = Util_1.Util._hexToRgb(this.colorKey);\n\n      for (i = 0; i < len; i += 4) {\n        alpha = hitData[i + 3];\n\n        if (alpha > alphaThreshold) {\n          hitData[i] = rgbColorKey.r;\n          hitData[i + 1] = rgbColorKey.g;\n          hitData[i + 2] = rgbColorKey.b;\n          hitData[i + 3] = 255;\n        } else {\n          hitData[i + 3] = 0;\n        }\n      }\n\n      hitContext.putImageData(hitImageData, 0, 0);\n    } catch (e) {\n      Util_1.Util.error('Unable to draw hit graph from cached scene canvas. ' + e.message);\n    }\n\n    return this;\n  };\n\n  Shape.prototype.hasPointerCapture = function (pointerId) {\n    return PointerEvents.hasPointerCapture(pointerId, this);\n  };\n\n  Shape.prototype.setPointerCapture = function (pointerId) {\n    PointerEvents.setPointerCapture(pointerId, this);\n  };\n\n  Shape.prototype.releaseCapture = function (pointerId) {\n    PointerEvents.releaseCapture(pointerId, this);\n  };\n\n  return Shape;\n}(Node_1.Node);\n\nexports.Shape = Shape;\nShape.prototype._fillFunc = _fillFunc;\nShape.prototype._strokeFunc = _strokeFunc;\nShape.prototype._fillFuncHit = _fillFuncHit;\nShape.prototype._strokeFuncHit = _strokeFuncHit;\nShape.prototype._centroid = false;\nShape.prototype.nodeType = 'Shape';\n\nGlobal_1._registerNode(Shape);\n\nFactory_1.Factory.addGetterSetter(Shape, 'stroke', undefined, Validators_1.getStringValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'strokeWidth', 2, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'hitStrokeWidth', 'auto', Validators_1.getNumberOrAutoValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'strokeHitEnabled', true, Validators_1.getBooleanValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'perfectDrawEnabled', true, Validators_1.getBooleanValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'shadowForStrokeEnabled', true, Validators_1.getBooleanValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'lineJoin');\nFactory_1.Factory.addGetterSetter(Shape, 'lineCap');\nFactory_1.Factory.addGetterSetter(Shape, 'sceneFunc');\nFactory_1.Factory.addGetterSetter(Shape, 'hitFunc');\nFactory_1.Factory.addGetterSetter(Shape, 'dash');\nFactory_1.Factory.addGetterSetter(Shape, 'dashOffset', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'shadowColor', undefined, Validators_1.getStringValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'shadowBlur', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'shadowOpacity', 1, Validators_1.getNumberValidator());\nFactory_1.Factory.addComponentsGetterSetter(Shape, 'shadowOffset', ['x', 'y']);\nFactory_1.Factory.addGetterSetter(Shape, 'shadowOffsetX', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'shadowOffsetY', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'fillPatternImage');\nFactory_1.Factory.addGetterSetter(Shape, 'fill', undefined, Validators_1.getStringValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'fillPatternX', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'fillPatternY', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'fillLinearGradientColorStops');\nFactory_1.Factory.addGetterSetter(Shape, 'strokeLinearGradientColorStops');\nFactory_1.Factory.addGetterSetter(Shape, 'fillRadialGradientStartRadius', 0);\nFactory_1.Factory.addGetterSetter(Shape, 'fillRadialGradientEndRadius', 0);\nFactory_1.Factory.addGetterSetter(Shape, 'fillRadialGradientColorStops');\nFactory_1.Factory.addGetterSetter(Shape, 'fillPatternRepeat', 'repeat');\nFactory_1.Factory.addGetterSetter(Shape, 'fillEnabled', true);\nFactory_1.Factory.addGetterSetter(Shape, 'strokeEnabled', true);\nFactory_1.Factory.addGetterSetter(Shape, 'shadowEnabled', true);\nFactory_1.Factory.addGetterSetter(Shape, 'dashEnabled', true);\nFactory_1.Factory.addGetterSetter(Shape, 'strokeScaleEnabled', true);\nFactory_1.Factory.addGetterSetter(Shape, 'fillPriority', 'color');\nFactory_1.Factory.addComponentsGetterSetter(Shape, 'fillPatternOffset', ['x', 'y']);\nFactory_1.Factory.addGetterSetter(Shape, 'fillPatternOffsetX', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'fillPatternOffsetY', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addComponentsGetterSetter(Shape, 'fillPatternScale', ['x', 'y']);\nFactory_1.Factory.addGetterSetter(Shape, 'fillPatternScaleX', 1, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'fillPatternScaleY', 1, Validators_1.getNumberValidator());\nFactory_1.Factory.addComponentsGetterSetter(Shape, 'fillLinearGradientStartPoint', ['x', 'y']);\nFactory_1.Factory.addComponentsGetterSetter(Shape, 'strokeLinearGradientStartPoint', ['x', 'y']);\nFactory_1.Factory.addGetterSetter(Shape, 'fillLinearGradientStartPointX', 0);\nFactory_1.Factory.addGetterSetter(Shape, 'strokeLinearGradientStartPointX', 0);\nFactory_1.Factory.addGetterSetter(Shape, 'fillLinearGradientStartPointY', 0);\nFactory_1.Factory.addGetterSetter(Shape, 'strokeLinearGradientStartPointY', 0);\nFactory_1.Factory.addComponentsGetterSetter(Shape, 'fillLinearGradientEndPoint', ['x', 'y']);\nFactory_1.Factory.addComponentsGetterSetter(Shape, 'strokeLinearGradientEndPoint', ['x', 'y']);\nFactory_1.Factory.addGetterSetter(Shape, 'fillLinearGradientEndPointX', 0);\nFactory_1.Factory.addGetterSetter(Shape, 'strokeLinearGradientEndPointX', 0);\nFactory_1.Factory.addGetterSetter(Shape, 'fillLinearGradientEndPointY', 0);\nFactory_1.Factory.addGetterSetter(Shape, 'strokeLinearGradientEndPointY', 0);\nFactory_1.Factory.addComponentsGetterSetter(Shape, 'fillRadialGradientStartPoint', ['x', 'y']);\nFactory_1.Factory.addGetterSetter(Shape, 'fillRadialGradientStartPointX', 0);\nFactory_1.Factory.addGetterSetter(Shape, 'fillRadialGradientStartPointY', 0);\nFactory_1.Factory.addComponentsGetterSetter(Shape, 'fillRadialGradientEndPoint', ['x', 'y']);\nFactory_1.Factory.addGetterSetter(Shape, 'fillRadialGradientEndPointX', 0);\nFactory_1.Factory.addGetterSetter(Shape, 'fillRadialGradientEndPointY', 0);\nFactory_1.Factory.addGetterSetter(Shape, 'fillPatternRotation', 0);\nFactory_1.Factory.backCompat(Shape, {\n  dashArray: 'dash',\n  getDashArray: 'getDash',\n  setDashArray: 'getDash',\n  drawFunc: 'sceneFunc',\n  getDrawFunc: 'getSceneFunc',\n  setDrawFunc: 'setSceneFunc',\n  drawHitFunc: 'hitFunc',\n  getDrawHitFunc: 'getHitFunc',\n  setDrawHitFunc: 'setHitFunc'\n});\nUtil_1.Collection.mapMethods(Shape);","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Util_1 = require(\"./Util\");\n\nvar Factory_1 = require(\"./Factory\");\n\nvar Container_1 = require(\"./Container\");\n\nvar Global_1 = require(\"./Global\");\n\nvar Canvas_1 = require(\"./Canvas\");\n\nvar DragAndDrop_1 = require(\"./DragAndDrop\");\n\nvar Global_2 = require(\"./Global\");\n\nvar PointerEvents = require(\"./PointerEvents\");\n\nvar STAGE = 'Stage',\n    STRING = 'string',\n    PX = 'px',\n    MOUSEOUT = 'mouseout',\n    MOUSELEAVE = 'mouseleave',\n    MOUSEOVER = 'mouseover',\n    MOUSEENTER = 'mouseenter',\n    MOUSEMOVE = 'mousemove',\n    MOUSEDOWN = 'mousedown',\n    MOUSEUP = 'mouseup',\n    POINTERMOVE = 'pointermove',\n    POINTERDOWN = 'pointerdown',\n    POINTERUP = 'pointerup',\n    POINTERCANCEL = 'pointercancel',\n    LOSTPOINTERCAPTURE = 'lostpointercapture',\n    CONTEXTMENU = 'contextmenu',\n    CLICK = 'click',\n    DBL_CLICK = 'dblclick',\n    TOUCHSTART = 'touchstart',\n    TOUCHEND = 'touchend',\n    TAP = 'tap',\n    DBL_TAP = 'dbltap',\n    TOUCHMOVE = 'touchmove',\n    WHEEL = 'wheel',\n    CONTENT_MOUSEOUT = 'contentMouseout',\n    CONTENT_MOUSEOVER = 'contentMouseover',\n    CONTENT_MOUSEMOVE = 'contentMousemove',\n    CONTENT_MOUSEDOWN = 'contentMousedown',\n    CONTENT_MOUSEUP = 'contentMouseup',\n    CONTENT_CONTEXTMENU = 'contentContextmenu',\n    CONTENT_CLICK = 'contentClick',\n    CONTENT_DBL_CLICK = 'contentDblclick',\n    CONTENT_TOUCHSTART = 'contentTouchstart',\n    CONTENT_TOUCHEND = 'contentTouchend',\n    CONTENT_DBL_TAP = 'contentDbltap',\n    CONTENT_TAP = 'contentTap',\n    CONTENT_TOUCHMOVE = 'contentTouchmove',\n    CONTENT_POINTERMOVE = 'contentPointermove',\n    CONTENT_POINTERDOWN = 'contentPointerdown',\n    CONTENT_POINTERUP = 'contentPointerup',\n    CONTENT_WHEEL = 'contentWheel',\n    RELATIVE = 'relative',\n    KONVA_CONTENT = 'konvajs-content',\n    SPACE = ' ',\n    UNDERSCORE = '_',\n    CONTAINER = 'container',\n    MAX_LAYERS_NUMBER = 5,\n    EMPTY_STRING = '',\n    EVENTS = [MOUSEENTER, MOUSEDOWN, MOUSEMOVE, MOUSEUP, MOUSEOUT, TOUCHSTART, TOUCHMOVE, TOUCHEND, MOUSEOVER, WHEEL, CONTEXTMENU, POINTERDOWN, POINTERMOVE, POINTERUP, POINTERCANCEL, LOSTPOINTERCAPTURE],\n    eventsLength = EVENTS.length;\n\nfunction addEvent(ctx, eventName) {\n  ctx.content.addEventListener(eventName, function (evt) {\n    ctx[UNDERSCORE + eventName](evt);\n  }, false);\n}\n\nvar NO_POINTERS_MESSAGE = \"Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);\";\nexports.stages = [];\n\nfunction checkNoClip(attrs) {\n  if (attrs === void 0) {\n    attrs = {};\n  }\n\n  if (attrs.clipFunc || attrs.clipWidth || attrs.clipHeight) {\n    Util_1.Util.warn('Stage does not support clipping. Please use clip for Layers or Groups.');\n  }\n\n  return attrs;\n}\n\nvar Stage = function (_super) {\n  __extends(Stage, _super);\n\n  function Stage(config) {\n    var _this = _super.call(this, checkNoClip(config)) || this;\n\n    _this._buildDOM();\n\n    _this._bindContentEvents();\n\n    exports.stages.push(_this);\n\n    _this.on('widthChange.konva heightChange.konva', _this._resizeDOM);\n\n    _this.on('visibleChange.konva', _this._checkVisibility);\n\n    _this.on('clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva', function () {\n      checkNoClip(_this.attrs);\n    });\n\n    _this._checkVisibility();\n\n    return _this;\n  }\n\n  Stage.prototype._validateAdd = function (child) {\n    var isLayer = child.getType() === 'Layer';\n    var isFastLayer = child.getType() === 'FastLayer';\n    var valid = isLayer || isFastLayer;\n\n    if (!valid) {\n      Util_1.Util.throw('You may only add layers to the stage.');\n    }\n  };\n\n  Stage.prototype._checkVisibility = function () {\n    var style = this.visible() ? '' : 'none';\n    this.content.style.display = style;\n  };\n\n  Stage.prototype.setContainer = function (container) {\n    if (typeof container === STRING) {\n      if (container.charAt(0) === '.') {\n        var className = container.slice(1);\n        container = document.getElementsByClassName(className)[0];\n      } else {\n        var id;\n\n        if (container.charAt(0) !== '#') {\n          id = container;\n        } else {\n          id = container.slice(1);\n        }\n\n        container = document.getElementById(id);\n      }\n\n      if (!container) {\n        throw 'Can not find container in document with id ' + id;\n      }\n    }\n\n    this._setAttr(CONTAINER, container);\n\n    if (this.content) {\n      if (this.content.parentElement) {\n        this.content.parentElement.removeChild(this.content);\n      }\n\n      container.appendChild(this.content);\n    }\n\n    return this;\n  };\n\n  Stage.prototype.shouldDrawHit = function () {\n    return true;\n  };\n\n  Stage.prototype.clear = function () {\n    var layers = this.children,\n        len = layers.length,\n        n;\n\n    for (n = 0; n < len; n++) {\n      layers[n].clear();\n    }\n\n    return this;\n  };\n\n  Stage.prototype.clone = function (obj) {\n    if (!obj) {\n      obj = {};\n    }\n\n    obj.container = document.createElement('div');\n    return Container_1.Container.prototype.clone.call(this, obj);\n  };\n\n  Stage.prototype.destroy = function () {\n    _super.prototype.destroy.call(this);\n\n    var content = this.content;\n\n    if (content && Util_1.Util._isInDocument(content)) {\n      this.container().removeChild(content);\n    }\n\n    var index = exports.stages.indexOf(this);\n\n    if (index > -1) {\n      exports.stages.splice(index, 1);\n    }\n\n    return this;\n  };\n\n  Stage.prototype.getPointerPosition = function () {\n    if (!this.pointerPos) {\n      Util_1.Util.warn(NO_POINTERS_MESSAGE);\n    }\n\n    return this.pointerPos;\n  };\n\n  Stage.prototype.getStage = function () {\n    return this;\n  };\n\n  Stage.prototype.getContent = function () {\n    return this.content;\n  };\n\n  Stage.prototype._toKonvaCanvas = function (config) {\n    config = config || {};\n\n    var x = config.x || 0,\n        y = config.y || 0,\n        canvas = new Canvas_1.SceneCanvas({\n      width: config.width || this.width(),\n      height: config.height || this.height(),\n      pixelRatio: config.pixelRatio || 1\n    }),\n        _context = canvas.getContext()._context,\n        layers = this.children;\n\n    if (x || y) {\n      _context.translate(-1 * x, -1 * y);\n    }\n\n    layers.each(function (layer) {\n      if (!layer.isVisible()) {\n        return;\n      }\n\n      var layerCanvas = layer._toKonvaCanvas(config);\n\n      _context.drawImage(layerCanvas._canvas, x, y, layerCanvas.getWidth() / layerCanvas.getPixelRatio(), layerCanvas.getHeight() / layerCanvas.getPixelRatio());\n    });\n    return canvas;\n  };\n\n  Stage.prototype.getIntersection = function (pos, selector) {\n    var layers = this.children,\n        len = layers.length,\n        end = len - 1,\n        n,\n        shape;\n\n    for (n = end; n >= 0; n--) {\n      shape = layers[n].getIntersection(pos, selector);\n\n      if (shape) {\n        return shape;\n      }\n    }\n\n    return null;\n  };\n\n  Stage.prototype._resizeDOM = function () {\n    if (this.content) {\n      var width = this.width(),\n          height = this.height(),\n          layers = this.getChildren(),\n          len = layers.length,\n          n,\n          layer;\n      this.content.style.width = width + PX;\n      this.content.style.height = height + PX;\n      this.bufferCanvas.setSize(width, height);\n      this.bufferHitCanvas.setSize(width, height);\n\n      for (n = 0; n < len; n++) {\n        layer = layers[n];\n        layer.setSize({\n          width: width,\n          height: height\n        });\n        layer.draw();\n      }\n    }\n  };\n\n  Stage.prototype.add = function (layer) {\n    if (arguments.length > 1) {\n      for (var i = 0; i < arguments.length; i++) {\n        this.add(arguments[i]);\n      }\n\n      return this;\n    }\n\n    _super.prototype.add.call(this, layer);\n\n    var length = this.children.length;\n\n    if (length > MAX_LAYERS_NUMBER) {\n      Util_1.Util.warn('The stage has ' + length + ' layers. Recommended maximin number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group.');\n    }\n\n    layer._setCanvasSize(this.width(), this.height());\n\n    layer.draw();\n\n    if (Global_1.Konva.isBrowser) {\n      this.content.appendChild(layer.canvas._canvas);\n    }\n\n    return this;\n  };\n\n  Stage.prototype.getParent = function () {\n    return null;\n  };\n\n  Stage.prototype.getLayer = function () {\n    return null;\n  };\n\n  Stage.prototype.hasPointerCapture = function (pointerId) {\n    return PointerEvents.hasPointerCapture(pointerId, this);\n  };\n\n  Stage.prototype.setPointerCapture = function (pointerId) {\n    PointerEvents.setPointerCapture(pointerId, this);\n  };\n\n  Stage.prototype.releaseCapture = function (pointerId) {\n    PointerEvents.releaseCapture(pointerId, this);\n  };\n\n  Stage.prototype.getLayers = function () {\n    return this.getChildren();\n  };\n\n  Stage.prototype._bindContentEvents = function () {\n    if (!Global_1.Konva.isBrowser) {\n      return;\n    }\n\n    for (var n = 0; n < eventsLength; n++) {\n      addEvent(this, EVENTS[n]);\n    }\n  };\n\n  Stage.prototype._mouseenter = function (evt) {\n    this.setPointersPositions(evt);\n\n    this._fire(MOUSEENTER, {\n      evt: evt,\n      target: this,\n      currentTarget: this\n    });\n  };\n\n  Stage.prototype._mouseover = function (evt) {\n    this.setPointersPositions(evt);\n\n    this._fire(CONTENT_MOUSEOVER, {\n      evt: evt\n    });\n\n    this._fire(MOUSEOVER, {\n      evt: evt,\n      target: this,\n      currentTarget: this\n    });\n  };\n\n  Stage.prototype._mouseout = function (evt) {\n    this.setPointersPositions(evt);\n    var targetShape = this.targetShape;\n\n    if (targetShape && !DragAndDrop_1.DD.isDragging) {\n      targetShape._fireAndBubble(MOUSEOUT, {\n        evt: evt\n      });\n\n      targetShape._fireAndBubble(MOUSELEAVE, {\n        evt: evt\n      });\n\n      this.targetShape = null;\n    } else if (!DragAndDrop_1.DD.isDragging) {\n      this._fire(MOUSELEAVE, {\n        evt: evt,\n        target: this,\n        currentTarget: this\n      });\n\n      this._fire(MOUSEOUT, {\n        evt: evt,\n        target: this,\n        currentTarget: this\n      });\n    }\n\n    this.pointerPos = undefined;\n\n    this._fire(CONTENT_MOUSEOUT, {\n      evt: evt\n    });\n  };\n\n  Stage.prototype._mousemove = function (evt) {\n    if (Global_1.Konva.UA.ieMobile) {\n      return this._touchmove(evt);\n    }\n\n    this.setPointersPositions(evt);\n    var shape;\n\n    if (!DragAndDrop_1.DD.isDragging) {\n      shape = this.getIntersection(this.getPointerPosition());\n\n      if (shape && shape.isListening()) {\n        var differentTarget = !this.targetShape || this.targetShape !== shape;\n\n        if (!DragAndDrop_1.DD.isDragging && differentTarget) {\n          if (this.targetShape) {\n            this.targetShape._fireAndBubble(MOUSEOUT, {\n              evt: evt\n            }, shape);\n\n            this.targetShape._fireAndBubble(MOUSELEAVE, {\n              evt: evt\n            }, shape);\n          }\n\n          shape._fireAndBubble(MOUSEOVER, {\n            evt: evt\n          }, this.targetShape);\n\n          shape._fireAndBubble(MOUSEENTER, {\n            evt: evt\n          }, this.targetShape);\n\n          this.targetShape = shape;\n        } else {\n          shape._fireAndBubble(MOUSEMOVE, {\n            evt: evt\n          });\n        }\n      } else {\n        if (this.targetShape && !DragAndDrop_1.DD.isDragging) {\n          this.targetShape._fireAndBubble(MOUSEOUT, {\n            evt: evt\n          });\n\n          this.targetShape._fireAndBubble(MOUSELEAVE, {\n            evt: evt\n          });\n\n          this._fire(MOUSEOVER, {\n            evt: evt,\n            target: this,\n            currentTarget: this\n          });\n\n          this.targetShape = null;\n        }\n\n        this._fire(MOUSEMOVE, {\n          evt: evt,\n          target: this,\n          currentTarget: this\n        });\n      }\n\n      this._fire(CONTENT_MOUSEMOVE, {\n        evt: evt\n      });\n    }\n\n    if (evt.cancelable) {\n      evt.preventDefault();\n    }\n  };\n\n  Stage.prototype._mousedown = function (evt) {\n    if (Global_1.Konva.UA.ieMobile) {\n      return this._touchstart(evt);\n    }\n\n    this.setPointersPositions(evt);\n    var shape = this.getIntersection(this.getPointerPosition());\n    Global_1.Konva.listenClickTap = true;\n\n    if (shape && shape.isListening()) {\n      this.clickStartShape = shape;\n\n      shape._fireAndBubble(MOUSEDOWN, {\n        evt: evt\n      });\n    } else {\n      this._fire(MOUSEDOWN, {\n        evt: evt,\n        target: this,\n        currentTarget: this\n      });\n    }\n\n    this._fire(CONTENT_MOUSEDOWN, {\n      evt: evt\n    });\n  };\n\n  Stage.prototype._mouseup = function (evt) {\n    if (Global_1.Konva.UA.ieMobile) {\n      return this._touchend(evt);\n    }\n\n    this.setPointersPositions(evt);\n    var shape = this.getIntersection(this.getPointerPosition()),\n        clickStartShape = this.clickStartShape,\n        clickEndShape = this.clickEndShape,\n        fireDblClick = false;\n\n    if (Global_1.Konva.inDblClickWindow) {\n      fireDblClick = true;\n      clearTimeout(this.dblTimeout);\n    } else if (!DragAndDrop_1.DD.justDragged) {\n      Global_1.Konva.inDblClickWindow = true;\n      clearTimeout(this.dblTimeout);\n    } else if (DragAndDrop_1.DD) {\n      DragAndDrop_1.DD.justDragged = false;\n    }\n\n    this.dblTimeout = setTimeout(function () {\n      Global_1.Konva.inDblClickWindow = false;\n    }, Global_1.Konva.dblClickWindow);\n\n    if (shape && shape.isListening()) {\n      this.clickEndShape = shape;\n\n      shape._fireAndBubble(MOUSEUP, {\n        evt: evt\n      });\n\n      if (Global_1.Konva.listenClickTap && clickStartShape && clickStartShape._id === shape._id) {\n        shape._fireAndBubble(CLICK, {\n          evt: evt\n        });\n\n        if (fireDblClick && clickEndShape && clickEndShape === shape) {\n          shape._fireAndBubble(DBL_CLICK, {\n            evt: evt\n          });\n        }\n      }\n    } else {\n      this._fire(MOUSEUP, {\n        evt: evt,\n        target: this,\n        currentTarget: this\n      });\n\n      if (Global_1.Konva.listenClickTap) {\n        this._fire(CLICK, {\n          evt: evt,\n          target: this,\n          currentTarget: this\n        });\n      }\n\n      if (fireDblClick) {\n        this._fire(DBL_CLICK, {\n          evt: evt,\n          target: this,\n          currentTarget: this\n        });\n      }\n    }\n\n    this._fire(CONTENT_MOUSEUP, {\n      evt: evt\n    });\n\n    if (Global_1.Konva.listenClickTap) {\n      this._fire(CONTENT_CLICK, {\n        evt: evt\n      });\n\n      if (fireDblClick) {\n        this._fire(CONTENT_DBL_CLICK, {\n          evt: evt\n        });\n      }\n    }\n\n    Global_1.Konva.listenClickTap = false;\n\n    if (evt.cancelable) {\n      evt.preventDefault();\n    }\n  };\n\n  Stage.prototype._contextmenu = function (evt) {\n    this.setPointersPositions(evt);\n    var shape = this.getIntersection(this.getPointerPosition());\n\n    if (shape && shape.isListening()) {\n      shape._fireAndBubble(CONTEXTMENU, {\n        evt: evt\n      });\n    } else {\n      this._fire(CONTEXTMENU, {\n        evt: evt,\n        target: this,\n        currentTarget: this\n      });\n    }\n\n    this._fire(CONTENT_CONTEXTMENU, {\n      evt: evt\n    });\n  };\n\n  Stage.prototype._touchstart = function (evt) {\n    this.setPointersPositions(evt);\n    var shape = this.getIntersection(this.getPointerPosition());\n    Global_1.Konva.listenClickTap = true;\n\n    if (shape && shape.isListening()) {\n      this.tapStartShape = shape;\n\n      shape._fireAndBubble(TOUCHSTART, {\n        evt: evt\n      });\n\n      if (shape.isListening() && shape.preventDefault() && evt.cancelable) {\n        evt.preventDefault();\n      }\n    } else {\n      this._fire(TOUCHSTART, {\n        evt: evt,\n        target: this,\n        currentTarget: this\n      });\n    }\n\n    this._fire(CONTENT_TOUCHSTART, {\n      evt: evt\n    });\n  };\n\n  Stage.prototype._touchend = function (evt) {\n    this.setPointersPositions(evt);\n    var shape = this.getIntersection(this.getPointerPosition()),\n        clickEndShape = this.clickEndShape,\n        fireDblClick = false;\n\n    if (Global_1.Konva.inDblClickWindow) {\n      fireDblClick = true;\n      clearTimeout(this.dblTimeout);\n    } else {\n      Global_1.Konva.inDblClickWindow = true;\n      clearTimeout(this.dblTimeout);\n    }\n\n    this.dblTimeout = setTimeout(function () {\n      Global_1.Konva.inDblClickWindow = false;\n    }, Global_1.Konva.dblClickWindow);\n\n    if (shape && shape.isListening()) {\n      this.clickEndShape = shape;\n\n      shape._fireAndBubble(TOUCHEND, {\n        evt: evt\n      });\n\n      if (Global_1.Konva.listenClickTap && this.tapStartShape && shape._id === this.tapStartShape._id) {\n        shape._fireAndBubble(TAP, {\n          evt: evt\n        });\n\n        if (fireDblClick && clickEndShape && clickEndShape === shape) {\n          shape._fireAndBubble(DBL_TAP, {\n            evt: evt\n          });\n        }\n      }\n\n      if (shape.isListening() && shape.preventDefault() && evt.cancelable) {\n        evt.preventDefault();\n      }\n    } else {\n      this._fire(TOUCHEND, {\n        evt: evt,\n        target: this,\n        currentTarget: this\n      });\n\n      if (Global_1.Konva.listenClickTap) {\n        this._fire(TAP, {\n          evt: evt,\n          target: this,\n          currentTarget: this\n        });\n      }\n\n      if (fireDblClick) {\n        this._fire(DBL_TAP, {\n          evt: evt,\n          target: this,\n          currentTarget: this\n        });\n      }\n    }\n\n    this._fire(CONTENT_TOUCHEND, {\n      evt: evt\n    });\n\n    if (Global_1.Konva.listenClickTap) {\n      this._fire(CONTENT_TAP, {\n        evt: evt\n      });\n\n      if (fireDblClick) {\n        this._fire(CONTENT_DBL_TAP, {\n          evt: evt\n        });\n      }\n    }\n\n    Global_1.Konva.listenClickTap = false;\n  };\n\n  Stage.prototype._touchmove = function (evt) {\n    this.setPointersPositions(evt);\n    var shape;\n\n    if (!DragAndDrop_1.DD.isDragging) {\n      shape = this.getIntersection(this.getPointerPosition());\n\n      if (shape && shape.isListening()) {\n        shape._fireAndBubble(TOUCHMOVE, {\n          evt: evt\n        });\n\n        if (shape.isListening() && shape.preventDefault() && evt.cancelable) {\n          evt.preventDefault();\n        }\n      } else {\n        this._fire(TOUCHMOVE, {\n          evt: evt,\n          target: this,\n          currentTarget: this\n        });\n      }\n\n      this._fire(CONTENT_TOUCHMOVE, {\n        evt: evt\n      });\n    }\n\n    if (DragAndDrop_1.DD.isDragging && DragAndDrop_1.DD.node.preventDefault() && evt.cancelable) {\n      evt.preventDefault();\n    }\n  };\n\n  Stage.prototype._wheel = function (evt) {\n    this.setPointersPositions(evt);\n    var shape = this.getIntersection(this.getPointerPosition());\n\n    if (shape && shape.isListening()) {\n      shape._fireAndBubble(WHEEL, {\n        evt: evt\n      });\n    } else {\n      this._fire(WHEEL, {\n        evt: evt,\n        target: this,\n        currentTarget: this\n      });\n    }\n\n    this._fire(CONTENT_WHEEL, {\n      evt: evt\n    });\n  };\n\n  Stage.prototype._pointerdown = function (evt) {\n    if (!Global_1.Konva._pointerEventsEnabled) {\n      return;\n    }\n\n    this.setPointersPositions(evt);\n    var shape = PointerEvents.getCapturedShape(evt.pointerId) || this.getIntersection(this.getPointerPosition());\n\n    if (shape) {\n      shape._fireAndBubble(POINTERDOWN, PointerEvents.createEvent(evt));\n    }\n  };\n\n  Stage.prototype._pointermove = function (evt) {\n    if (!Global_1.Konva._pointerEventsEnabled) {\n      return;\n    }\n\n    this.setPointersPositions(evt);\n    var shape = PointerEvents.getCapturedShape(evt.pointerId) || this.getIntersection(this.getPointerPosition());\n\n    if (shape) {\n      shape._fireAndBubble(POINTERMOVE, PointerEvents.createEvent(evt));\n    }\n  };\n\n  Stage.prototype._pointerup = function (evt) {\n    if (!Global_1.Konva._pointerEventsEnabled) {\n      return;\n    }\n\n    this.setPointersPositions(evt);\n    var shape = PointerEvents.getCapturedShape(evt.pointerId) || this.getIntersection(this.getPointerPosition());\n\n    if (shape) {\n      shape._fireAndBubble(POINTERUP, PointerEvents.createEvent(evt));\n    }\n\n    PointerEvents.releaseCapture(evt.pointerId);\n  };\n\n  Stage.prototype._pointercancel = function (evt) {\n    if (!Global_1.Konva._pointerEventsEnabled) {\n      return;\n    }\n\n    this.setPointersPositions(evt);\n    var shape = PointerEvents.getCapturedShape(evt.pointerId) || this.getIntersection(this.getPointerPosition());\n\n    if (shape) {\n      shape._fireAndBubble(POINTERUP, PointerEvents.createEvent(evt));\n    }\n\n    PointerEvents.releaseCapture(evt.pointerId);\n  };\n\n  Stage.prototype._lostpointercapture = function (evt) {\n    PointerEvents.releaseCapture(evt.pointerId);\n  };\n\n  Stage.prototype.setPointersPositions = function (evt) {\n    var contentPosition = this._getContentPosition(),\n        x = null,\n        y = null;\n\n    evt = evt ? evt : window.event;\n\n    if (evt.touches !== undefined) {\n      if (evt.touches.length > 0) {\n        var touch = evt.touches[0];\n        x = touch.clientX - contentPosition.left;\n        y = touch.clientY - contentPosition.top;\n      }\n    } else {\n      x = evt.clientX - contentPosition.left;\n      y = evt.clientY - contentPosition.top;\n    }\n\n    if (x !== null && y !== null) {\n      this.pointerPos = {\n        x: x,\n        y: y\n      };\n    }\n  };\n\n  Stage.prototype._setPointerPosition = function (evt) {\n    Util_1.Util.warn('Method _setPointerPosition is deprecated. Use \"stage.setPointersPositions(event)\" instead.');\n    this.setPointersPositions(evt);\n  };\n\n  Stage.prototype._getContentPosition = function () {\n    var rect = this.content.getBoundingClientRect ? this.content.getBoundingClientRect() : {\n      top: 0,\n      left: 0\n    };\n    return {\n      top: rect.top,\n      left: rect.left\n    };\n  };\n\n  Stage.prototype._buildDOM = function () {\n    this.bufferCanvas = new Canvas_1.SceneCanvas();\n    this.bufferHitCanvas = new Canvas_1.HitCanvas({\n      pixelRatio: 1\n    });\n\n    if (!Global_1.Konva.isBrowser) {\n      return;\n    }\n\n    var container = this.container();\n\n    if (!container) {\n      throw 'Stage has no container. A container is required.';\n    }\n\n    container.innerHTML = EMPTY_STRING;\n    this.content = document.createElement('div');\n    this.content.style.position = RELATIVE;\n    this.content.style.userSelect = 'none';\n    this.content.className = KONVA_CONTENT;\n    this.content.setAttribute('role', 'presentation');\n    container.appendChild(this.content);\n\n    this._resizeDOM();\n  };\n\n  Stage.prototype.cache = function () {\n    Util_1.Util.warn('Cache function is not allowed for stage. You may use cache only for layers, groups and shapes.');\n    return this;\n  };\n\n  Stage.prototype.clearCache = function () {\n    return this;\n  };\n\n  Stage.prototype.batchDraw = function () {\n    this.children.each(function (layer) {\n      layer.batchDraw();\n    });\n    return this;\n  };\n\n  return Stage;\n}(Container_1.Container);\n\nexports.Stage = Stage;\nStage.prototype.nodeType = STAGE;\n\nGlobal_2._registerNode(Stage);\n\nFactory_1.Factory.addGetterSetter(Stage, 'container');","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Util_1 = require(\"./Util\");\n\nvar Animation_1 = require(\"./Animation\");\n\nvar Node_1 = require(\"./Node\");\n\nvar Global_1 = require(\"./Global\");\n\nvar blacklist = {\n  node: 1,\n  duration: 1,\n  easing: 1,\n  onFinish: 1,\n  yoyo: 1\n},\n    PAUSED = 1,\n    PLAYING = 2,\n    REVERSING = 3,\n    idCounter = 0,\n    colorAttrs = ['fill', 'stroke', 'shadowColor'];\n\nvar TweenEngine = function () {\n  function TweenEngine(prop, propFunc, func, begin, finish, duration, yoyo) {\n    this.prop = prop;\n    this.propFunc = propFunc;\n    this.begin = begin;\n    this._pos = begin;\n    this.duration = duration;\n    this._change = 0;\n    this.prevPos = 0;\n    this.yoyo = yoyo;\n    this._time = 0;\n    this._position = 0;\n    this._startTime = 0;\n    this._finish = 0;\n    this.func = func;\n    this._change = finish - this.begin;\n    this.pause();\n  }\n\n  TweenEngine.prototype.fire = function (str) {\n    var handler = this[str];\n\n    if (handler) {\n      handler();\n    }\n  };\n\n  TweenEngine.prototype.setTime = function (t) {\n    if (t > this.duration) {\n      if (this.yoyo) {\n        this._time = this.duration;\n        this.reverse();\n      } else {\n        this.finish();\n      }\n    } else if (t < 0) {\n      if (this.yoyo) {\n        this._time = 0;\n        this.play();\n      } else {\n        this.reset();\n      }\n    } else {\n      this._time = t;\n      this.update();\n    }\n  };\n\n  TweenEngine.prototype.getTime = function () {\n    return this._time;\n  };\n\n  TweenEngine.prototype.setPosition = function (p) {\n    this.prevPos = this._pos;\n    this.propFunc(p);\n    this._pos = p;\n  };\n\n  TweenEngine.prototype.getPosition = function (t) {\n    if (t === undefined) {\n      t = this._time;\n    }\n\n    return this.func(t, this.begin, this._change, this.duration);\n  };\n\n  TweenEngine.prototype.play = function () {\n    this.state = PLAYING;\n    this._startTime = this.getTimer() - this._time;\n    this.onEnterFrame();\n    this.fire('onPlay');\n  };\n\n  TweenEngine.prototype.reverse = function () {\n    this.state = REVERSING;\n    this._time = this.duration - this._time;\n    this._startTime = this.getTimer() - this._time;\n    this.onEnterFrame();\n    this.fire('onReverse');\n  };\n\n  TweenEngine.prototype.seek = function (t) {\n    this.pause();\n    this._time = t;\n    this.update();\n    this.fire('onSeek');\n  };\n\n  TweenEngine.prototype.reset = function () {\n    this.pause();\n    this._time = 0;\n    this.update();\n    this.fire('onReset');\n  };\n\n  TweenEngine.prototype.finish = function () {\n    this.pause();\n    this._time = this.duration;\n    this.update();\n    this.fire('onFinish');\n  };\n\n  TweenEngine.prototype.update = function () {\n    this.setPosition(this.getPosition(this._time));\n  };\n\n  TweenEngine.prototype.onEnterFrame = function () {\n    var t = this.getTimer() - this._startTime;\n\n    if (this.state === PLAYING) {\n      this.setTime(t);\n    } else if (this.state === REVERSING) {\n      this.setTime(this.duration - t);\n    }\n  };\n\n  TweenEngine.prototype.pause = function () {\n    this.state = PAUSED;\n    this.fire('onPause');\n  };\n\n  TweenEngine.prototype.getTimer = function () {\n    return new Date().getTime();\n  };\n\n  return TweenEngine;\n}();\n\nvar Tween = function () {\n  function Tween(config) {\n    var that = this,\n        node = config.node,\n        nodeId = node._id,\n        duration,\n        easing = config.easing || exports.Easings.Linear,\n        yoyo = !!config.yoyo,\n        key;\n\n    if (typeof config.duration === 'undefined') {\n      duration = 0.3;\n    } else if (config.duration === 0) {\n      duration = 0.001;\n    } else {\n      duration = config.duration;\n    }\n\n    this.node = node;\n    this._id = idCounter++;\n    var layers = node.getLayer() || (node instanceof Global_1.Konva['Stage'] ? node.getLayers() : null);\n\n    if (!layers) {\n      Util_1.Util.error('Tween constructor have `node` that is not in a layer. Please add node into layer first.');\n    }\n\n    this.anim = new Animation_1.Animation(function () {\n      that.tween.onEnterFrame();\n    }, layers);\n    this.tween = new TweenEngine(key, function (i) {\n      that._tweenFunc(i);\n    }, easing, 0, 1, duration * 1000, yoyo);\n\n    this._addListeners();\n\n    if (!Tween.attrs[nodeId]) {\n      Tween.attrs[nodeId] = {};\n    }\n\n    if (!Tween.attrs[nodeId][this._id]) {\n      Tween.attrs[nodeId][this._id] = {};\n    }\n\n    if (!Tween.tweens[nodeId]) {\n      Tween.tweens[nodeId] = {};\n    }\n\n    for (key in config) {\n      if (blacklist[key] === undefined) {\n        this._addAttr(key, config[key]);\n      }\n    }\n\n    this.reset();\n    this.onFinish = config.onFinish;\n    this.onReset = config.onReset;\n  }\n\n  Tween.prototype._addAttr = function (key, end) {\n    var node = this.node,\n        nodeId = node._id,\n        start,\n        diff,\n        tweenId,\n        n,\n        len,\n        trueEnd,\n        trueStart,\n        endRGBA;\n    tweenId = Tween.tweens[nodeId][key];\n\n    if (tweenId) {\n      delete Tween.attrs[nodeId][tweenId][key];\n    }\n\n    start = node.getAttr(key);\n\n    if (Util_1.Util._isArray(end)) {\n      diff = [];\n      len = Math.max(end.length, start.length);\n\n      if (key === 'points' && end.length !== start.length) {\n        if (end.length > start.length) {\n          trueStart = start;\n          start = Util_1.Util._prepareArrayForTween(start, end, node.closed());\n        } else {\n          trueEnd = end;\n          end = Util_1.Util._prepareArrayForTween(end, start, node.closed());\n        }\n      }\n\n      if (key.indexOf('fill') === 0) {\n        for (n = 0; n < len; n++) {\n          if (n % 2 === 0) {\n            diff.push(end[n] - start[n]);\n          } else {\n            var startRGBA = Util_1.Util.colorToRGBA(start[n]);\n            endRGBA = Util_1.Util.colorToRGBA(end[n]);\n            start[n] = startRGBA;\n            diff.push({\n              r: endRGBA.r - startRGBA.r,\n              g: endRGBA.g - startRGBA.g,\n              b: endRGBA.b - startRGBA.b,\n              a: endRGBA.a - startRGBA.a\n            });\n          }\n        }\n      } else {\n        for (n = 0; n < len; n++) {\n          diff.push(end[n] - start[n]);\n        }\n      }\n    } else if (colorAttrs.indexOf(key) !== -1) {\n      start = Util_1.Util.colorToRGBA(start);\n      endRGBA = Util_1.Util.colorToRGBA(end);\n      diff = {\n        r: endRGBA.r - start.r,\n        g: endRGBA.g - start.g,\n        b: endRGBA.b - start.b,\n        a: endRGBA.a - start.a\n      };\n    } else {\n      diff = end - start;\n    }\n\n    Tween.attrs[nodeId][this._id][key] = {\n      start: start,\n      diff: diff,\n      end: end,\n      trueEnd: trueEnd,\n      trueStart: trueStart\n    };\n    Tween.tweens[nodeId][key] = this._id;\n  };\n\n  Tween.prototype._tweenFunc = function (i) {\n    var node = this.node,\n        attrs = Tween.attrs[node._id][this._id],\n        key,\n        attr,\n        start,\n        diff,\n        newVal,\n        n,\n        len,\n        end;\n\n    for (key in attrs) {\n      attr = attrs[key];\n      start = attr.start;\n      diff = attr.diff;\n      end = attr.end;\n\n      if (Util_1.Util._isArray(start)) {\n        newVal = [];\n        len = Math.max(start.length, end.length);\n\n        if (key.indexOf('fill') === 0) {\n          for (n = 0; n < len; n++) {\n            if (n % 2 === 0) {\n              newVal.push((start[n] || 0) + diff[n] * i);\n            } else {\n              newVal.push('rgba(' + Math.round(start[n].r + diff[n].r * i) + ',' + Math.round(start[n].g + diff[n].g * i) + ',' + Math.round(start[n].b + diff[n].b * i) + ',' + (start[n].a + diff[n].a * i) + ')');\n            }\n          }\n        } else {\n          for (n = 0; n < len; n++) {\n            newVal.push((start[n] || 0) + diff[n] * i);\n          }\n        }\n      } else if (colorAttrs.indexOf(key) !== -1) {\n        newVal = 'rgba(' + Math.round(start.r + diff.r * i) + ',' + Math.round(start.g + diff.g * i) + ',' + Math.round(start.b + diff.b * i) + ',' + (start.a + diff.a * i) + ')';\n      } else {\n        newVal = start + diff * i;\n      }\n\n      node.setAttr(key, newVal);\n    }\n  };\n\n  Tween.prototype._addListeners = function () {\n    var _this = this;\n\n    this.tween.onPlay = function () {\n      _this.anim.start();\n    };\n\n    this.tween.onReverse = function () {\n      _this.anim.start();\n    };\n\n    this.tween.onPause = function () {\n      _this.anim.stop();\n    };\n\n    this.tween.onFinish = function () {\n      var node = _this.node;\n      var attrs = Tween.attrs[node._id][_this._id];\n\n      if (attrs.points && attrs.points.trueEnd) {\n        node.setAttr('points', attrs.points.trueEnd);\n      }\n\n      if (_this.onFinish) {\n        _this.onFinish.call(_this);\n      }\n    };\n\n    this.tween.onReset = function () {\n      var node = _this.node;\n      var attrs = Tween.attrs[node._id][_this._id];\n\n      if (attrs.points && attrs.points.trueStart) {\n        node.points(attrs.points.trueStart);\n      }\n\n      if (_this.onReset) {\n        _this.onReset();\n      }\n    };\n  };\n\n  Tween.prototype.play = function () {\n    this.tween.play();\n    return this;\n  };\n\n  Tween.prototype.reverse = function () {\n    this.tween.reverse();\n    return this;\n  };\n\n  Tween.prototype.reset = function () {\n    this.tween.reset();\n    return this;\n  };\n\n  Tween.prototype.seek = function (t) {\n    this.tween.seek(t * 1000);\n    return this;\n  };\n\n  Tween.prototype.pause = function () {\n    this.tween.pause();\n    return this;\n  };\n\n  Tween.prototype.finish = function () {\n    this.tween.finish();\n    return this;\n  };\n\n  Tween.prototype.destroy = function () {\n    var nodeId = this.node._id,\n        thisId = this._id,\n        attrs = Tween.tweens[nodeId],\n        key;\n    this.pause();\n\n    for (key in attrs) {\n      delete Tween.tweens[nodeId][key];\n    }\n\n    delete Tween.attrs[nodeId][thisId];\n  };\n\n  Tween.attrs = {};\n  Tween.tweens = {};\n  return Tween;\n}();\n\nexports.Tween = Tween;\n\nNode_1.Node.prototype.to = function (params) {\n  var onFinish = params.onFinish;\n  params.node = this;\n\n  params.onFinish = function () {\n    this.destroy();\n\n    if (onFinish) {\n      onFinish();\n    }\n  };\n\n  var tween = new Tween(params);\n  tween.play();\n};\n\nexports.Easings = {\n  BackEaseIn: function BackEaseIn(t, b, c, d) {\n    var s = 1.70158;\n    return c * (t /= d) * t * ((s + 1) * t - s) + b;\n  },\n  BackEaseOut: function BackEaseOut(t, b, c, d) {\n    var s = 1.70158;\n    return c * ((t = t / d - 1) * t * ((s + 1) * t + s) + 1) + b;\n  },\n  BackEaseInOut: function BackEaseInOut(t, b, c, d) {\n    var s = 1.70158;\n\n    if ((t /= d / 2) < 1) {\n      return c / 2 * (t * t * (((s *= 1.525) + 1) * t - s)) + b;\n    }\n\n    return c / 2 * ((t -= 2) * t * (((s *= 1.525) + 1) * t + s) + 2) + b;\n  },\n  ElasticEaseIn: function ElasticEaseIn(t, b, c, d, a, p) {\n    var s = 0;\n\n    if (t === 0) {\n      return b;\n    }\n\n    if ((t /= d) === 1) {\n      return b + c;\n    }\n\n    if (!p) {\n      p = d * 0.3;\n    }\n\n    if (!a || a < Math.abs(c)) {\n      a = c;\n      s = p / 4;\n    } else {\n      s = p / (2 * Math.PI) * Math.asin(c / a);\n    }\n\n    return -(a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p)) + b;\n  },\n  ElasticEaseOut: function ElasticEaseOut(t, b, c, d, a, p) {\n    var s = 0;\n\n    if (t === 0) {\n      return b;\n    }\n\n    if ((t /= d) === 1) {\n      return b + c;\n    }\n\n    if (!p) {\n      p = d * 0.3;\n    }\n\n    if (!a || a < Math.abs(c)) {\n      a = c;\n      s = p / 4;\n    } else {\n      s = p / (2 * Math.PI) * Math.asin(c / a);\n    }\n\n    return a * Math.pow(2, -10 * t) * Math.sin((t * d - s) * (2 * Math.PI) / p) + c + b;\n  },\n  ElasticEaseInOut: function ElasticEaseInOut(t, b, c, d, a, p) {\n    var s = 0;\n\n    if (t === 0) {\n      return b;\n    }\n\n    if ((t /= d / 2) === 2) {\n      return b + c;\n    }\n\n    if (!p) {\n      p = d * (0.3 * 1.5);\n    }\n\n    if (!a || a < Math.abs(c)) {\n      a = c;\n      s = p / 4;\n    } else {\n      s = p / (2 * Math.PI) * Math.asin(c / a);\n    }\n\n    if (t < 1) {\n      return -0.5 * (a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p)) + b;\n    }\n\n    return a * Math.pow(2, -10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p) * 0.5 + c + b;\n  },\n  BounceEaseOut: function BounceEaseOut(t, b, c, d) {\n    if ((t /= d) < 1 / 2.75) {\n      return c * (7.5625 * t * t) + b;\n    } else if (t < 2 / 2.75) {\n      return c * (7.5625 * (t -= 1.5 / 2.75) * t + 0.75) + b;\n    } else if (t < 2.5 / 2.75) {\n      return c * (7.5625 * (t -= 2.25 / 2.75) * t + 0.9375) + b;\n    } else {\n      return c * (7.5625 * (t -= 2.625 / 2.75) * t + 0.984375) + b;\n    }\n  },\n  BounceEaseIn: function BounceEaseIn(t, b, c, d) {\n    return c - exports.Easings.BounceEaseOut(d - t, 0, c, d) + b;\n  },\n  BounceEaseInOut: function BounceEaseInOut(t, b, c, d) {\n    if (t < d / 2) {\n      return exports.Easings.BounceEaseIn(t * 2, 0, c, d) * 0.5 + b;\n    } else {\n      return exports.Easings.BounceEaseOut(t * 2 - d, 0, c, d) * 0.5 + c * 0.5 + b;\n    }\n  },\n  EaseIn: function EaseIn(t, b, c, d) {\n    return c * (t /= d) * t + b;\n  },\n  EaseOut: function EaseOut(t, b, c, d) {\n    return -c * (t /= d) * (t - 2) + b;\n  },\n  EaseInOut: function EaseInOut(t, b, c, d) {\n    if ((t /= d / 2) < 1) {\n      return c / 2 * t * t + b;\n    }\n\n    return -c / 2 * (--t * (t - 2) - 1) + b;\n  },\n  StrongEaseIn: function StrongEaseIn(t, b, c, d) {\n    return c * (t /= d) * t * t * t * t + b;\n  },\n  StrongEaseOut: function StrongEaseOut(t, b, c, d) {\n    return c * ((t = t / d - 1) * t * t * t * t + 1) + b;\n  },\n  StrongEaseInOut: function StrongEaseInOut(t, b, c, d) {\n    if ((t /= d / 2) < 1) {\n      return c / 2 * t * t * t * t * t + b;\n    }\n\n    return c / 2 * ((t -= 2) * t * t * t * t + 2) + b;\n  },\n  Linear: function Linear(t, b, c, d) {\n    return c * t / d + b;\n  }\n};","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Global_1 = require(\"./Global\");\n\nvar Collection = function () {\n  function Collection() {}\n\n  Collection.toCollection = function (arr) {\n    var collection = new Collection(),\n        len = arr.length,\n        n;\n\n    for (n = 0; n < len; n++) {\n      collection.push(arr[n]);\n    }\n\n    return collection;\n  };\n\n  Collection._mapMethod = function (methodName) {\n    Collection.prototype[methodName] = function () {\n      var len = this.length,\n          i;\n      var args = [].slice.call(arguments);\n\n      for (i = 0; i < len; i++) {\n        this[i][methodName].apply(this[i], args);\n      }\n\n      return this;\n    };\n  };\n\n  Collection.mapMethods = function (constructor) {\n    var prot = constructor.prototype;\n\n    for (var methodName in prot) {\n      Collection._mapMethod(methodName);\n    }\n  };\n\n  return Collection;\n}();\n\nexports.Collection = Collection;\nCollection.prototype = [];\n\nCollection.prototype.each = function (func) {\n  for (var n = 0; n < this.length; n++) {\n    func(this[n], n);\n  }\n};\n\nCollection.prototype.toArray = function () {\n  var arr = [],\n      len = this.length,\n      n;\n\n  for (n = 0; n < len; n++) {\n    arr.push(this[n]);\n  }\n\n  return arr;\n};\n\nvar Transform = function () {\n  function Transform(m) {\n    if (m === void 0) {\n      m = [1, 0, 0, 1, 0, 0];\n    }\n\n    this.m = m && m.slice() || [1, 0, 0, 1, 0, 0];\n  }\n\n  Transform.prototype.copy = function () {\n    return new Transform(this.m);\n  };\n\n  Transform.prototype.point = function (point) {\n    var m = this.m;\n    return {\n      x: m[0] * point.x + m[2] * point.y + m[4],\n      y: m[1] * point.x + m[3] * point.y + m[5]\n    };\n  };\n\n  Transform.prototype.translate = function (x, y) {\n    this.m[4] += this.m[0] * x + this.m[2] * y;\n    this.m[5] += this.m[1] * x + this.m[3] * y;\n    return this;\n  };\n\n  Transform.prototype.scale = function (sx, sy) {\n    this.m[0] *= sx;\n    this.m[1] *= sx;\n    this.m[2] *= sy;\n    this.m[3] *= sy;\n    return this;\n  };\n\n  Transform.prototype.rotate = function (rad) {\n    var c = Math.cos(rad);\n    var s = Math.sin(rad);\n    var m11 = this.m[0] * c + this.m[2] * s;\n    var m12 = this.m[1] * c + this.m[3] * s;\n    var m21 = this.m[0] * -s + this.m[2] * c;\n    var m22 = this.m[1] * -s + this.m[3] * c;\n    this.m[0] = m11;\n    this.m[1] = m12;\n    this.m[2] = m21;\n    this.m[3] = m22;\n    return this;\n  };\n\n  Transform.prototype.getTranslation = function () {\n    return {\n      x: this.m[4],\n      y: this.m[5]\n    };\n  };\n\n  Transform.prototype.skew = function (sx, sy) {\n    var m11 = this.m[0] + this.m[2] * sy;\n    var m12 = this.m[1] + this.m[3] * sy;\n    var m21 = this.m[2] + this.m[0] * sx;\n    var m22 = this.m[3] + this.m[1] * sx;\n    this.m[0] = m11;\n    this.m[1] = m12;\n    this.m[2] = m21;\n    this.m[3] = m22;\n    return this;\n  };\n\n  Transform.prototype.multiply = function (matrix) {\n    var m11 = this.m[0] * matrix.m[0] + this.m[2] * matrix.m[1];\n    var m12 = this.m[1] * matrix.m[0] + this.m[3] * matrix.m[1];\n    var m21 = this.m[0] * matrix.m[2] + this.m[2] * matrix.m[3];\n    var m22 = this.m[1] * matrix.m[2] + this.m[3] * matrix.m[3];\n    var dx = this.m[0] * matrix.m[4] + this.m[2] * matrix.m[5] + this.m[4];\n    var dy = this.m[1] * matrix.m[4] + this.m[3] * matrix.m[5] + this.m[5];\n    this.m[0] = m11;\n    this.m[1] = m12;\n    this.m[2] = m21;\n    this.m[3] = m22;\n    this.m[4] = dx;\n    this.m[5] = dy;\n    return this;\n  };\n\n  Transform.prototype.invert = function () {\n    var d = 1 / (this.m[0] * this.m[3] - this.m[1] * this.m[2]);\n    var m0 = this.m[3] * d;\n    var m1 = -this.m[1] * d;\n    var m2 = -this.m[2] * d;\n    var m3 = this.m[0] * d;\n    var m4 = d * (this.m[2] * this.m[5] - this.m[3] * this.m[4]);\n    var m5 = d * (this.m[1] * this.m[4] - this.m[0] * this.m[5]);\n    this.m[0] = m0;\n    this.m[1] = m1;\n    this.m[2] = m2;\n    this.m[3] = m3;\n    this.m[4] = m4;\n    this.m[5] = m5;\n    return this;\n  };\n\n  Transform.prototype.getMatrix = function () {\n    return this.m;\n  };\n\n  Transform.prototype.setAbsolutePosition = function (x, y) {\n    var m0 = this.m[0],\n        m1 = this.m[1],\n        m2 = this.m[2],\n        m3 = this.m[3],\n        m4 = this.m[4],\n        m5 = this.m[5],\n        yt = (m0 * (y - m5) - m1 * (x - m4)) / (m0 * m3 - m1 * m2),\n        xt = (x - m4 - m2 * yt) / m0;\n    return this.translate(xt, yt);\n  };\n\n  return Transform;\n}();\n\nexports.Transform = Transform;\nvar OBJECT_ARRAY = '[object Array]',\n    OBJECT_NUMBER = '[object Number]',\n    OBJECT_STRING = '[object String]',\n    OBJECT_BOOLEAN = '[object Boolean]',\n    PI_OVER_DEG180 = Math.PI / 180,\n    DEG180_OVER_PI = 180 / Math.PI,\n    HASH = '#',\n    EMPTY_STRING = '',\n    ZERO = '0',\n    KONVA_WARNING = 'Konva warning: ',\n    KONVA_ERROR = 'Konva error: ',\n    RGB_PAREN = 'rgb(',\n    COLORS = {\n  aliceblue: [240, 248, 255],\n  antiquewhite: [250, 235, 215],\n  aqua: [0, 255, 255],\n  aquamarine: [127, 255, 212],\n  azure: [240, 255, 255],\n  beige: [245, 245, 220],\n  bisque: [255, 228, 196],\n  black: [0, 0, 0],\n  blanchedalmond: [255, 235, 205],\n  blue: [0, 0, 255],\n  blueviolet: [138, 43, 226],\n  brown: [165, 42, 42],\n  burlywood: [222, 184, 135],\n  cadetblue: [95, 158, 160],\n  chartreuse: [127, 255, 0],\n  chocolate: [210, 105, 30],\n  coral: [255, 127, 80],\n  cornflowerblue: [100, 149, 237],\n  cornsilk: [255, 248, 220],\n  crimson: [220, 20, 60],\n  cyan: [0, 255, 255],\n  darkblue: [0, 0, 139],\n  darkcyan: [0, 139, 139],\n  darkgoldenrod: [184, 132, 11],\n  darkgray: [169, 169, 169],\n  darkgreen: [0, 100, 0],\n  darkgrey: [169, 169, 169],\n  darkkhaki: [189, 183, 107],\n  darkmagenta: [139, 0, 139],\n  darkolivegreen: [85, 107, 47],\n  darkorange: [255, 140, 0],\n  darkorchid: [153, 50, 204],\n  darkred: [139, 0, 0],\n  darksalmon: [233, 150, 122],\n  darkseagreen: [143, 188, 143],\n  darkslateblue: [72, 61, 139],\n  darkslategray: [47, 79, 79],\n  darkslategrey: [47, 79, 79],\n  darkturquoise: [0, 206, 209],\n  darkviolet: [148, 0, 211],\n  deeppink: [255, 20, 147],\n  deepskyblue: [0, 191, 255],\n  dimgray: [105, 105, 105],\n  dimgrey: [105, 105, 105],\n  dodgerblue: [30, 144, 255],\n  firebrick: [178, 34, 34],\n  floralwhite: [255, 255, 240],\n  forestgreen: [34, 139, 34],\n  fuchsia: [255, 0, 255],\n  gainsboro: [220, 220, 220],\n  ghostwhite: [248, 248, 255],\n  gold: [255, 215, 0],\n  goldenrod: [218, 165, 32],\n  gray: [128, 128, 128],\n  green: [0, 128, 0],\n  greenyellow: [173, 255, 47],\n  grey: [128, 128, 128],\n  honeydew: [240, 255, 240],\n  hotpink: [255, 105, 180],\n  indianred: [205, 92, 92],\n  indigo: [75, 0, 130],\n  ivory: [255, 255, 240],\n  khaki: [240, 230, 140],\n  lavender: [230, 230, 250],\n  lavenderblush: [255, 240, 245],\n  lawngreen: [124, 252, 0],\n  lemonchiffon: [255, 250, 205],\n  lightblue: [173, 216, 230],\n  lightcoral: [240, 128, 128],\n  lightcyan: [224, 255, 255],\n  lightgoldenrodyellow: [250, 250, 210],\n  lightgray: [211, 211, 211],\n  lightgreen: [144, 238, 144],\n  lightgrey: [211, 211, 211],\n  lightpink: [255, 182, 193],\n  lightsalmon: [255, 160, 122],\n  lightseagreen: [32, 178, 170],\n  lightskyblue: [135, 206, 250],\n  lightslategray: [119, 136, 153],\n  lightslategrey: [119, 136, 153],\n  lightsteelblue: [176, 196, 222],\n  lightyellow: [255, 255, 224],\n  lime: [0, 255, 0],\n  limegreen: [50, 205, 50],\n  linen: [250, 240, 230],\n  magenta: [255, 0, 255],\n  maroon: [128, 0, 0],\n  mediumaquamarine: [102, 205, 170],\n  mediumblue: [0, 0, 205],\n  mediumorchid: [186, 85, 211],\n  mediumpurple: [147, 112, 219],\n  mediumseagreen: [60, 179, 113],\n  mediumslateblue: [123, 104, 238],\n  mediumspringgreen: [0, 250, 154],\n  mediumturquoise: [72, 209, 204],\n  mediumvioletred: [199, 21, 133],\n  midnightblue: [25, 25, 112],\n  mintcream: [245, 255, 250],\n  mistyrose: [255, 228, 225],\n  moccasin: [255, 228, 181],\n  navajowhite: [255, 222, 173],\n  navy: [0, 0, 128],\n  oldlace: [253, 245, 230],\n  olive: [128, 128, 0],\n  olivedrab: [107, 142, 35],\n  orange: [255, 165, 0],\n  orangered: [255, 69, 0],\n  orchid: [218, 112, 214],\n  palegoldenrod: [238, 232, 170],\n  palegreen: [152, 251, 152],\n  paleturquoise: [175, 238, 238],\n  palevioletred: [219, 112, 147],\n  papayawhip: [255, 239, 213],\n  peachpuff: [255, 218, 185],\n  peru: [205, 133, 63],\n  pink: [255, 192, 203],\n  plum: [221, 160, 203],\n  powderblue: [176, 224, 230],\n  purple: [128, 0, 128],\n  rebeccapurple: [102, 51, 153],\n  red: [255, 0, 0],\n  rosybrown: [188, 143, 143],\n  royalblue: [65, 105, 225],\n  saddlebrown: [139, 69, 19],\n  salmon: [250, 128, 114],\n  sandybrown: [244, 164, 96],\n  seagreen: [46, 139, 87],\n  seashell: [255, 245, 238],\n  sienna: [160, 82, 45],\n  silver: [192, 192, 192],\n  skyblue: [135, 206, 235],\n  slateblue: [106, 90, 205],\n  slategray: [119, 128, 144],\n  slategrey: [119, 128, 144],\n  snow: [255, 255, 250],\n  springgreen: [0, 255, 127],\n  steelblue: [70, 130, 180],\n  tan: [210, 180, 140],\n  teal: [0, 128, 128],\n  thistle: [216, 191, 216],\n  transparent: [255, 255, 255, 0],\n  tomato: [255, 99, 71],\n  turquoise: [64, 224, 208],\n  violet: [238, 130, 238],\n  wheat: [245, 222, 179],\n  white: [255, 255, 255],\n  whitesmoke: [245, 245, 245],\n  yellow: [255, 255, 0],\n  yellowgreen: [154, 205, 5]\n},\n    RGB_REGEX = /rgb\\((\\d{1,3}),(\\d{1,3}),(\\d{1,3})\\)/,\n    animQueue = [];\nexports.Util = {\n  _isElement: function _isElement(obj) {\n    return !!(obj && obj.nodeType == 1);\n  },\n  _isFunction: function _isFunction(obj) {\n    return !!(obj && obj.constructor && obj.call && obj.apply);\n  },\n  _isPlainObject: function _isPlainObject(obj) {\n    return !!obj && obj.constructor === Object;\n  },\n  _isArray: function _isArray(obj) {\n    return Object.prototype.toString.call(obj) === OBJECT_ARRAY;\n  },\n  _isNumber: function _isNumber(obj) {\n    return Object.prototype.toString.call(obj) === OBJECT_NUMBER && !isNaN(obj) && isFinite(obj);\n  },\n  _isString: function _isString(obj) {\n    return Object.prototype.toString.call(obj) === OBJECT_STRING;\n  },\n  _isBoolean: function _isBoolean(obj) {\n    return Object.prototype.toString.call(obj) === OBJECT_BOOLEAN;\n  },\n  isObject: function isObject(val) {\n    return val instanceof Object;\n  },\n  isValidSelector: function isValidSelector(selector) {\n    if (typeof selector !== 'string') {\n      return false;\n    }\n\n    var firstChar = selector[0];\n    return firstChar === '#' || firstChar === '.' || firstChar === firstChar.toUpperCase();\n  },\n  _sign: function _sign(number) {\n    if (number === 0) {\n      return 0;\n    }\n\n    if (number > 0) {\n      return 1;\n    } else {\n      return -1;\n    }\n  },\n  requestAnimFrame: function requestAnimFrame(callback) {\n    animQueue.push(callback);\n\n    if (animQueue.length === 1) {\n      requestAnimationFrame(function () {\n        var queue = animQueue;\n        animQueue = [];\n        queue.forEach(function (cb) {\n          cb();\n        });\n      });\n    }\n  },\n  createCanvasElement: function createCanvasElement() {\n    var canvas = document.createElement('canvas');\n\n    try {\n      canvas.style = canvas.style || {};\n    } catch (e) {}\n\n    return canvas;\n  },\n  createImageElement: function createImageElement() {\n    return document.createElement('img');\n  },\n  _isInDocument: function _isInDocument(el) {\n    while (el = el.parentNode) {\n      if (el == document) {\n        return true;\n      }\n    }\n\n    return false;\n  },\n  _simplifyArray: function _simplifyArray(arr) {\n    var retArr = [],\n        len = arr.length,\n        util = exports.Util,\n        n,\n        val;\n\n    for (n = 0; n < len; n++) {\n      val = arr[n];\n\n      if (util._isNumber(val)) {\n        val = Math.round(val * 1000) / 1000;\n      } else if (!util._isString(val)) {\n        val = val.toString();\n      }\n\n      retArr.push(val);\n    }\n\n    return retArr;\n  },\n  _urlToImage: function _urlToImage(url, callback) {\n    var imageObj = new Global_1.glob.Image();\n\n    imageObj.onload = function () {\n      callback(imageObj);\n    };\n\n    imageObj.src = url;\n  },\n  _rgbToHex: function _rgbToHex(r, g, b) {\n    return ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1);\n  },\n  _hexToRgb: function _hexToRgb(hex) {\n    hex = hex.replace(HASH, EMPTY_STRING);\n    var bigint = parseInt(hex, 16);\n    return {\n      r: bigint >> 16 & 255,\n      g: bigint >> 8 & 255,\n      b: bigint & 255\n    };\n  },\n  getRandomColor: function getRandomColor() {\n    var randColor = (Math.random() * 0xffffff << 0).toString(16);\n\n    while (randColor.length < 6) {\n      randColor = ZERO + randColor;\n    }\n\n    return HASH + randColor;\n  },\n  get: function get(val, def) {\n    if (val === undefined) {\n      return def;\n    } else {\n      return val;\n    }\n  },\n  getRGB: function getRGB(color) {\n    var rgb;\n\n    if (color in COLORS) {\n      rgb = COLORS[color];\n      return {\n        r: rgb[0],\n        g: rgb[1],\n        b: rgb[2]\n      };\n    } else if (color[0] === HASH) {\n      return this._hexToRgb(color.substring(1));\n    } else if (color.substr(0, 4) === RGB_PAREN) {\n      rgb = RGB_REGEX.exec(color.replace(/ /g, ''));\n      return {\n        r: parseInt(rgb[1], 10),\n        g: parseInt(rgb[2], 10),\n        b: parseInt(rgb[3], 10)\n      };\n    } else {\n      return {\n        r: 0,\n        g: 0,\n        b: 0\n      };\n    }\n  },\n  colorToRGBA: function colorToRGBA(str) {\n    str = str || 'black';\n    return exports.Util._namedColorToRBA(str) || exports.Util._hex3ColorToRGBA(str) || exports.Util._hex6ColorToRGBA(str) || exports.Util._rgbColorToRGBA(str) || exports.Util._rgbaColorToRGBA(str);\n  },\n  _namedColorToRBA: function _namedColorToRBA(str) {\n    var c = COLORS[str.toLowerCase()];\n\n    if (!c) {\n      return null;\n    }\n\n    return {\n      r: c[0],\n      g: c[1],\n      b: c[2],\n      a: 1\n    };\n  },\n  _rgbColorToRGBA: function _rgbColorToRGBA(str) {\n    if (str.indexOf('rgb(') === 0) {\n      str = str.match(/rgb\\(([^)]+)\\)/)[1];\n      var parts = str.split(/ *, */).map(Number);\n      return {\n        r: parts[0],\n        g: parts[1],\n        b: parts[2],\n        a: 1\n      };\n    }\n  },\n  _rgbaColorToRGBA: function _rgbaColorToRGBA(str) {\n    if (str.indexOf('rgba(') === 0) {\n      str = str.match(/rgba\\(([^)]+)\\)/)[1];\n      var parts = str.split(/ *, */).map(Number);\n      return {\n        r: parts[0],\n        g: parts[1],\n        b: parts[2],\n        a: parts[3]\n      };\n    }\n  },\n  _hex6ColorToRGBA: function _hex6ColorToRGBA(str) {\n    if (str[0] === '#' && str.length === 7) {\n      return {\n        r: parseInt(str.slice(1, 3), 16),\n        g: parseInt(str.slice(3, 5), 16),\n        b: parseInt(str.slice(5, 7), 16),\n        a: 1\n      };\n    }\n  },\n  _hex3ColorToRGBA: function _hex3ColorToRGBA(str) {\n    if (str[0] === '#' && str.length === 4) {\n      return {\n        r: parseInt(str[1] + str[1], 16),\n        g: parseInt(str[2] + str[2], 16),\n        b: parseInt(str[3] + str[3], 16),\n        a: 1\n      };\n    }\n  },\n  haveIntersection: function haveIntersection(r1, r2) {\n    return !(r2.x > r1.x + r1.width || r2.x + r2.width < r1.x || r2.y > r1.y + r1.height || r2.y + r2.height < r1.y);\n  },\n  cloneObject: function cloneObject(obj) {\n    var retObj = {};\n\n    for (var key in obj) {\n      if (this._isPlainObject(obj[key])) {\n        retObj[key] = this.cloneObject(obj[key]);\n      } else if (this._isArray(obj[key])) {\n        retObj[key] = this.cloneArray(obj[key]);\n      } else {\n        retObj[key] = obj[key];\n      }\n    }\n\n    return retObj;\n  },\n  cloneArray: function cloneArray(arr) {\n    return arr.slice(0);\n  },\n  _degToRad: function _degToRad(deg) {\n    return deg * PI_OVER_DEG180;\n  },\n  _radToDeg: function _radToDeg(rad) {\n    return rad * DEG180_OVER_PI;\n  },\n  _capitalize: function _capitalize(str) {\n    return str.charAt(0).toUpperCase() + str.slice(1);\n  },\n  throw: function _throw(str) {\n    throw new Error(KONVA_ERROR + str);\n  },\n  error: function error(str) {\n    console.error(KONVA_ERROR + str);\n  },\n  warn: function warn(str) {\n    if (!Global_1.Konva.showWarnings) {\n      return;\n    }\n\n    console.warn(KONVA_WARNING + str);\n  },\n  extend: function extend(child, parent) {\n    function Ctor() {\n      this.constructor = child;\n    }\n\n    Ctor.prototype = parent.prototype;\n    var oldProto = child.prototype;\n    child.prototype = new Ctor();\n\n    for (var key in oldProto) {\n      if (oldProto.hasOwnProperty(key)) {\n        child.prototype[key] = oldProto[key];\n      }\n    }\n\n    child.__super__ = parent.prototype;\n    child.super = parent;\n  },\n  _getControlPoints: function _getControlPoints(x0, y0, x1, y1, x2, y2, t) {\n    var d01 = Math.sqrt(Math.pow(x1 - x0, 2) + Math.pow(y1 - y0, 2)),\n        d12 = Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2)),\n        fa = t * d01 / (d01 + d12),\n        fb = t * d12 / (d01 + d12),\n        p1x = x1 - fa * (x2 - x0),\n        p1y = y1 - fa * (y2 - y0),\n        p2x = x1 + fb * (x2 - x0),\n        p2y = y1 + fb * (y2 - y0);\n    return [p1x, p1y, p2x, p2y];\n  },\n  _expandPoints: function _expandPoints(p, tension) {\n    var len = p.length,\n        allPoints = [],\n        n,\n        cp;\n\n    for (n = 2; n < len - 2; n += 2) {\n      cp = exports.Util._getControlPoints(p[n - 2], p[n - 1], p[n], p[n + 1], p[n + 2], p[n + 3], tension);\n      allPoints.push(cp[0]);\n      allPoints.push(cp[1]);\n      allPoints.push(p[n]);\n      allPoints.push(p[n + 1]);\n      allPoints.push(cp[2]);\n      allPoints.push(cp[3]);\n    }\n\n    return allPoints;\n  },\n  each: function each(obj, func) {\n    for (var key in obj) {\n      func(key, obj[key]);\n    }\n  },\n  _inRange: function _inRange(val, left, right) {\n    return left <= val && val < right;\n  },\n  _getProjectionToSegment: function _getProjectionToSegment(x1, y1, x2, y2, x3, y3) {\n    var x, y, dist;\n    var pd2 = (x1 - x2) * (x1 - x2) + (y1 - y2) * (y1 - y2);\n\n    if (pd2 == 0) {\n      x = x1;\n      y = y1;\n      dist = (x3 - x2) * (x3 - x2) + (y3 - y2) * (y3 - y2);\n    } else {\n      var u = ((x3 - x1) * (x2 - x1) + (y3 - y1) * (y2 - y1)) / pd2;\n\n      if (u < 0) {\n        x = x1;\n        y = y1;\n        dist = (x1 - x3) * (x1 - x3) + (y1 - y3) * (y1 - y3);\n      } else if (u > 1.0) {\n        x = x2;\n        y = y2;\n        dist = (x2 - x3) * (x2 - x3) + (y2 - y3) * (y2 - y3);\n      } else {\n        x = x1 + u * (x2 - x1);\n        y = y1 + u * (y2 - y1);\n        dist = (x - x3) * (x - x3) + (y - y3) * (y - y3);\n      }\n    }\n\n    return [x, y, dist];\n  },\n  _getProjectionToLine: function _getProjectionToLine(pt, line, isClosed) {\n    var pc = exports.Util.cloneObject(pt);\n    var dist = Number.MAX_VALUE;\n    line.forEach(function (p1, i) {\n      if (!isClosed && i === line.length - 1) {\n        return;\n      }\n\n      var p2 = line[(i + 1) % line.length];\n\n      var proj = exports.Util._getProjectionToSegment(p1.x, p1.y, p2.x, p2.y, pt.x, pt.y);\n\n      var px = proj[0],\n          py = proj[1],\n          pdist = proj[2];\n\n      if (pdist < dist) {\n        pc.x = px;\n        pc.y = py;\n        dist = pdist;\n      }\n    });\n    return pc;\n  },\n  _prepareArrayForTween: function _prepareArrayForTween(startArray, endArray, isClosed) {\n    var n,\n        start = [],\n        end = [];\n\n    if (startArray.length > endArray.length) {\n      var temp = endArray;\n      endArray = startArray;\n      startArray = temp;\n    }\n\n    for (n = 0; n < startArray.length; n += 2) {\n      start.push({\n        x: startArray[n],\n        y: startArray[n + 1]\n      });\n    }\n\n    for (n = 0; n < endArray.length; n += 2) {\n      end.push({\n        x: endArray[n],\n        y: endArray[n + 1]\n      });\n    }\n\n    var newStart = [];\n    end.forEach(function (point) {\n      var pr = exports.Util._getProjectionToLine(point, start, isClosed);\n\n      newStart.push(pr.x);\n      newStart.push(pr.y);\n    });\n    return newStart;\n  },\n  _prepareToStringify: function _prepareToStringify(obj) {\n    var desc;\n    obj.visitedByCircularReferenceRemoval = true;\n\n    for (var key in obj) {\n      if (!(obj.hasOwnProperty(key) && obj[key] && typeof obj[key] == 'object')) {\n        continue;\n      }\n\n      desc = Object.getOwnPropertyDescriptor(obj, key);\n\n      if (obj[key].visitedByCircularReferenceRemoval || exports.Util._isElement(obj[key])) {\n        if (desc.configurable) {\n          delete obj[key];\n        } else {\n          return null;\n        }\n      } else if (exports.Util._prepareToStringify(obj[key]) === null) {\n        if (desc.configurable) {\n          delete obj[key];\n        } else {\n          return null;\n        }\n      }\n    }\n\n    delete obj.visitedByCircularReferenceRemoval;\n    return obj;\n  },\n  _assign: function _assign(target, source) {\n    for (var key in source) {\n      target[key] = source[key];\n    }\n\n    return target;\n  }\n};","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Global_1 = require(\"./Global\");\n\nvar Util_1 = require(\"./Util\");\n\nfunction _formatValue(val) {\n  if (Util_1.Util._isString(val)) {\n    return '\"' + val + '\"';\n  }\n\n  if (Object.prototype.toString.call(val) === '[object Number]') {\n    return val;\n  }\n\n  if (Util_1.Util._isBoolean(val)) {\n    return val;\n  }\n\n  return Object.prototype.toString.call(val);\n}\n\nfunction RGBComponent(val) {\n  if (val > 255) {\n    return 255;\n  } else if (val < 0) {\n    return 0;\n  }\n\n  return Math.round(val);\n}\n\nexports.RGBComponent = RGBComponent;\n\nfunction alphaComponent(val) {\n  if (val > 1) {\n    return 1;\n  } else if (val < 0.0001) {\n    return 0.0001;\n  }\n\n  return val;\n}\n\nexports.alphaComponent = alphaComponent;\n\nfunction getNumberValidator() {\n  if (Global_1.Konva.isUnminified) {\n    return function (val, attr) {\n      if (!Util_1.Util._isNumber(val)) {\n        Util_1.Util.warn(_formatValue(val) + ' is a not valid value for \"' + attr + '\" attribute. The value should be a number.');\n      }\n\n      return val;\n    };\n  }\n}\n\nexports.getNumberValidator = getNumberValidator;\n\nfunction getNumberOrAutoValidator() {\n  if (Global_1.Konva.isUnminified) {\n    return function (val, attr) {\n      var isNumber = Util_1.Util._isNumber(val);\n\n      var isAuto = val === 'auto';\n\n      if (!(isNumber || isAuto)) {\n        Util_1.Util.warn(_formatValue(val) + ' is a not valid value for \"' + attr + '\" attribute. The value should be a number or \"auto\".');\n      }\n\n      return val;\n    };\n  }\n}\n\nexports.getNumberOrAutoValidator = getNumberOrAutoValidator;\n\nfunction getStringValidator() {\n  if (Global_1.Konva.isUnminified) {\n    return function (val, attr) {\n      if (!Util_1.Util._isString(val)) {\n        Util_1.Util.warn(_formatValue(val) + ' is a not valid value for \"' + attr + '\" attribute. The value should be a string.');\n      }\n\n      return val;\n    };\n  }\n}\n\nexports.getStringValidator = getStringValidator;\n\nfunction getFunctionValidator() {\n  if (Global_1.Konva.isUnminified) {\n    return function (val, attr) {\n      if (!Util_1.Util._isFunction(val)) {\n        Util_1.Util.warn(_formatValue(val) + ' is a not valid value for \"' + attr + '\" attribute. The value should be a function.');\n      }\n\n      return val;\n    };\n  }\n}\n\nexports.getFunctionValidator = getFunctionValidator;\n\nfunction getNumberArrayValidator() {\n  if (Global_1.Konva.isUnminified) {\n    return function (val, attr) {\n      if (!Util_1.Util._isArray(val)) {\n        Util_1.Util.warn(_formatValue(val) + ' is a not valid value for \"' + attr + '\" attribute. The value should be a array of numbers.');\n      } else {\n        val.forEach(function (item) {\n          if (!Util_1.Util._isNumber(item)) {\n            Util_1.Util.warn('\"' + attr + '\" attribute has non numeric element ' + item + '. Make sure that all elements are numbers.');\n          }\n        });\n      }\n\n      return val;\n    };\n  }\n}\n\nexports.getNumberArrayValidator = getNumberArrayValidator;\n\nfunction getBooleanValidator() {\n  if (Global_1.Konva.isUnminified) {\n    return function (val, attr) {\n      var isBool = val === true || val === false;\n\n      if (!isBool) {\n        Util_1.Util.warn(_formatValue(val) + ' is a not valid value for \"' + attr + '\" attribute. The value should be a boolean.');\n      }\n\n      return val;\n    };\n  }\n}\n\nexports.getBooleanValidator = getBooleanValidator;\n\nfunction getComponentValidator(components) {\n  if (Global_1.Konva.isUnminified) {\n    return function (val, attr) {\n      if (!Util_1.Util.isObject(val)) {\n        Util_1.Util.warn(_formatValue(val) + ' is a not valid value for \"' + attr + '\" attribute. The value should be an object with properties ' + components);\n      }\n\n      return val;\n    };\n  }\n}\n\nexports.getComponentValidator = getComponentValidator;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Global_1 = require(\"./Global\");\n\nvar Util_1 = require(\"./Util\");\n\nvar Node_1 = require(\"./Node\");\n\nvar Container_1 = require(\"./Container\");\n\nvar Stage_1 = require(\"./Stage\");\n\nvar Layer_1 = require(\"./Layer\");\n\nvar FastLayer_1 = require(\"./FastLayer\");\n\nvar Group_1 = require(\"./Group\");\n\nvar DragAndDrop_1 = require(\"./DragAndDrop\");\n\nvar Shape_1 = require(\"./Shape\");\n\nvar Animation_1 = require(\"./Animation\");\n\nvar Tween_1 = require(\"./Tween\");\n\nvar Context_1 = require(\"./Context\");\n\nvar Canvas_1 = require(\"./Canvas\");\n\nexports.Konva = Util_1.Util._assign(Global_1.Konva, {\n  Collection: Util_1.Collection,\n  Util: Util_1.Util,\n  Node: Node_1.Node,\n  ids: Node_1.ids,\n  names: Node_1.names,\n  Container: Container_1.Container,\n  Stage: Stage_1.Stage,\n  stages: Stage_1.stages,\n  Layer: Layer_1.Layer,\n  FastLayer: FastLayer_1.FastLayer,\n  Group: Group_1.Group,\n  DD: DragAndDrop_1.DD,\n  Shape: Shape_1.Shape,\n  shapes: Shape_1.shapes,\n  Animation: Animation_1.Animation,\n  Tween: Tween_1.Tween,\n  Easings: Tween_1.Easings,\n  Context: Context_1.Context,\n  Canvas: Canvas_1.Canvas\n});","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _CoreInternals_1 = require(\"./_CoreInternals\");\n\nvar Arc_1 = require(\"./shapes/Arc\");\n\nvar Arrow_1 = require(\"./shapes/Arrow\");\n\nvar Circle_1 = require(\"./shapes/Circle\");\n\nvar Ellipse_1 = require(\"./shapes/Ellipse\");\n\nvar Image_1 = require(\"./shapes/Image\");\n\nvar Label_1 = require(\"./shapes/Label\");\n\nvar Line_1 = require(\"./shapes/Line\");\n\nvar Path_1 = require(\"./shapes/Path\");\n\nvar Rect_1 = require(\"./shapes/Rect\");\n\nvar RegularPolygon_1 = require(\"./shapes/RegularPolygon\");\n\nvar Ring_1 = require(\"./shapes/Ring\");\n\nvar Sprite_1 = require(\"./shapes/Sprite\");\n\nvar Star_1 = require(\"./shapes/Star\");\n\nvar Text_1 = require(\"./shapes/Text\");\n\nvar TextPath_1 = require(\"./shapes/TextPath\");\n\nvar Transformer_1 = require(\"./shapes/Transformer\");\n\nvar Wedge_1 = require(\"./shapes/Wedge\");\n\nvar Blur_1 = require(\"./filters/Blur\");\n\nvar Brighten_1 = require(\"./filters/Brighten\");\n\nvar Contrast_1 = require(\"./filters/Contrast\");\n\nvar Emboss_1 = require(\"./filters/Emboss\");\n\nvar Enhance_1 = require(\"./filters/Enhance\");\n\nvar Grayscale_1 = require(\"./filters/Grayscale\");\n\nvar HSL_1 = require(\"./filters/HSL\");\n\nvar HSV_1 = require(\"./filters/HSV\");\n\nvar Invert_1 = require(\"./filters/Invert\");\n\nvar Kaleidoscope_1 = require(\"./filters/Kaleidoscope\");\n\nvar Mask_1 = require(\"./filters/Mask\");\n\nvar Noise_1 = require(\"./filters/Noise\");\n\nvar Pixelate_1 = require(\"./filters/Pixelate\");\n\nvar Posterize_1 = require(\"./filters/Posterize\");\n\nvar RGB_1 = require(\"./filters/RGB\");\n\nvar RGBA_1 = require(\"./filters/RGBA\");\n\nvar Sepia_1 = require(\"./filters/Sepia\");\n\nvar Solarize_1 = require(\"./filters/Solarize\");\n\nvar Threshold_1 = require(\"./filters/Threshold\");\n\nexports.Konva = _CoreInternals_1.Konva.Util._assign(_CoreInternals_1.Konva, {\n  Arc: Arc_1.Arc,\n  Arrow: Arrow_1.Arrow,\n  Circle: Circle_1.Circle,\n  Ellipse: Ellipse_1.Ellipse,\n  Image: Image_1.Image,\n  Label: Label_1.Label,\n  Tag: Label_1.Tag,\n  Line: Line_1.Line,\n  Path: Path_1.Path,\n  Rect: Rect_1.Rect,\n  RegularPolygon: RegularPolygon_1.RegularPolygon,\n  Ring: Ring_1.Ring,\n  Sprite: Sprite_1.Sprite,\n  Star: Star_1.Star,\n  Text: Text_1.Text,\n  TextPath: TextPath_1.TextPath,\n  Transformer: Transformer_1.Transformer,\n  Wedge: Wedge_1.Wedge,\n  Filters: {\n    Blur: Blur_1.Blur,\n    Brighten: Brighten_1.Brighten,\n    Contrast: Contrast_1.Contrast,\n    Emboss: Emboss_1.Emboss,\n    Enhance: Enhance_1.Enhance,\n    Grayscale: Grayscale_1.Grayscale,\n    HSL: HSL_1.HSL,\n    HSV: HSV_1.HSV,\n    Invert: Invert_1.Invert,\n    Kaleidoscope: Kaleidoscope_1.Kaleidoscope,\n    Mask: Mask_1.Mask,\n    Noise: Noise_1.Noise,\n    Pixelate: Pixelate_1.Pixelate,\n    Posterize: Posterize_1.Posterize,\n    RGB: RGB_1.RGB,\n    RGBA: RGBA_1.RGBA,\n    Sepia: Sepia_1.Sepia,\n    Solarize: Solarize_1.Solarize,\n    Threshold: Threshold_1.Threshold\n  }\n});","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Node_1 = require(\"../Node\");\n\nvar Validators_1 = require(\"../Validators\");\n\nfunction BlurStack() {\n  this.r = 0;\n  this.g = 0;\n  this.b = 0;\n  this.a = 0;\n  this.next = null;\n}\n\nvar mul_table = [512, 512, 456, 512, 328, 456, 335, 512, 405, 328, 271, 456, 388, 335, 292, 512, 454, 405, 364, 328, 298, 271, 496, 456, 420, 388, 360, 335, 312, 292, 273, 512, 482, 454, 428, 405, 383, 364, 345, 328, 312, 298, 284, 271, 259, 496, 475, 456, 437, 420, 404, 388, 374, 360, 347, 335, 323, 312, 302, 292, 282, 273, 265, 512, 497, 482, 468, 454, 441, 428, 417, 405, 394, 383, 373, 364, 354, 345, 337, 328, 320, 312, 305, 298, 291, 284, 278, 271, 265, 259, 507, 496, 485, 475, 465, 456, 446, 437, 428, 420, 412, 404, 396, 388, 381, 374, 367, 360, 354, 347, 341, 335, 329, 323, 318, 312, 307, 302, 297, 292, 287, 282, 278, 273, 269, 265, 261, 512, 505, 497, 489, 482, 475, 468, 461, 454, 447, 441, 435, 428, 422, 417, 411, 405, 399, 394, 389, 383, 378, 373, 368, 364, 359, 354, 350, 345, 341, 337, 332, 328, 324, 320, 316, 312, 309, 305, 301, 298, 294, 291, 287, 284, 281, 278, 274, 271, 268, 265, 262, 259, 257, 507, 501, 496, 491, 485, 480, 475, 470, 465, 460, 456, 451, 446, 442, 437, 433, 428, 424, 420, 416, 412, 408, 404, 400, 396, 392, 388, 385, 381, 377, 374, 370, 367, 363, 360, 357, 354, 350, 347, 344, 341, 338, 335, 332, 329, 326, 323, 320, 318, 315, 312, 310, 307, 304, 302, 299, 297, 294, 292, 289, 287, 285, 282, 280, 278, 275, 273, 271, 269, 267, 265, 263, 261, 259];\nvar shg_table = [9, 11, 12, 13, 13, 14, 14, 15, 15, 15, 15, 16, 16, 16, 16, 17, 17, 17, 17, 17, 17, 17, 18, 18, 18, 18, 18, 18, 18, 18, 18, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24];\n\nfunction filterGaussBlurRGBA(imageData, radius) {\n  var pixels = imageData.data,\n      width = imageData.width,\n      height = imageData.height;\n  var x, y, i, p, yp, yi, yw, r_sum, g_sum, b_sum, a_sum, r_out_sum, g_out_sum, b_out_sum, a_out_sum, r_in_sum, g_in_sum, b_in_sum, a_in_sum, pr, pg, pb, pa, rbs;\n  var div = radius + radius + 1,\n      widthMinus1 = width - 1,\n      heightMinus1 = height - 1,\n      radiusPlus1 = radius + 1,\n      sumFactor = radiusPlus1 * (radiusPlus1 + 1) / 2,\n      stackStart = new BlurStack(),\n      stackEnd = null,\n      stack = stackStart,\n      stackIn = null,\n      stackOut = null,\n      mul_sum = mul_table[radius],\n      shg_sum = shg_table[radius];\n\n  for (i = 1; i < div; i++) {\n    stack = stack.next = new BlurStack();\n\n    if (i === radiusPlus1) {\n      stackEnd = stack;\n    }\n  }\n\n  stack.next = stackStart;\n  yw = yi = 0;\n\n  for (y = 0; y < height; y++) {\n    r_in_sum = g_in_sum = b_in_sum = a_in_sum = r_sum = g_sum = b_sum = a_sum = 0;\n    r_out_sum = radiusPlus1 * (pr = pixels[yi]);\n    g_out_sum = radiusPlus1 * (pg = pixels[yi + 1]);\n    b_out_sum = radiusPlus1 * (pb = pixels[yi + 2]);\n    a_out_sum = radiusPlus1 * (pa = pixels[yi + 3]);\n    r_sum += sumFactor * pr;\n    g_sum += sumFactor * pg;\n    b_sum += sumFactor * pb;\n    a_sum += sumFactor * pa;\n    stack = stackStart;\n\n    for (i = 0; i < radiusPlus1; i++) {\n      stack.r = pr;\n      stack.g = pg;\n      stack.b = pb;\n      stack.a = pa;\n      stack = stack.next;\n    }\n\n    for (i = 1; i < radiusPlus1; i++) {\n      p = yi + ((widthMinus1 < i ? widthMinus1 : i) << 2);\n      r_sum += (stack.r = pr = pixels[p]) * (rbs = radiusPlus1 - i);\n      g_sum += (stack.g = pg = pixels[p + 1]) * rbs;\n      b_sum += (stack.b = pb = pixels[p + 2]) * rbs;\n      a_sum += (stack.a = pa = pixels[p + 3]) * rbs;\n      r_in_sum += pr;\n      g_in_sum += pg;\n      b_in_sum += pb;\n      a_in_sum += pa;\n      stack = stack.next;\n    }\n\n    stackIn = stackStart;\n    stackOut = stackEnd;\n\n    for (x = 0; x < width; x++) {\n      pixels[yi + 3] = pa = a_sum * mul_sum >> shg_sum;\n\n      if (pa !== 0) {\n        pa = 255 / pa;\n        pixels[yi] = (r_sum * mul_sum >> shg_sum) * pa;\n        pixels[yi + 1] = (g_sum * mul_sum >> shg_sum) * pa;\n        pixels[yi + 2] = (b_sum * mul_sum >> shg_sum) * pa;\n      } else {\n        pixels[yi] = pixels[yi + 1] = pixels[yi + 2] = 0;\n      }\n\n      r_sum -= r_out_sum;\n      g_sum -= g_out_sum;\n      b_sum -= b_out_sum;\n      a_sum -= a_out_sum;\n      r_out_sum -= stackIn.r;\n      g_out_sum -= stackIn.g;\n      b_out_sum -= stackIn.b;\n      a_out_sum -= stackIn.a;\n      p = yw + ((p = x + radius + 1) < widthMinus1 ? p : widthMinus1) << 2;\n      r_in_sum += stackIn.r = pixels[p];\n      g_in_sum += stackIn.g = pixels[p + 1];\n      b_in_sum += stackIn.b = pixels[p + 2];\n      a_in_sum += stackIn.a = pixels[p + 3];\n      r_sum += r_in_sum;\n      g_sum += g_in_sum;\n      b_sum += b_in_sum;\n      a_sum += a_in_sum;\n      stackIn = stackIn.next;\n      r_out_sum += pr = stackOut.r;\n      g_out_sum += pg = stackOut.g;\n      b_out_sum += pb = stackOut.b;\n      a_out_sum += pa = stackOut.a;\n      r_in_sum -= pr;\n      g_in_sum -= pg;\n      b_in_sum -= pb;\n      a_in_sum -= pa;\n      stackOut = stackOut.next;\n      yi += 4;\n    }\n\n    yw += width;\n  }\n\n  for (x = 0; x < width; x++) {\n    g_in_sum = b_in_sum = a_in_sum = r_in_sum = g_sum = b_sum = a_sum = r_sum = 0;\n    yi = x << 2;\n    r_out_sum = radiusPlus1 * (pr = pixels[yi]);\n    g_out_sum = radiusPlus1 * (pg = pixels[yi + 1]);\n    b_out_sum = radiusPlus1 * (pb = pixels[yi + 2]);\n    a_out_sum = radiusPlus1 * (pa = pixels[yi + 3]);\n    r_sum += sumFactor * pr;\n    g_sum += sumFactor * pg;\n    b_sum += sumFactor * pb;\n    a_sum += sumFactor * pa;\n    stack = stackStart;\n\n    for (i = 0; i < radiusPlus1; i++) {\n      stack.r = pr;\n      stack.g = pg;\n      stack.b = pb;\n      stack.a = pa;\n      stack = stack.next;\n    }\n\n    yp = width;\n\n    for (i = 1; i <= radius; i++) {\n      yi = yp + x << 2;\n      r_sum += (stack.r = pr = pixels[yi]) * (rbs = radiusPlus1 - i);\n      g_sum += (stack.g = pg = pixels[yi + 1]) * rbs;\n      b_sum += (stack.b = pb = pixels[yi + 2]) * rbs;\n      a_sum += (stack.a = pa = pixels[yi + 3]) * rbs;\n      r_in_sum += pr;\n      g_in_sum += pg;\n      b_in_sum += pb;\n      a_in_sum += pa;\n      stack = stack.next;\n\n      if (i < heightMinus1) {\n        yp += width;\n      }\n    }\n\n    yi = x;\n    stackIn = stackStart;\n    stackOut = stackEnd;\n\n    for (y = 0; y < height; y++) {\n      p = yi << 2;\n      pixels[p + 3] = pa = a_sum * mul_sum >> shg_sum;\n\n      if (pa > 0) {\n        pa = 255 / pa;\n        pixels[p] = (r_sum * mul_sum >> shg_sum) * pa;\n        pixels[p + 1] = (g_sum * mul_sum >> shg_sum) * pa;\n        pixels[p + 2] = (b_sum * mul_sum >> shg_sum) * pa;\n      } else {\n        pixels[p] = pixels[p + 1] = pixels[p + 2] = 0;\n      }\n\n      r_sum -= r_out_sum;\n      g_sum -= g_out_sum;\n      b_sum -= b_out_sum;\n      a_sum -= a_out_sum;\n      r_out_sum -= stackIn.r;\n      g_out_sum -= stackIn.g;\n      b_out_sum -= stackIn.b;\n      a_out_sum -= stackIn.a;\n      p = x + ((p = y + radiusPlus1) < heightMinus1 ? p : heightMinus1) * width << 2;\n      r_sum += r_in_sum += stackIn.r = pixels[p];\n      g_sum += g_in_sum += stackIn.g = pixels[p + 1];\n      b_sum += b_in_sum += stackIn.b = pixels[p + 2];\n      a_sum += a_in_sum += stackIn.a = pixels[p + 3];\n      stackIn = stackIn.next;\n      r_out_sum += pr = stackOut.r;\n      g_out_sum += pg = stackOut.g;\n      b_out_sum += pb = stackOut.b;\n      a_out_sum += pa = stackOut.a;\n      r_in_sum -= pr;\n      g_in_sum -= pg;\n      b_in_sum -= pb;\n      a_in_sum -= pa;\n      stackOut = stackOut.next;\n      yi += width;\n    }\n  }\n}\n\nexports.Blur = function Blur(imageData) {\n  var radius = Math.round(this.blurRadius());\n\n  if (radius > 0) {\n    filterGaussBlurRGBA(imageData, radius);\n  }\n};\n\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'blurRadius', 0, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Node_1 = require(\"../Node\");\n\nvar Validators_1 = require(\"../Validators\");\n\nexports.Brighten = function (imageData) {\n  var brightness = this.brightness() * 255,\n      data = imageData.data,\n      len = data.length,\n      i;\n\n  for (i = 0; i < len; i += 4) {\n    data[i] += brightness;\n    data[i + 1] += brightness;\n    data[i + 2] += brightness;\n  }\n};\n\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'brightness', 0, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Node_1 = require(\"../Node\");\n\nvar Validators_1 = require(\"../Validators\");\n\nexports.Contrast = function (imageData) {\n  var adjust = Math.pow((this.contrast() + 100) / 100, 2);\n  var data = imageData.data,\n      nPixels = data.length,\n      red = 150,\n      green = 150,\n      blue = 150,\n      i;\n\n  for (i = 0; i < nPixels; i += 4) {\n    red = data[i];\n    green = data[i + 1];\n    blue = data[i + 2];\n    red /= 255;\n    red -= 0.5;\n    red *= adjust;\n    red += 0.5;\n    red *= 255;\n    green /= 255;\n    green -= 0.5;\n    green *= adjust;\n    green += 0.5;\n    green *= 255;\n    blue /= 255;\n    blue -= 0.5;\n    blue *= adjust;\n    blue += 0.5;\n    blue *= 255;\n    red = red < 0 ? 0 : red > 255 ? 255 : red;\n    green = green < 0 ? 0 : green > 255 ? 255 : green;\n    blue = blue < 0 ? 0 : blue > 255 ? 255 : blue;\n    data[i] = red;\n    data[i + 1] = green;\n    data[i + 2] = blue;\n  }\n};\n\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'contrast', 0, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Node_1 = require(\"../Node\");\n\nvar Util_1 = require(\"../Util\");\n\nvar Validators_1 = require(\"../Validators\");\n\nexports.Emboss = function (imageData) {\n  var strength = this.embossStrength() * 10,\n      greyLevel = this.embossWhiteLevel() * 255,\n      direction = this.embossDirection(),\n      blend = this.embossBlend(),\n      dirY = 0,\n      dirX = 0,\n      data = imageData.data,\n      w = imageData.width,\n      h = imageData.height,\n      w4 = w * 4,\n      y = h;\n\n  switch (direction) {\n    case 'top-left':\n      dirY = -1;\n      dirX = -1;\n      break;\n\n    case 'top':\n      dirY = -1;\n      dirX = 0;\n      break;\n\n    case 'top-right':\n      dirY = -1;\n      dirX = 1;\n      break;\n\n    case 'right':\n      dirY = 0;\n      dirX = 1;\n      break;\n\n    case 'bottom-right':\n      dirY = 1;\n      dirX = 1;\n      break;\n\n    case 'bottom':\n      dirY = 1;\n      dirX = 0;\n      break;\n\n    case 'bottom-left':\n      dirY = 1;\n      dirX = -1;\n      break;\n\n    case 'left':\n      dirY = 0;\n      dirX = -1;\n      break;\n\n    default:\n      Util_1.Util.error('Unknown emboss direction: ' + direction);\n  }\n\n  do {\n    var offsetY = (y - 1) * w4;\n    var otherY = dirY;\n\n    if (y + otherY < 1) {\n      otherY = 0;\n    }\n\n    if (y + otherY > h) {\n      otherY = 0;\n    }\n\n    var offsetYOther = (y - 1 + otherY) * w * 4;\n    var x = w;\n\n    do {\n      var offset = offsetY + (x - 1) * 4;\n      var otherX = dirX;\n\n      if (x + otherX < 1) {\n        otherX = 0;\n      }\n\n      if (x + otherX > w) {\n        otherX = 0;\n      }\n\n      var offsetOther = offsetYOther + (x - 1 + otherX) * 4;\n      var dR = data[offset] - data[offsetOther];\n      var dG = data[offset + 1] - data[offsetOther + 1];\n      var dB = data[offset + 2] - data[offsetOther + 2];\n      var dif = dR;\n      var absDif = dif > 0 ? dif : -dif;\n      var absG = dG > 0 ? dG : -dG;\n      var absB = dB > 0 ? dB : -dB;\n\n      if (absG > absDif) {\n        dif = dG;\n      }\n\n      if (absB > absDif) {\n        dif = dB;\n      }\n\n      dif *= strength;\n\n      if (blend) {\n        var r = data[offset] + dif;\n        var g = data[offset + 1] + dif;\n        var b = data[offset + 2] + dif;\n        data[offset] = r > 255 ? 255 : r < 0 ? 0 : r;\n        data[offset + 1] = g > 255 ? 255 : g < 0 ? 0 : g;\n        data[offset + 2] = b > 255 ? 255 : b < 0 ? 0 : b;\n      } else {\n        var grey = greyLevel - dif;\n\n        if (grey < 0) {\n          grey = 0;\n        } else if (grey > 255) {\n          grey = 255;\n        }\n\n        data[offset] = data[offset + 1] = data[offset + 2] = grey;\n      }\n    } while (--x);\n  } while (--y);\n};\n\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'embossStrength', 0.5, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'embossWhiteLevel', 0.5, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'embossDirection', 'top-left', null, Factory_1.Factory.afterSetFilter);\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'embossBlend', false, null, Factory_1.Factory.afterSetFilter);","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Node_1 = require(\"../Node\");\n\nvar Validators_1 = require(\"../Validators\");\n\nfunction remap(fromValue, fromMin, fromMax, toMin, toMax) {\n  var fromRange = fromMax - fromMin,\n      toRange = toMax - toMin,\n      toValue;\n\n  if (fromRange === 0) {\n    return toMin + toRange / 2;\n  }\n\n  if (toRange === 0) {\n    return toMin;\n  }\n\n  toValue = (fromValue - fromMin) / fromRange;\n  toValue = toRange * toValue + toMin;\n  return toValue;\n}\n\nexports.Enhance = function (imageData) {\n  var data = imageData.data,\n      nSubPixels = data.length,\n      rMin = data[0],\n      rMax = rMin,\n      r,\n      gMin = data[1],\n      gMax = gMin,\n      g,\n      bMin = data[2],\n      bMax = bMin,\n      b,\n      i;\n  var enhanceAmount = this.enhance();\n\n  if (enhanceAmount === 0) {\n    return;\n  }\n\n  for (i = 0; i < nSubPixels; i += 4) {\n    r = data[i + 0];\n\n    if (r < rMin) {\n      rMin = r;\n    } else if (r > rMax) {\n      rMax = r;\n    }\n\n    g = data[i + 1];\n\n    if (g < gMin) {\n      gMin = g;\n    } else if (g > gMax) {\n      gMax = g;\n    }\n\n    b = data[i + 2];\n\n    if (b < bMin) {\n      bMin = b;\n    } else if (b > bMax) {\n      bMax = b;\n    }\n  }\n\n  if (rMax === rMin) {\n    rMax = 255;\n    rMin = 0;\n  }\n\n  if (gMax === gMin) {\n    gMax = 255;\n    gMin = 0;\n  }\n\n  if (bMax === bMin) {\n    bMax = 255;\n    bMin = 0;\n  }\n\n  var rMid, rGoalMax, rGoalMin, gMid, gGoalMax, gGoalMin, bMid, bGoalMax, bGoalMin;\n\n  if (enhanceAmount > 0) {\n    rGoalMax = rMax + enhanceAmount * (255 - rMax);\n    rGoalMin = rMin - enhanceAmount * (rMin - 0);\n    gGoalMax = gMax + enhanceAmount * (255 - gMax);\n    gGoalMin = gMin - enhanceAmount * (gMin - 0);\n    bGoalMax = bMax + enhanceAmount * (255 - bMax);\n    bGoalMin = bMin - enhanceAmount * (bMin - 0);\n  } else {\n    rMid = (rMax + rMin) * 0.5;\n    rGoalMax = rMax + enhanceAmount * (rMax - rMid);\n    rGoalMin = rMin + enhanceAmount * (rMin - rMid);\n    gMid = (gMax + gMin) * 0.5;\n    gGoalMax = gMax + enhanceAmount * (gMax - gMid);\n    gGoalMin = gMin + enhanceAmount * (gMin - gMid);\n    bMid = (bMax + bMin) * 0.5;\n    bGoalMax = bMax + enhanceAmount * (bMax - bMid);\n    bGoalMin = bMin + enhanceAmount * (bMin - bMid);\n  }\n\n  for (i = 0; i < nSubPixels; i += 4) {\n    data[i + 0] = remap(data[i + 0], rMin, rMax, rGoalMin, rGoalMax);\n    data[i + 1] = remap(data[i + 1], gMin, gMax, gGoalMin, gGoalMax);\n    data[i + 2] = remap(data[i + 2], bMin, bMax, bGoalMin, bGoalMax);\n  }\n};\n\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'enhance', 0, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.Grayscale = function (imageData) {\n  var data = imageData.data,\n      len = data.length,\n      i,\n      brightness;\n\n  for (i = 0; i < len; i += 4) {\n    brightness = 0.34 * data[i] + 0.5 * data[i + 1] + 0.16 * data[i + 2];\n    data[i] = brightness;\n    data[i + 1] = brightness;\n    data[i + 2] = brightness;\n  }\n};","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Node_1 = require(\"../Node\");\n\nvar Validators_1 = require(\"../Validators\");\n\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'hue', 0, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'saturation', 0, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'luminance', 0, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);\n\nexports.HSL = function (imageData) {\n  var data = imageData.data,\n      nPixels = data.length,\n      v = 1,\n      s = Math.pow(2, this.saturation()),\n      h = Math.abs(this.hue() + 360) % 360,\n      l = this.luminance() * 127,\n      i;\n  var vsu = v * s * Math.cos(h * Math.PI / 180),\n      vsw = v * s * Math.sin(h * Math.PI / 180);\n  var rr = 0.299 * v + 0.701 * vsu + 0.167 * vsw,\n      rg = 0.587 * v - 0.587 * vsu + 0.33 * vsw,\n      rb = 0.114 * v - 0.114 * vsu - 0.497 * vsw;\n  var gr = 0.299 * v - 0.299 * vsu - 0.328 * vsw,\n      gg = 0.587 * v + 0.413 * vsu + 0.035 * vsw,\n      gb = 0.114 * v - 0.114 * vsu + 0.293 * vsw;\n  var br = 0.299 * v - 0.3 * vsu + 1.25 * vsw,\n      bg = 0.587 * v - 0.586 * vsu - 1.05 * vsw,\n      bb = 0.114 * v + 0.886 * vsu - 0.2 * vsw;\n  var r, g, b, a;\n\n  for (i = 0; i < nPixels; i += 4) {\n    r = data[i + 0];\n    g = data[i + 1];\n    b = data[i + 2];\n    a = data[i + 3];\n    data[i + 0] = rr * r + rg * g + rb * b + l;\n    data[i + 1] = gr * r + gg * g + gb * b + l;\n    data[i + 2] = br * r + bg * g + bb * b + l;\n    data[i + 3] = a;\n  }\n};","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Node_1 = require(\"../Node\");\n\nvar Validators_1 = require(\"../Validators\");\n\nexports.HSV = function (imageData) {\n  var data = imageData.data,\n      nPixels = data.length,\n      v = Math.pow(2, this.value()),\n      s = Math.pow(2, this.saturation()),\n      h = Math.abs(this.hue() + 360) % 360,\n      i;\n  var vsu = v * s * Math.cos(h * Math.PI / 180),\n      vsw = v * s * Math.sin(h * Math.PI / 180);\n  var rr = 0.299 * v + 0.701 * vsu + 0.167 * vsw,\n      rg = 0.587 * v - 0.587 * vsu + 0.33 * vsw,\n      rb = 0.114 * v - 0.114 * vsu - 0.497 * vsw;\n  var gr = 0.299 * v - 0.299 * vsu - 0.328 * vsw,\n      gg = 0.587 * v + 0.413 * vsu + 0.035 * vsw,\n      gb = 0.114 * v - 0.114 * vsu + 0.293 * vsw;\n  var br = 0.299 * v - 0.3 * vsu + 1.25 * vsw,\n      bg = 0.587 * v - 0.586 * vsu - 1.05 * vsw,\n      bb = 0.114 * v + 0.886 * vsu - 0.2 * vsw;\n  var r, g, b, a;\n\n  for (i = 0; i < nPixels; i += 4) {\n    r = data[i + 0];\n    g = data[i + 1];\n    b = data[i + 2];\n    a = data[i + 3];\n    data[i + 0] = rr * r + rg * g + rb * b;\n    data[i + 1] = gr * r + gg * g + gb * b;\n    data[i + 2] = br * r + bg * g + bb * b;\n    data[i + 3] = a;\n  }\n};\n\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'hue', 0, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'saturation', 0, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'value', 0, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.Invert = function (imageData) {\n  var data = imageData.data,\n      len = data.length,\n      i;\n\n  for (i = 0; i < len; i += 4) {\n    data[i] = 255 - data[i];\n    data[i + 1] = 255 - data[i + 1];\n    data[i + 2] = 255 - data[i + 2];\n  }\n};","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Node_1 = require(\"../Node\");\n\nvar Util_1 = require(\"../Util\");\n\nvar Validators_1 = require(\"../Validators\");\n\nvar ToPolar = function ToPolar(src, dst, opt) {\n  var srcPixels = src.data,\n      dstPixels = dst.data,\n      xSize = src.width,\n      ySize = src.height,\n      xMid = opt.polarCenterX || xSize / 2,\n      yMid = opt.polarCenterY || ySize / 2,\n      i,\n      x,\n      y,\n      r = 0,\n      g = 0,\n      b = 0,\n      a = 0;\n  var rad,\n      rMax = Math.sqrt(xMid * xMid + yMid * yMid);\n  x = xSize - xMid;\n  y = ySize - yMid;\n  rad = Math.sqrt(x * x + y * y);\n  rMax = rad > rMax ? rad : rMax;\n  var rSize = ySize,\n      tSize = xSize,\n      radius,\n      theta;\n  var conversion = 360 / tSize * Math.PI / 180,\n      sin,\n      cos;\n\n  for (theta = 0; theta < tSize; theta += 1) {\n    sin = Math.sin(theta * conversion);\n    cos = Math.cos(theta * conversion);\n\n    for (radius = 0; radius < rSize; radius += 1) {\n      x = Math.floor(xMid + rMax * radius / rSize * cos);\n      y = Math.floor(yMid + rMax * radius / rSize * sin);\n      i = (y * xSize + x) * 4;\n      r = srcPixels[i + 0];\n      g = srcPixels[i + 1];\n      b = srcPixels[i + 2];\n      a = srcPixels[i + 3];\n      i = (theta + radius * xSize) * 4;\n      dstPixels[i + 0] = r;\n      dstPixels[i + 1] = g;\n      dstPixels[i + 2] = b;\n      dstPixels[i + 3] = a;\n    }\n  }\n};\n\nvar FromPolar = function FromPolar(src, dst, opt) {\n  var srcPixels = src.data,\n      dstPixels = dst.data,\n      xSize = src.width,\n      ySize = src.height,\n      xMid = opt.polarCenterX || xSize / 2,\n      yMid = opt.polarCenterY || ySize / 2,\n      i,\n      x,\n      y,\n      dx,\n      dy,\n      r = 0,\n      g = 0,\n      b = 0,\n      a = 0;\n  var rad,\n      rMax = Math.sqrt(xMid * xMid + yMid * yMid);\n  x = xSize - xMid;\n  y = ySize - yMid;\n  rad = Math.sqrt(x * x + y * y);\n  rMax = rad > rMax ? rad : rMax;\n  var rSize = ySize,\n      tSize = xSize,\n      radius,\n      theta,\n      phaseShift = opt.polarRotation || 0;\n  var x1, y1;\n\n  for (x = 0; x < xSize; x += 1) {\n    for (y = 0; y < ySize; y += 1) {\n      dx = x - xMid;\n      dy = y - yMid;\n      radius = Math.sqrt(dx * dx + dy * dy) * rSize / rMax;\n      theta = (Math.atan2(dy, dx) * 180 / Math.PI + 360 + phaseShift) % 360;\n      theta = theta * tSize / 360;\n      x1 = Math.floor(theta);\n      y1 = Math.floor(radius);\n      i = (y1 * xSize + x1) * 4;\n      r = srcPixels[i + 0];\n      g = srcPixels[i + 1];\n      b = srcPixels[i + 2];\n      a = srcPixels[i + 3];\n      i = (y * xSize + x) * 4;\n      dstPixels[i + 0] = r;\n      dstPixels[i + 1] = g;\n      dstPixels[i + 2] = b;\n      dstPixels[i + 3] = a;\n    }\n  }\n};\n\nexports.Kaleidoscope = function (imageData) {\n  var xSize = imageData.width,\n      ySize = imageData.height;\n  var x, y, xoff, i, r, g, b, a, srcPos, dstPos;\n  var power = Math.round(this.kaleidoscopePower());\n  var angle = Math.round(this.kaleidoscopeAngle());\n  var offset = Math.floor(xSize * (angle % 360) / 360);\n\n  if (power < 1) {\n    return;\n  }\n\n  var tempCanvas = Util_1.Util.createCanvasElement();\n  tempCanvas.width = xSize;\n  tempCanvas.height = ySize;\n  var scratchData = tempCanvas.getContext('2d').getImageData(0, 0, xSize, ySize);\n  ToPolar(imageData, scratchData, {\n    polarCenterX: xSize / 2,\n    polarCenterY: ySize / 2\n  });\n  var minSectionSize = xSize / Math.pow(2, power);\n\n  while (minSectionSize <= 8) {\n    minSectionSize = minSectionSize * 2;\n    power -= 1;\n  }\n\n  minSectionSize = Math.ceil(minSectionSize);\n  var sectionSize = minSectionSize;\n  var xStart = 0,\n      xEnd = sectionSize,\n      xDelta = 1;\n\n  if (offset + minSectionSize > xSize) {\n    xStart = sectionSize;\n    xEnd = 0;\n    xDelta = -1;\n  }\n\n  for (y = 0; y < ySize; y += 1) {\n    for (x = xStart; x !== xEnd; x += xDelta) {\n      xoff = Math.round(x + offset) % xSize;\n      srcPos = (xSize * y + xoff) * 4;\n      r = scratchData.data[srcPos + 0];\n      g = scratchData.data[srcPos + 1];\n      b = scratchData.data[srcPos + 2];\n      a = scratchData.data[srcPos + 3];\n      dstPos = (xSize * y + x) * 4;\n      scratchData.data[dstPos + 0] = r;\n      scratchData.data[dstPos + 1] = g;\n      scratchData.data[dstPos + 2] = b;\n      scratchData.data[dstPos + 3] = a;\n    }\n  }\n\n  for (y = 0; y < ySize; y += 1) {\n    sectionSize = Math.floor(minSectionSize);\n\n    for (i = 0; i < power; i += 1) {\n      for (x = 0; x < sectionSize + 1; x += 1) {\n        srcPos = (xSize * y + x) * 4;\n        r = scratchData.data[srcPos + 0];\n        g = scratchData.data[srcPos + 1];\n        b = scratchData.data[srcPos + 2];\n        a = scratchData.data[srcPos + 3];\n        dstPos = (xSize * y + sectionSize * 2 - x - 1) * 4;\n        scratchData.data[dstPos + 0] = r;\n        scratchData.data[dstPos + 1] = g;\n        scratchData.data[dstPos + 2] = b;\n        scratchData.data[dstPos + 3] = a;\n      }\n\n      sectionSize *= 2;\n    }\n  }\n\n  FromPolar(scratchData, imageData, {\n    polarRotation: 0\n  });\n};\n\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'kaleidoscopePower', 2, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'kaleidoscopeAngle', 0, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Node_1 = require(\"../Node\");\n\nvar Validators_1 = require(\"../Validators\");\n\nfunction pixelAt(idata, x, y) {\n  var idx = (y * idata.width + x) * 4;\n  var d = [];\n  d.push(idata.data[idx++], idata.data[idx++], idata.data[idx++], idata.data[idx++]);\n  return d;\n}\n\nfunction rgbDistance(p1, p2) {\n  return Math.sqrt(Math.pow(p1[0] - p2[0], 2) + Math.pow(p1[1] - p2[1], 2) + Math.pow(p1[2] - p2[2], 2));\n}\n\nfunction rgbMean(pTab) {\n  var m = [0, 0, 0];\n\n  for (var i = 0; i < pTab.length; i++) {\n    m[0] += pTab[i][0];\n    m[1] += pTab[i][1];\n    m[2] += pTab[i][2];\n  }\n\n  m[0] /= pTab.length;\n  m[1] /= pTab.length;\n  m[2] /= pTab.length;\n  return m;\n}\n\nfunction backgroundMask(idata, threshold) {\n  var rgbv_no = pixelAt(idata, 0, 0);\n  var rgbv_ne = pixelAt(idata, idata.width - 1, 0);\n  var rgbv_so = pixelAt(idata, 0, idata.height - 1);\n  var rgbv_se = pixelAt(idata, idata.width - 1, idata.height - 1);\n  var thres = threshold || 10;\n\n  if (rgbDistance(rgbv_no, rgbv_ne) < thres && rgbDistance(rgbv_ne, rgbv_se) < thres && rgbDistance(rgbv_se, rgbv_so) < thres && rgbDistance(rgbv_so, rgbv_no) < thres) {\n    var mean = rgbMean([rgbv_ne, rgbv_no, rgbv_se, rgbv_so]);\n    var mask = [];\n\n    for (var i = 0; i < idata.width * idata.height; i++) {\n      var d = rgbDistance(mean, [idata.data[i * 4], idata.data[i * 4 + 1], idata.data[i * 4 + 2]]);\n      mask[i] = d < thres ? 0 : 255;\n    }\n\n    return mask;\n  }\n}\n\nfunction applyMask(idata, mask) {\n  for (var i = 0; i < idata.width * idata.height; i++) {\n    idata.data[4 * i + 3] = mask[i];\n  }\n}\n\nfunction erodeMask(mask, sw, sh) {\n  var weights = [1, 1, 1, 1, 0, 1, 1, 1, 1];\n  var side = Math.round(Math.sqrt(weights.length));\n  var halfSide = Math.floor(side / 2);\n  var maskResult = [];\n\n  for (var y = 0; y < sh; y++) {\n    for (var x = 0; x < sw; x++) {\n      var so = y * sw + x;\n      var a = 0;\n\n      for (var cy = 0; cy < side; cy++) {\n        for (var cx = 0; cx < side; cx++) {\n          var scy = y + cy - halfSide;\n          var scx = x + cx - halfSide;\n\n          if (scy >= 0 && scy < sh && scx >= 0 && scx < sw) {\n            var srcOff = scy * sw + scx;\n            var wt = weights[cy * side + cx];\n            a += mask[srcOff] * wt;\n          }\n        }\n      }\n\n      maskResult[so] = a === 255 * 8 ? 255 : 0;\n    }\n  }\n\n  return maskResult;\n}\n\nfunction dilateMask(mask, sw, sh) {\n  var weights = [1, 1, 1, 1, 1, 1, 1, 1, 1];\n  var side = Math.round(Math.sqrt(weights.length));\n  var halfSide = Math.floor(side / 2);\n  var maskResult = [];\n\n  for (var y = 0; y < sh; y++) {\n    for (var x = 0; x < sw; x++) {\n      var so = y * sw + x;\n      var a = 0;\n\n      for (var cy = 0; cy < side; cy++) {\n        for (var cx = 0; cx < side; cx++) {\n          var scy = y + cy - halfSide;\n          var scx = x + cx - halfSide;\n\n          if (scy >= 0 && scy < sh && scx >= 0 && scx < sw) {\n            var srcOff = scy * sw + scx;\n            var wt = weights[cy * side + cx];\n            a += mask[srcOff] * wt;\n          }\n        }\n      }\n\n      maskResult[so] = a >= 255 * 4 ? 255 : 0;\n    }\n  }\n\n  return maskResult;\n}\n\nfunction smoothEdgeMask(mask, sw, sh) {\n  var weights = [1 / 9, 1 / 9, 1 / 9, 1 / 9, 1 / 9, 1 / 9, 1 / 9, 1 / 9, 1 / 9];\n  var side = Math.round(Math.sqrt(weights.length));\n  var halfSide = Math.floor(side / 2);\n  var maskResult = [];\n\n  for (var y = 0; y < sh; y++) {\n    for (var x = 0; x < sw; x++) {\n      var so = y * sw + x;\n      var a = 0;\n\n      for (var cy = 0; cy < side; cy++) {\n        for (var cx = 0; cx < side; cx++) {\n          var scy = y + cy - halfSide;\n          var scx = x + cx - halfSide;\n\n          if (scy >= 0 && scy < sh && scx >= 0 && scx < sw) {\n            var srcOff = scy * sw + scx;\n            var wt = weights[cy * side + cx];\n            a += mask[srcOff] * wt;\n          }\n        }\n      }\n\n      maskResult[so] = a;\n    }\n  }\n\n  return maskResult;\n}\n\nexports.Mask = function (imageData) {\n  var threshold = this.threshold(),\n      mask = backgroundMask(imageData, threshold);\n\n  if (mask) {\n    mask = erodeMask(mask, imageData.width, imageData.height);\n    mask = dilateMask(mask, imageData.width, imageData.height);\n    mask = smoothEdgeMask(mask, imageData.width, imageData.height);\n    applyMask(imageData, mask);\n  }\n\n  return imageData;\n};\n\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'threshold', 0, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Node_1 = require(\"../Node\");\n\nvar Validators_1 = require(\"../Validators\");\n\nexports.Noise = function (imageData) {\n  var amount = this.noise() * 255,\n      data = imageData.data,\n      nPixels = data.length,\n      half = amount / 2,\n      i;\n\n  for (i = 0; i < nPixels; i += 4) {\n    data[i + 0] += half - 2 * half * Math.random();\n    data[i + 1] += half - 2 * half * Math.random();\n    data[i + 2] += half - 2 * half * Math.random();\n  }\n};\n\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'noise', 0.2, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Util_1 = require(\"../Util\");\n\nvar Node_1 = require(\"../Node\");\n\nvar Validators_1 = require(\"../Validators\");\n\nexports.Pixelate = function (imageData) {\n  var pixelSize = Math.ceil(this.pixelSize()),\n      width = imageData.width,\n      height = imageData.height,\n      x,\n      y,\n      i,\n      red,\n      green,\n      blue,\n      alpha,\n      nBinsX = Math.ceil(width / pixelSize),\n      nBinsY = Math.ceil(height / pixelSize),\n      xBinStart,\n      xBinEnd,\n      yBinStart,\n      yBinEnd,\n      xBin,\n      yBin,\n      pixelsInBin,\n      data = imageData.data;\n\n  if (pixelSize <= 0) {\n    Util_1.Util.error('pixelSize value can not be <= 0');\n    return;\n  }\n\n  for (xBin = 0; xBin < nBinsX; xBin += 1) {\n    for (yBin = 0; yBin < nBinsY; yBin += 1) {\n      red = 0;\n      green = 0;\n      blue = 0;\n      alpha = 0;\n      xBinStart = xBin * pixelSize;\n      xBinEnd = xBinStart + pixelSize;\n      yBinStart = yBin * pixelSize;\n      yBinEnd = yBinStart + pixelSize;\n      pixelsInBin = 0;\n\n      for (x = xBinStart; x < xBinEnd; x += 1) {\n        if (x >= width) {\n          continue;\n        }\n\n        for (y = yBinStart; y < yBinEnd; y += 1) {\n          if (y >= height) {\n            continue;\n          }\n\n          i = (width * y + x) * 4;\n          red += data[i + 0];\n          green += data[i + 1];\n          blue += data[i + 2];\n          alpha += data[i + 3];\n          pixelsInBin += 1;\n        }\n      }\n\n      red = red / pixelsInBin;\n      green = green / pixelsInBin;\n      blue = blue / pixelsInBin;\n      alpha = alpha / pixelsInBin;\n\n      for (x = xBinStart; x < xBinEnd; x += 1) {\n        if (x >= width) {\n          continue;\n        }\n\n        for (y = yBinStart; y < yBinEnd; y += 1) {\n          if (y >= height) {\n            continue;\n          }\n\n          i = (width * y + x) * 4;\n          data[i + 0] = red;\n          data[i + 1] = green;\n          data[i + 2] = blue;\n          data[i + 3] = alpha;\n        }\n      }\n    }\n  }\n};\n\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'pixelSize', 8, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Node_1 = require(\"../Node\");\n\nvar Validators_1 = require(\"../Validators\");\n\nexports.Posterize = function (imageData) {\n  var levels = Math.round(this.levels() * 254) + 1,\n      data = imageData.data,\n      len = data.length,\n      scale = 255 / levels,\n      i;\n\n  for (i = 0; i < len; i += 1) {\n    data[i] = Math.floor(data[i] / scale) * scale;\n  }\n};\n\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'levels', 0.5, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Node_1 = require(\"../Node\");\n\nvar Validators_1 = require(\"../Validators\");\n\nexports.RGB = function (imageData) {\n  var data = imageData.data,\n      nPixels = data.length,\n      red = this.red(),\n      green = this.green(),\n      blue = this.blue(),\n      i,\n      brightness;\n\n  for (i = 0; i < nPixels; i += 4) {\n    brightness = (0.34 * data[i] + 0.5 * data[i + 1] + 0.16 * data[i + 2]) / 255;\n    data[i] = brightness * red;\n    data[i + 1] = brightness * green;\n    data[i + 2] = brightness * blue;\n    data[i + 3] = data[i + 3];\n  }\n};\n\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'red', 0, function (val) {\n  this._filterUpToDate = false;\n\n  if (val > 255) {\n    return 255;\n  } else if (val < 0) {\n    return 0;\n  } else {\n    return Math.round(val);\n  }\n});\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'green', 0, function (val) {\n  this._filterUpToDate = false;\n\n  if (val > 255) {\n    return 255;\n  } else if (val < 0) {\n    return 0;\n  } else {\n    return Math.round(val);\n  }\n});\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'blue', 0, Validators_1.RGBComponent, Factory_1.Factory.afterSetFilter);","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Node_1 = require(\"../Node\");\n\nvar Validators_1 = require(\"../Validators\");\n\nexports.RGBA = function (imageData) {\n  var data = imageData.data,\n      nPixels = data.length,\n      red = this.red(),\n      green = this.green(),\n      blue = this.blue(),\n      alpha = this.alpha(),\n      i,\n      ia;\n\n  for (i = 0; i < nPixels; i += 4) {\n    ia = 1 - alpha;\n    data[i] = red * alpha + data[i] * ia;\n    data[i + 1] = green * alpha + data[i + 1] * ia;\n    data[i + 2] = blue * alpha + data[i + 2] * ia;\n  }\n};\n\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'red', 0, function (val) {\n  this._filterUpToDate = false;\n\n  if (val > 255) {\n    return 255;\n  } else if (val < 0) {\n    return 0;\n  } else {\n    return Math.round(val);\n  }\n});\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'green', 0, function (val) {\n  this._filterUpToDate = false;\n\n  if (val > 255) {\n    return 255;\n  } else if (val < 0) {\n    return 0;\n  } else {\n    return Math.round(val);\n  }\n});\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'blue', 0, Validators_1.RGBComponent, Factory_1.Factory.afterSetFilter);\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'alpha', 1, function (val) {\n  this._filterUpToDate = false;\n\n  if (val > 1) {\n    return 1;\n  } else if (val < 0) {\n    return 0;\n  } else {\n    return val;\n  }\n});","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.Sepia = function (imageData) {\n  var data = imageData.data,\n      nPixels = data.length,\n      i,\n      r,\n      g,\n      b;\n\n  for (i = 0; i < nPixels; i += 4) {\n    r = data[i + 0];\n    g = data[i + 1];\n    b = data[i + 2];\n    data[i + 0] = Math.min(255, r * 0.393 + g * 0.769 + b * 0.189);\n    data[i + 1] = Math.min(255, r * 0.349 + g * 0.686 + b * 0.168);\n    data[i + 2] = Math.min(255, r * 0.272 + g * 0.534 + b * 0.131);\n  }\n};","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.Solarize = function (imageData) {\n  var data = imageData.data,\n      w = imageData.width,\n      h = imageData.height,\n      w4 = w * 4,\n      y = h;\n\n  do {\n    var offsetY = (y - 1) * w4;\n    var x = w;\n\n    do {\n      var offset = offsetY + (x - 1) * 4;\n      var r = data[offset];\n      var g = data[offset + 1];\n      var b = data[offset + 2];\n\n      if (r > 127) {\n        r = 255 - r;\n      }\n\n      if (g > 127) {\n        g = 255 - g;\n      }\n\n      if (b > 127) {\n        b = 255 - b;\n      }\n\n      data[offset] = r;\n      data[offset + 1] = g;\n      data[offset + 2] = b;\n    } while (--x);\n  } while (--y);\n};","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Node_1 = require(\"../Node\");\n\nvar Validators_1 = require(\"../Validators\");\n\nexports.Threshold = function (imageData) {\n  var level = this.threshold() * 255,\n      data = imageData.data,\n      len = data.length,\n      i;\n\n  for (i = 0; i < len; i += 1) {\n    data[i] = data[i] < level ? 0 : 255;\n  }\n};\n\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'threshold', 0.5, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);","var Konva = require('./_FullInternals').Konva;\n\nKonva._injectGlobal(Konva);\n\nexports['default'] = Konva;\nmodule.exports = exports['default'];","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Util_1 = require(\"../Util\");\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Shape_1 = require(\"../Shape\");\n\nvar Global_1 = require(\"../Global\");\n\nvar Validators_1 = require(\"../Validators\");\n\nvar Global_2 = require(\"../Global\");\n\nvar Arc = function (_super) {\n  __extends(Arc, _super);\n\n  function Arc() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  Arc.prototype._sceneFunc = function (context) {\n    var angle = Global_1.Konva.getAngle(this.angle()),\n        clockwise = this.clockwise();\n    context.beginPath();\n    context.arc(0, 0, this.outerRadius(), 0, angle, clockwise);\n    context.arc(0, 0, this.innerRadius(), angle, 0, !clockwise);\n    context.closePath();\n    context.fillStrokeShape(this);\n  };\n\n  Arc.prototype.getWidth = function () {\n    return this.outerRadius() * 2;\n  };\n\n  Arc.prototype.getHeight = function () {\n    return this.outerRadius() * 2;\n  };\n\n  Arc.prototype.setWidth = function (width) {\n    this.outerRadius(width / 2);\n  };\n\n  Arc.prototype.setHeight = function (height) {\n    this.outerRadius(height / 2);\n  };\n\n  return Arc;\n}(Shape_1.Shape);\n\nexports.Arc = Arc;\nArc.prototype._centroid = true;\nArc.prototype.className = 'Arc';\nArc.prototype._attrsAffectingSize = ['innerRadius', 'outerRadius'];\n\nGlobal_2._registerNode(Arc);\n\nFactory_1.Factory.addGetterSetter(Arc, 'innerRadius', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Arc, 'outerRadius', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Arc, 'angle', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Arc, 'clockwise', false, Validators_1.getBooleanValidator());\nUtil_1.Collection.mapMethods(Arc);","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Util_1 = require(\"../Util\");\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Line_1 = require(\"./Line\");\n\nvar Validators_1 = require(\"../Validators\");\n\nvar Global_1 = require(\"../Global\");\n\nvar Arrow = function (_super) {\n  __extends(Arrow, _super);\n\n  function Arrow() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  Arrow.prototype._sceneFunc = function (ctx) {\n    _super.prototype._sceneFunc.call(this, ctx);\n\n    var PI2 = Math.PI * 2;\n    var points = this.points();\n    var tp = points;\n    var fromTension = this.tension() !== 0 && points.length > 4;\n\n    if (fromTension) {\n      tp = this.getTensionPoints();\n    }\n\n    var n = points.length;\n    var dx, dy;\n\n    if (fromTension) {\n      dx = points[n - 2] - tp[n - 2];\n      dy = points[n - 1] - tp[n - 1];\n    } else {\n      dx = points[n - 2] - points[n - 4];\n      dy = points[n - 1] - points[n - 3];\n    }\n\n    var radians = (Math.atan2(dy, dx) + PI2) % PI2;\n    var length = this.pointerLength();\n    var width = this.pointerWidth();\n    ctx.save();\n    ctx.beginPath();\n    ctx.translate(points[n - 2], points[n - 1]);\n    ctx.rotate(radians);\n    ctx.moveTo(0, 0);\n    ctx.lineTo(-length, width / 2);\n    ctx.lineTo(-length, -width / 2);\n    ctx.closePath();\n    ctx.restore();\n\n    if (this.pointerAtBeginning()) {\n      ctx.save();\n      ctx.translate(points[0], points[1]);\n\n      if (fromTension) {\n        dx = tp[0] - points[0];\n        dy = tp[1] - points[1];\n      } else {\n        dx = points[2] - points[0];\n        dy = points[3] - points[1];\n      }\n\n      ctx.rotate((Math.atan2(-dy, -dx) + PI2) % PI2);\n      ctx.moveTo(0, 0);\n      ctx.lineTo(-length, width / 2);\n      ctx.lineTo(-length, -width / 2);\n      ctx.closePath();\n      ctx.restore();\n    }\n\n    var isDashEnabled = this.dashEnabled();\n\n    if (isDashEnabled) {\n      this.attrs.dashEnabled = false;\n      ctx.setLineDash([]);\n    }\n\n    ctx.fillStrokeShape(this);\n\n    if (isDashEnabled) {\n      this.attrs.dashEnabled = true;\n    }\n  };\n\n  return Arrow;\n}(Line_1.Line);\n\nexports.Arrow = Arrow;\nArrow.prototype.className = 'Arrow';\n\nGlobal_1._registerNode(Arrow);\n\nFactory_1.Factory.addGetterSetter(Arrow, 'pointerLength', 10, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Arrow, 'pointerWidth', 10, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Arrow, 'pointerAtBeginning', false);\nUtil_1.Collection.mapMethods(Arrow);","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Util_1 = require(\"../Util\");\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Shape_1 = require(\"../Shape\");\n\nvar Validators_1 = require(\"../Validators\");\n\nvar Global_1 = require(\"../Global\");\n\nvar Circle = function (_super) {\n  __extends(Circle, _super);\n\n  function Circle() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  Circle.prototype._sceneFunc = function (context) {\n    context.beginPath();\n    context.arc(0, 0, this.radius(), 0, Math.PI * 2, false);\n    context.closePath();\n    context.fillStrokeShape(this);\n  };\n\n  Circle.prototype.getWidth = function () {\n    return this.radius() * 2;\n  };\n\n  Circle.prototype.getHeight = function () {\n    return this.radius() * 2;\n  };\n\n  Circle.prototype.setWidth = function (width) {\n    if (this.radius() !== width / 2) {\n      this.radius(width / 2);\n    }\n  };\n\n  Circle.prototype.setHeight = function (height) {\n    if (this.radius() !== height / 2) {\n      this.radius(height / 2);\n    }\n  };\n\n  return Circle;\n}(Shape_1.Shape);\n\nexports.Circle = Circle;\nCircle.prototype._centroid = true;\nCircle.prototype.className = 'Circle';\nCircle.prototype._attrsAffectingSize = ['radius'];\n\nGlobal_1._registerNode(Circle);\n\nFactory_1.Factory.addGetterSetter(Circle, 'radius', 0, Validators_1.getNumberValidator());\nUtil_1.Collection.mapMethods(Circle);","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Util_1 = require(\"../Util\");\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Shape_1 = require(\"../Shape\");\n\nvar Validators_1 = require(\"../Validators\");\n\nvar Global_1 = require(\"../Global\");\n\nvar Ellipse = function (_super) {\n  __extends(Ellipse, _super);\n\n  function Ellipse() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  Ellipse.prototype._sceneFunc = function (context) {\n    var rx = this.radiusX(),\n        ry = this.radiusY();\n    context.beginPath();\n    context.save();\n\n    if (rx !== ry) {\n      context.scale(1, ry / rx);\n    }\n\n    context.arc(0, 0, rx, 0, Math.PI * 2, false);\n    context.restore();\n    context.closePath();\n    context.fillStrokeShape(this);\n  };\n\n  Ellipse.prototype.getWidth = function () {\n    return this.radiusX() * 2;\n  };\n\n  Ellipse.prototype.getHeight = function () {\n    return this.radiusY() * 2;\n  };\n\n  Ellipse.prototype.setWidth = function (width) {\n    this.radiusX(width / 2);\n  };\n\n  Ellipse.prototype.setHeight = function (height) {\n    this.radiusY(height / 2);\n  };\n\n  return Ellipse;\n}(Shape_1.Shape);\n\nexports.Ellipse = Ellipse;\nEllipse.prototype.className = 'Ellipse';\nEllipse.prototype._centroid = true;\nEllipse.prototype._attrsAffectingSize = ['radiusX', 'radiusY'];\n\nGlobal_1._registerNode(Ellipse);\n\nFactory_1.Factory.addComponentsGetterSetter(Ellipse, 'radius', ['x', 'y']);\nFactory_1.Factory.addGetterSetter(Ellipse, 'radiusX', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Ellipse, 'radiusY', 0, Validators_1.getNumberValidator());\nUtil_1.Collection.mapMethods(Ellipse);","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Util_1 = require(\"../Util\");\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Shape_1 = require(\"../Shape\");\n\nvar Validators_1 = require(\"../Validators\");\n\nvar Global_1 = require(\"../Global\");\n\nvar Image = function (_super) {\n  __extends(Image, _super);\n\n  function Image() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  Image.prototype._useBufferCanvas = function () {\n    return !!((this.hasShadow() || this.getAbsoluteOpacity() !== 1) && this.hasStroke() && this.getStage());\n  };\n\n  Image.prototype._sceneFunc = function (context) {\n    var width = this.width(),\n        height = this.height(),\n        image = this.image(),\n        cropWidth,\n        cropHeight,\n        params;\n\n    if (image) {\n      cropWidth = this.cropWidth();\n      cropHeight = this.cropHeight();\n\n      if (cropWidth && cropHeight) {\n        params = [image, this.cropX(), this.cropY(), cropWidth, cropHeight, 0, 0, width, height];\n      } else {\n        params = [image, 0, 0, width, height];\n      }\n    }\n\n    if (this.hasFill() || this.hasStroke()) {\n      context.beginPath();\n      context.rect(0, 0, width, height);\n      context.closePath();\n      context.fillStrokeShape(this);\n    }\n\n    if (image) {\n      context.drawImage.apply(context, params);\n    }\n  };\n\n  Image.prototype._hitFunc = function (context) {\n    var width = this.width(),\n        height = this.height();\n    context.beginPath();\n    context.rect(0, 0, width, height);\n    context.closePath();\n    context.fillStrokeShape(this);\n  };\n\n  Image.prototype.getWidth = function () {\n    var image = this.image();\n    return this.attrs.width || (image ? image.width : 0);\n  };\n\n  Image.prototype.getHeight = function () {\n    var image = this.image();\n    return this.attrs.height || (image ? image.height : 0);\n  };\n\n  Image.fromURL = function (url, callback) {\n    var img = Util_1.Util.createImageElement();\n\n    img.onload = function () {\n      var image = new Image({\n        image: img\n      });\n      callback(image);\n    };\n\n    img.crossOrigin = 'Anonymous';\n    img.src = url;\n  };\n\n  return Image;\n}(Shape_1.Shape);\n\nexports.Image = Image;\nImage.prototype.className = 'Image';\n\nGlobal_1._registerNode(Image);\n\nFactory_1.Factory.addGetterSetter(Image, 'image');\nFactory_1.Factory.addComponentsGetterSetter(Image, 'crop', ['x', 'y', 'width', 'height']);\nFactory_1.Factory.addGetterSetter(Image, 'cropX', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Image, 'cropY', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Image, 'cropWidth', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Image, 'cropHeight', 0, Validators_1.getNumberValidator());\nUtil_1.Collection.mapMethods(Image);","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Util_1 = require(\"../Util\");\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Shape_1 = require(\"../Shape\");\n\nvar Group_1 = require(\"../Group\");\n\nvar Validators_1 = require(\"../Validators\");\n\nvar Global_1 = require(\"../Global\");\n\nvar ATTR_CHANGE_LIST = ['fontFamily', 'fontSize', 'fontStyle', 'padding', 'lineHeight', 'text', 'width'],\n    CHANGE_KONVA = 'Change.konva',\n    NONE = 'none',\n    UP = 'up',\n    RIGHT = 'right',\n    DOWN = 'down',\n    LEFT = 'left',\n    attrChangeListLen = ATTR_CHANGE_LIST.length;\n\nvar Label = function (_super) {\n  __extends(Label, _super);\n\n  function Label(config) {\n    var _this = _super.call(this, config) || this;\n\n    _this.on('add.konva', function (evt) {\n      this._addListeners(evt.child);\n\n      this._sync();\n    });\n\n    return _this;\n  }\n\n  Label.prototype.getText = function () {\n    return this.find('Text')[0];\n  };\n\n  Label.prototype.getTag = function () {\n    return this.find('Tag')[0];\n  };\n\n  Label.prototype._addListeners = function (text) {\n    var that = this,\n        n;\n\n    var func = function func() {\n      that._sync();\n    };\n\n    for (n = 0; n < attrChangeListLen; n++) {\n      text.on(ATTR_CHANGE_LIST[n] + CHANGE_KONVA, func);\n    }\n  };\n\n  Label.prototype.getWidth = function () {\n    return this.getText().width();\n  };\n\n  Label.prototype.getHeight = function () {\n    return this.getText().height();\n  };\n\n  Label.prototype._sync = function () {\n    var text = this.getText(),\n        tag = this.getTag(),\n        width,\n        height,\n        pointerDirection,\n        pointerWidth,\n        x,\n        y,\n        pointerHeight;\n\n    if (text && tag) {\n      width = text.width();\n      height = text.height();\n      pointerDirection = tag.pointerDirection();\n      pointerWidth = tag.pointerWidth();\n      pointerHeight = tag.pointerHeight();\n      x = 0;\n      y = 0;\n\n      switch (pointerDirection) {\n        case UP:\n          x = width / 2;\n          y = -1 * pointerHeight;\n          break;\n\n        case RIGHT:\n          x = width + pointerWidth;\n          y = height / 2;\n          break;\n\n        case DOWN:\n          x = width / 2;\n          y = height + pointerHeight;\n          break;\n\n        case LEFT:\n          x = -1 * pointerWidth;\n          y = height / 2;\n          break;\n      }\n\n      tag.setAttrs({\n        x: -1 * x,\n        y: -1 * y,\n        width: width,\n        height: height\n      });\n      text.setAttrs({\n        x: -1 * x,\n        y: -1 * y\n      });\n    }\n  };\n\n  return Label;\n}(Group_1.Group);\n\nexports.Label = Label;\nLabel.prototype.className = 'Label';\n\nGlobal_1._registerNode(Label);\n\nUtil_1.Collection.mapMethods(Label);\n\nvar Tag = function (_super) {\n  __extends(Tag, _super);\n\n  function Tag() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  Tag.prototype._sceneFunc = function (context) {\n    var width = this.width(),\n        height = this.height(),\n        pointerDirection = this.pointerDirection(),\n        pointerWidth = this.pointerWidth(),\n        pointerHeight = this.pointerHeight(),\n        cornerRadius = Math.min(this.cornerRadius(), width / 2, height / 2);\n    context.beginPath();\n\n    if (!cornerRadius) {\n      context.moveTo(0, 0);\n    } else {\n      context.moveTo(cornerRadius, 0);\n    }\n\n    if (pointerDirection === UP) {\n      context.lineTo((width - pointerWidth) / 2, 0);\n      context.lineTo(width / 2, -1 * pointerHeight);\n      context.lineTo((width + pointerWidth) / 2, 0);\n    }\n\n    if (!cornerRadius) {\n      context.lineTo(width, 0);\n    } else {\n      context.lineTo(width - cornerRadius, 0);\n      context.arc(width - cornerRadius, cornerRadius, cornerRadius, Math.PI * 3 / 2, 0, false);\n    }\n\n    if (pointerDirection === RIGHT) {\n      context.lineTo(width, (height - pointerHeight) / 2);\n      context.lineTo(width + pointerWidth, height / 2);\n      context.lineTo(width, (height + pointerHeight) / 2);\n    }\n\n    if (!cornerRadius) {\n      context.lineTo(width, height);\n    } else {\n      context.lineTo(width, height - cornerRadius);\n      context.arc(width - cornerRadius, height - cornerRadius, cornerRadius, 0, Math.PI / 2, false);\n    }\n\n    if (pointerDirection === DOWN) {\n      context.lineTo((width + pointerWidth) / 2, height);\n      context.lineTo(width / 2, height + pointerHeight);\n      context.lineTo((width - pointerWidth) / 2, height);\n    }\n\n    if (!cornerRadius) {\n      context.lineTo(0, height);\n    } else {\n      context.lineTo(cornerRadius, height);\n      context.arc(cornerRadius, height - cornerRadius, cornerRadius, Math.PI / 2, Math.PI, false);\n    }\n\n    if (pointerDirection === LEFT) {\n      context.lineTo(0, (height + pointerHeight) / 2);\n      context.lineTo(-1 * pointerWidth, height / 2);\n      context.lineTo(0, (height - pointerHeight) / 2);\n    }\n\n    if (cornerRadius) {\n      context.lineTo(0, cornerRadius);\n      context.arc(cornerRadius, cornerRadius, cornerRadius, Math.PI, Math.PI * 3 / 2, false);\n    }\n\n    context.closePath();\n    context.fillStrokeShape(this);\n  };\n\n  Tag.prototype.getSelfRect = function () {\n    var x = 0,\n        y = 0,\n        pointerWidth = this.pointerWidth(),\n        pointerHeight = this.pointerHeight(),\n        direction = this.pointerDirection(),\n        width = this.width(),\n        height = this.height();\n\n    if (direction === UP) {\n      y -= pointerHeight;\n      height += pointerHeight;\n    } else if (direction === DOWN) {\n      height += pointerHeight;\n    } else if (direction === LEFT) {\n      x -= pointerWidth * 1.5;\n      width += pointerWidth;\n    } else if (direction === RIGHT) {\n      width += pointerWidth * 1.5;\n    }\n\n    return {\n      x: x,\n      y: y,\n      width: width,\n      height: height\n    };\n  };\n\n  return Tag;\n}(Shape_1.Shape);\n\nexports.Tag = Tag;\nTag.prototype.className = 'Tag';\n\nGlobal_1._registerNode(Tag);\n\nFactory_1.Factory.addGetterSetter(Tag, 'pointerDirection', NONE);\nFactory_1.Factory.addGetterSetter(Tag, 'pointerWidth', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Tag, 'pointerHeight', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Tag, 'cornerRadius', 0, Validators_1.getNumberValidator());\nUtil_1.Collection.mapMethods(Tag);","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Util_1 = require(\"../Util\");\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Shape_1 = require(\"../Shape\");\n\nvar Validators_1 = require(\"../Validators\");\n\nvar Global_1 = require(\"../Global\");\n\nvar Line = function (_super) {\n  __extends(Line, _super);\n\n  function Line(config) {\n    var _this = _super.call(this, config) || this;\n\n    _this.on('pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva', function () {\n      this._clearCache('tensionPoints');\n    });\n\n    return _this;\n  }\n\n  Line.prototype._sceneFunc = function (context) {\n    var points = this.points(),\n        length = points.length,\n        tension = this.tension(),\n        closed = this.closed(),\n        bezier = this.bezier(),\n        tp,\n        len,\n        n;\n\n    if (!length) {\n      return;\n    }\n\n    context.beginPath();\n    context.moveTo(points[0], points[1]);\n\n    if (tension !== 0 && length > 4) {\n      tp = this.getTensionPoints();\n      len = tp.length;\n      n = closed ? 0 : 4;\n\n      if (!closed) {\n        context.quadraticCurveTo(tp[0], tp[1], tp[2], tp[3]);\n      }\n\n      while (n < len - 2) {\n        context.bezierCurveTo(tp[n++], tp[n++], tp[n++], tp[n++], tp[n++], tp[n++]);\n      }\n\n      if (!closed) {\n        context.quadraticCurveTo(tp[len - 2], tp[len - 1], points[length - 2], points[length - 1]);\n      }\n    } else if (bezier) {\n      n = 2;\n\n      while (n < length) {\n        context.bezierCurveTo(points[n++], points[n++], points[n++], points[n++], points[n++], points[n++]);\n      }\n    } else {\n      for (n = 2; n < length; n += 2) {\n        context.lineTo(points[n], points[n + 1]);\n      }\n    }\n\n    if (closed) {\n      context.closePath();\n      context.fillStrokeShape(this);\n    } else {\n      context.strokeShape(this);\n    }\n  };\n\n  Line.prototype.getTensionPoints = function () {\n    return this._getCache('tensionPoints', this._getTensionPoints);\n  };\n\n  Line.prototype._getTensionPoints = function () {\n    if (this.closed()) {\n      return this._getTensionPointsClosed();\n    } else {\n      return Util_1.Util._expandPoints(this.points(), this.tension());\n    }\n  };\n\n  Line.prototype._getTensionPointsClosed = function () {\n    var p = this.points(),\n        len = p.length,\n        tension = this.tension(),\n        firstControlPoints = Util_1.Util._getControlPoints(p[len - 2], p[len - 1], p[0], p[1], p[2], p[3], tension),\n        lastControlPoints = Util_1.Util._getControlPoints(p[len - 4], p[len - 3], p[len - 2], p[len - 1], p[0], p[1], tension),\n        middle = Util_1.Util._expandPoints(p, tension),\n        tp = [firstControlPoints[2], firstControlPoints[3]].concat(middle).concat([lastControlPoints[0], lastControlPoints[1], p[len - 2], p[len - 1], lastControlPoints[2], lastControlPoints[3], firstControlPoints[0], firstControlPoints[1], p[0], p[1]]);\n\n    return tp;\n  };\n\n  Line.prototype.getWidth = function () {\n    return this.getSelfRect().width;\n  };\n\n  Line.prototype.getHeight = function () {\n    return this.getSelfRect().height;\n  };\n\n  Line.prototype.getSelfRect = function () {\n    var points;\n\n    if (this.tension() !== 0) {\n      points = this._getTensionPoints();\n    } else {\n      points = this.points();\n    }\n\n    var minX = points[0];\n    var maxX = points[0];\n    var minY = points[1];\n    var maxY = points[1];\n    var x, y;\n\n    for (var i = 0; i < points.length / 2; i++) {\n      x = points[i * 2];\n      y = points[i * 2 + 1];\n      minX = Math.min(minX, x);\n      maxX = Math.max(maxX, x);\n      minY = Math.min(minY, y);\n      maxY = Math.max(maxY, y);\n    }\n\n    return {\n      x: Math.round(minX),\n      y: Math.round(minY),\n      width: Math.round(maxX - minX),\n      height: Math.round(maxY - minY)\n    };\n  };\n\n  return Line;\n}(Shape_1.Shape);\n\nexports.Line = Line;\nLine.prototype.className = 'Line';\nLine.prototype._attrsAffectingSize = ['points', 'bezier', 'tension'];\n\nGlobal_1._registerNode(Line);\n\nFactory_1.Factory.addGetterSetter(Line, 'closed', false);\nFactory_1.Factory.addGetterSetter(Line, 'bezier', false);\nFactory_1.Factory.addGetterSetter(Line, 'tension', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Line, 'points', [], Validators_1.getNumberArrayValidator());\nUtil_1.Collection.mapMethods(Line);","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Util_1 = require(\"../Util\");\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Shape_1 = require(\"../Shape\");\n\nvar Global_1 = require(\"../Global\");\n\nvar Path = function (_super) {\n  __extends(Path, _super);\n\n  function Path(config) {\n    var _this = _super.call(this, config) || this;\n\n    _this.dataArray = [];\n    _this.pathLength = 0;\n    _this.dataArray = Path.parsePathData(_this.data());\n    _this.pathLength = 0;\n\n    for (var i = 0; i < _this.dataArray.length; ++i) {\n      _this.pathLength += _this.dataArray[i].pathLength;\n    }\n\n    _this.on('dataChange.konva', function () {\n      this.dataArray = Path.parsePathData(this.data());\n      this.pathLength = 0;\n\n      for (var i = 0; i < this.dataArray.length; ++i) {\n        this.pathLength += this.dataArray[i].pathLength;\n      }\n    });\n\n    return _this;\n  }\n\n  Path.prototype._sceneFunc = function (context) {\n    var ca = this.dataArray;\n    context.beginPath();\n\n    for (var n = 0; n < ca.length; n++) {\n      var c = ca[n].command;\n      var p = ca[n].points;\n\n      switch (c) {\n        case 'L':\n          context.lineTo(p[0], p[1]);\n          break;\n\n        case 'M':\n          context.moveTo(p[0], p[1]);\n          break;\n\n        case 'C':\n          context.bezierCurveTo(p[0], p[1], p[2], p[3], p[4], p[5]);\n          break;\n\n        case 'Q':\n          context.quadraticCurveTo(p[0], p[1], p[2], p[3]);\n          break;\n\n        case 'A':\n          var cx = p[0],\n              cy = p[1],\n              rx = p[2],\n              ry = p[3],\n              theta = p[4],\n              dTheta = p[5],\n              psi = p[6],\n              fs = p[7];\n          var r = rx > ry ? rx : ry;\n          var scaleX = rx > ry ? 1 : rx / ry;\n          var scaleY = rx > ry ? ry / rx : 1;\n          context.translate(cx, cy);\n          context.rotate(psi);\n          context.scale(scaleX, scaleY);\n          context.arc(0, 0, r, theta, theta + dTheta, 1 - fs);\n          context.scale(1 / scaleX, 1 / scaleY);\n          context.rotate(-psi);\n          context.translate(-cx, -cy);\n          break;\n\n        case 'z':\n          context.closePath();\n          break;\n      }\n    }\n\n    context.fillStrokeShape(this);\n  };\n\n  Path.prototype.getSelfRect = function () {\n    var points = [];\n    this.dataArray.forEach(function (data) {\n      points = points.concat(data.points);\n    });\n    var minX = points[0];\n    var maxX = points[0];\n    var minY = points[1];\n    var maxY = points[1];\n    var x, y;\n\n    for (var i = 0; i < points.length / 2; i++) {\n      x = points[i * 2];\n      y = points[i * 2 + 1];\n\n      if (!isNaN(x)) {\n        minX = Math.min(minX, x);\n        maxX = Math.max(maxX, x);\n      }\n\n      if (!isNaN(y)) {\n        minY = Math.min(minY, y);\n        maxY = Math.max(maxY, y);\n      }\n    }\n\n    return {\n      x: Math.round(minX),\n      y: Math.round(minY),\n      width: Math.round(maxX - minX),\n      height: Math.round(maxY - minY)\n    };\n  };\n\n  Path.prototype.getLength = function () {\n    return this.pathLength;\n  };\n\n  Path.prototype.getPointAtLength = function (length) {\n    var point,\n        i = 0,\n        ii = this.dataArray.length;\n\n    if (!ii) {\n      return null;\n    }\n\n    while (i < ii && length > this.dataArray[i].pathLength) {\n      length -= this.dataArray[i].pathLength;\n      ++i;\n    }\n\n    if (i === ii) {\n      point = this.dataArray[i - 1].points.slice(-2);\n      return {\n        x: point[0],\n        y: point[1]\n      };\n    }\n\n    if (length < 0.01) {\n      point = this.dataArray[i].points.slice(0, 2);\n      return {\n        x: point[0],\n        y: point[1]\n      };\n    }\n\n    var cp = this.dataArray[i];\n    var p = cp.points;\n\n    switch (cp.command) {\n      case 'L':\n        return Path.getPointOnLine(length, cp.start.x, cp.start.y, p[0], p[1]);\n\n      case 'C':\n        return Path.getPointOnCubicBezier(length / cp.pathLength, cp.start.x, cp.start.y, p[0], p[1], p[2], p[3], p[4], p[5]);\n\n      case 'Q':\n        return Path.getPointOnQuadraticBezier(length / cp.pathLength, cp.start.x, cp.start.y, p[0], p[1], p[2], p[3]);\n\n      case 'A':\n        var cx = p[0],\n            cy = p[1],\n            rx = p[2],\n            ry = p[3],\n            theta = p[4],\n            dTheta = p[5],\n            psi = p[6];\n        theta += dTheta * length / cp.pathLength;\n        return Path.getPointOnEllipticalArc(cx, cy, rx, ry, theta, psi);\n    }\n\n    return null;\n  };\n\n  Path.getLineLength = function (x1, y1, x2, y2) {\n    return Math.sqrt((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1));\n  };\n\n  Path.getPointOnLine = function (dist, P1x, P1y, P2x, P2y, fromX, fromY) {\n    if (fromX === undefined) {\n      fromX = P1x;\n    }\n\n    if (fromY === undefined) {\n      fromY = P1y;\n    }\n\n    var m = (P2y - P1y) / (P2x - P1x + 0.00000001);\n    var run = Math.sqrt(dist * dist / (1 + m * m));\n\n    if (P2x < P1x) {\n      run *= -1;\n    }\n\n    var rise = m * run;\n    var pt;\n\n    if (P2x === P1x) {\n      pt = {\n        x: fromX,\n        y: fromY + rise\n      };\n    } else if ((fromY - P1y) / (fromX - P1x + 0.00000001) === m) {\n      pt = {\n        x: fromX + run,\n        y: fromY + rise\n      };\n    } else {\n      var ix, iy;\n      var len = this.getLineLength(P1x, P1y, P2x, P2y);\n\n      if (len < 0.00000001) {\n        return undefined;\n      }\n\n      var u = (fromX - P1x) * (P2x - P1x) + (fromY - P1y) * (P2y - P1y);\n      u = u / (len * len);\n      ix = P1x + u * (P2x - P1x);\n      iy = P1y + u * (P2y - P1y);\n      var pRise = this.getLineLength(fromX, fromY, ix, iy);\n      var pRun = Math.sqrt(dist * dist - pRise * pRise);\n      run = Math.sqrt(pRun * pRun / (1 + m * m));\n\n      if (P2x < P1x) {\n        run *= -1;\n      }\n\n      rise = m * run;\n      pt = {\n        x: ix + run,\n        y: iy + rise\n      };\n    }\n\n    return pt;\n  };\n\n  Path.getPointOnCubicBezier = function (pct, P1x, P1y, P2x, P2y, P3x, P3y, P4x, P4y) {\n    function CB1(t) {\n      return t * t * t;\n    }\n\n    function CB2(t) {\n      return 3 * t * t * (1 - t);\n    }\n\n    function CB3(t) {\n      return 3 * t * (1 - t) * (1 - t);\n    }\n\n    function CB4(t) {\n      return (1 - t) * (1 - t) * (1 - t);\n    }\n\n    var x = P4x * CB1(pct) + P3x * CB2(pct) + P2x * CB3(pct) + P1x * CB4(pct);\n    var y = P4y * CB1(pct) + P3y * CB2(pct) + P2y * CB3(pct) + P1y * CB4(pct);\n    return {\n      x: x,\n      y: y\n    };\n  };\n\n  Path.getPointOnQuadraticBezier = function (pct, P1x, P1y, P2x, P2y, P3x, P3y) {\n    function QB1(t) {\n      return t * t;\n    }\n\n    function QB2(t) {\n      return 2 * t * (1 - t);\n    }\n\n    function QB3(t) {\n      return (1 - t) * (1 - t);\n    }\n\n    var x = P3x * QB1(pct) + P2x * QB2(pct) + P1x * QB3(pct);\n    var y = P3y * QB1(pct) + P2y * QB2(pct) + P1y * QB3(pct);\n    return {\n      x: x,\n      y: y\n    };\n  };\n\n  Path.getPointOnEllipticalArc = function (cx, cy, rx, ry, theta, psi) {\n    var cosPsi = Math.cos(psi),\n        sinPsi = Math.sin(psi);\n    var pt = {\n      x: rx * Math.cos(theta),\n      y: ry * Math.sin(theta)\n    };\n    return {\n      x: cx + (pt.x * cosPsi - pt.y * sinPsi),\n      y: cy + (pt.x * sinPsi + pt.y * cosPsi)\n    };\n  };\n\n  Path.parsePathData = function (data) {\n    if (!data) {\n      return [];\n    }\n\n    var cs = data;\n    var cc = ['m', 'M', 'l', 'L', 'v', 'V', 'h', 'H', 'z', 'Z', 'c', 'C', 'q', 'Q', 't', 'T', 's', 'S', 'a', 'A'];\n    cs = cs.replace(new RegExp(' ', 'g'), ',');\n\n    for (var n = 0; n < cc.length; n++) {\n      cs = cs.replace(new RegExp(cc[n], 'g'), '|' + cc[n]);\n    }\n\n    var arr = cs.split('|');\n    var ca = [];\n    var coords = [];\n    var cpx = 0;\n    var cpy = 0;\n    var re = /([-+]?((\\d+\\.\\d+)|((\\d+)|(\\.\\d+)))(?:e[-+]?\\d+)?)/gi;\n    var match;\n\n    for (n = 1; n < arr.length; n++) {\n      var str = arr[n];\n      var c = str.charAt(0);\n      str = str.slice(1);\n      coords.length = 0;\n\n      while (match = re.exec(str)) {\n        coords.push(match[0]);\n      }\n\n      var p = [];\n\n      for (var j = 0, jlen = coords.length; j < jlen; j++) {\n        var parsed = parseFloat(coords[j]);\n\n        if (!isNaN(parsed)) {\n          p.push(parsed);\n        } else {\n          p.push(0);\n        }\n      }\n\n      while (p.length > 0) {\n        if (isNaN(p[0])) {\n          break;\n        }\n\n        var cmd = null;\n        var points = [];\n        var startX = cpx,\n            startY = cpy;\n        var prevCmd, ctlPtx, ctlPty;\n        var rx, ry, psi, fa, fs, x1, y1;\n\n        switch (c) {\n          case 'l':\n            cpx += p.shift();\n            cpy += p.shift();\n            cmd = 'L';\n            points.push(cpx, cpy);\n            break;\n\n          case 'L':\n            cpx = p.shift();\n            cpy = p.shift();\n            points.push(cpx, cpy);\n            break;\n\n          case 'm':\n            var dx = p.shift();\n            var dy = p.shift();\n            cpx += dx;\n            cpy += dy;\n            cmd = 'M';\n\n            if (ca.length > 2 && ca[ca.length - 1].command === 'z') {\n              for (var idx = ca.length - 2; idx >= 0; idx--) {\n                if (ca[idx].command === 'M') {\n                  cpx = ca[idx].points[0] + dx;\n                  cpy = ca[idx].points[1] + dy;\n                  break;\n                }\n              }\n            }\n\n            points.push(cpx, cpy);\n            c = 'l';\n            break;\n\n          case 'M':\n            cpx = p.shift();\n            cpy = p.shift();\n            cmd = 'M';\n            points.push(cpx, cpy);\n            c = 'L';\n            break;\n\n          case 'h':\n            cpx += p.shift();\n            cmd = 'L';\n            points.push(cpx, cpy);\n            break;\n\n          case 'H':\n            cpx = p.shift();\n            cmd = 'L';\n            points.push(cpx, cpy);\n            break;\n\n          case 'v':\n            cpy += p.shift();\n            cmd = 'L';\n            points.push(cpx, cpy);\n            break;\n\n          case 'V':\n            cpy = p.shift();\n            cmd = 'L';\n            points.push(cpx, cpy);\n            break;\n\n          case 'C':\n            points.push(p.shift(), p.shift(), p.shift(), p.shift());\n            cpx = p.shift();\n            cpy = p.shift();\n            points.push(cpx, cpy);\n            break;\n\n          case 'c':\n            points.push(cpx + p.shift(), cpy + p.shift(), cpx + p.shift(), cpy + p.shift());\n            cpx += p.shift();\n            cpy += p.shift();\n            cmd = 'C';\n            points.push(cpx, cpy);\n            break;\n\n          case 'S':\n            ctlPtx = cpx;\n            ctlPty = cpy;\n            prevCmd = ca[ca.length - 1];\n\n            if (prevCmd.command === 'C') {\n              ctlPtx = cpx + (cpx - prevCmd.points[2]);\n              ctlPty = cpy + (cpy - prevCmd.points[3]);\n            }\n\n            points.push(ctlPtx, ctlPty, p.shift(), p.shift());\n            cpx = p.shift();\n            cpy = p.shift();\n            cmd = 'C';\n            points.push(cpx, cpy);\n            break;\n\n          case 's':\n            ctlPtx = cpx;\n            ctlPty = cpy;\n            prevCmd = ca[ca.length - 1];\n\n            if (prevCmd.command === 'C') {\n              ctlPtx = cpx + (cpx - prevCmd.points[2]);\n              ctlPty = cpy + (cpy - prevCmd.points[3]);\n            }\n\n            points.push(ctlPtx, ctlPty, cpx + p.shift(), cpy + p.shift());\n            cpx += p.shift();\n            cpy += p.shift();\n            cmd = 'C';\n            points.push(cpx, cpy);\n            break;\n\n          case 'Q':\n            points.push(p.shift(), p.shift());\n            cpx = p.shift();\n            cpy = p.shift();\n            points.push(cpx, cpy);\n            break;\n\n          case 'q':\n            points.push(cpx + p.shift(), cpy + p.shift());\n            cpx += p.shift();\n            cpy += p.shift();\n            cmd = 'Q';\n            points.push(cpx, cpy);\n            break;\n\n          case 'T':\n            ctlPtx = cpx;\n            ctlPty = cpy;\n            prevCmd = ca[ca.length - 1];\n\n            if (prevCmd.command === 'Q') {\n              ctlPtx = cpx + (cpx - prevCmd.points[0]);\n              ctlPty = cpy + (cpy - prevCmd.points[1]);\n            }\n\n            cpx = p.shift();\n            cpy = p.shift();\n            cmd = 'Q';\n            points.push(ctlPtx, ctlPty, cpx, cpy);\n            break;\n\n          case 't':\n            ctlPtx = cpx;\n            ctlPty = cpy;\n            prevCmd = ca[ca.length - 1];\n\n            if (prevCmd.command === 'Q') {\n              ctlPtx = cpx + (cpx - prevCmd.points[0]);\n              ctlPty = cpy + (cpy - prevCmd.points[1]);\n            }\n\n            cpx += p.shift();\n            cpy += p.shift();\n            cmd = 'Q';\n            points.push(ctlPtx, ctlPty, cpx, cpy);\n            break;\n\n          case 'A':\n            rx = p.shift();\n            ry = p.shift();\n            psi = p.shift();\n            fa = p.shift();\n            fs = p.shift();\n            x1 = cpx;\n            y1 = cpy;\n            cpx = p.shift();\n            cpy = p.shift();\n            cmd = 'A';\n            points = this.convertEndpointToCenterParameterization(x1, y1, cpx, cpy, fa, fs, rx, ry, psi);\n            break;\n\n          case 'a':\n            rx = p.shift();\n            ry = p.shift();\n            psi = p.shift();\n            fa = p.shift();\n            fs = p.shift();\n            x1 = cpx;\n            y1 = cpy;\n            cpx += p.shift();\n            cpy += p.shift();\n            cmd = 'A';\n            points = this.convertEndpointToCenterParameterization(x1, y1, cpx, cpy, fa, fs, rx, ry, psi);\n            break;\n        }\n\n        ca.push({\n          command: cmd || c,\n          points: points,\n          start: {\n            x: startX,\n            y: startY\n          },\n          pathLength: this.calcLength(startX, startY, cmd || c, points)\n        });\n      }\n\n      if (c === 'z' || c === 'Z') {\n        ca.push({\n          command: 'z',\n          points: [],\n          start: undefined,\n          pathLength: 0\n        });\n      }\n    }\n\n    return ca;\n  };\n\n  Path.calcLength = function (x, y, cmd, points) {\n    var len, p1, p2, t;\n    var path = Path;\n\n    switch (cmd) {\n      case 'L':\n        return path.getLineLength(x, y, points[0], points[1]);\n\n      case 'C':\n        len = 0.0;\n        p1 = path.getPointOnCubicBezier(0, x, y, points[0], points[1], points[2], points[3], points[4], points[5]);\n\n        for (t = 0.01; t <= 1; t += 0.01) {\n          p2 = path.getPointOnCubicBezier(t, x, y, points[0], points[1], points[2], points[3], points[4], points[5]);\n          len += path.getLineLength(p1.x, p1.y, p2.x, p2.y);\n          p1 = p2;\n        }\n\n        return len;\n\n      case 'Q':\n        len = 0.0;\n        p1 = path.getPointOnQuadraticBezier(0, x, y, points[0], points[1], points[2], points[3]);\n\n        for (t = 0.01; t <= 1; t += 0.01) {\n          p2 = path.getPointOnQuadraticBezier(t, x, y, points[0], points[1], points[2], points[3]);\n          len += path.getLineLength(p1.x, p1.y, p2.x, p2.y);\n          p1 = p2;\n        }\n\n        return len;\n\n      case 'A':\n        len = 0.0;\n        var start = points[4];\n        var dTheta = points[5];\n        var end = points[4] + dTheta;\n        var inc = Math.PI / 180.0;\n\n        if (Math.abs(start - end) < inc) {\n          inc = Math.abs(start - end);\n        }\n\n        p1 = path.getPointOnEllipticalArc(points[0], points[1], points[2], points[3], start, 0);\n\n        if (dTheta < 0) {\n          for (t = start - inc; t > end; t -= inc) {\n            p2 = path.getPointOnEllipticalArc(points[0], points[1], points[2], points[3], t, 0);\n            len += path.getLineLength(p1.x, p1.y, p2.x, p2.y);\n            p1 = p2;\n          }\n        } else {\n          for (t = start + inc; t < end; t += inc) {\n            p2 = path.getPointOnEllipticalArc(points[0], points[1], points[2], points[3], t, 0);\n            len += path.getLineLength(p1.x, p1.y, p2.x, p2.y);\n            p1 = p2;\n          }\n        }\n\n        p2 = path.getPointOnEllipticalArc(points[0], points[1], points[2], points[3], end, 0);\n        len += path.getLineLength(p1.x, p1.y, p2.x, p2.y);\n        return len;\n    }\n\n    return 0;\n  };\n\n  Path.convertEndpointToCenterParameterization = function (x1, y1, x2, y2, fa, fs, rx, ry, psiDeg) {\n    var psi = psiDeg * (Math.PI / 180.0);\n    var xp = Math.cos(psi) * (x1 - x2) / 2.0 + Math.sin(psi) * (y1 - y2) / 2.0;\n    var yp = -1 * Math.sin(psi) * (x1 - x2) / 2.0 + Math.cos(psi) * (y1 - y2) / 2.0;\n    var lambda = xp * xp / (rx * rx) + yp * yp / (ry * ry);\n\n    if (lambda > 1) {\n      rx *= Math.sqrt(lambda);\n      ry *= Math.sqrt(lambda);\n    }\n\n    var f = Math.sqrt((rx * rx * (ry * ry) - rx * rx * (yp * yp) - ry * ry * (xp * xp)) / (rx * rx * (yp * yp) + ry * ry * (xp * xp)));\n\n    if (fa === fs) {\n      f *= -1;\n    }\n\n    if (isNaN(f)) {\n      f = 0;\n    }\n\n    var cxp = f * rx * yp / ry;\n    var cyp = f * -ry * xp / rx;\n    var cx = (x1 + x2) / 2.0 + Math.cos(psi) * cxp - Math.sin(psi) * cyp;\n    var cy = (y1 + y2) / 2.0 + Math.sin(psi) * cxp + Math.cos(psi) * cyp;\n\n    var vMag = function vMag(v) {\n      return Math.sqrt(v[0] * v[0] + v[1] * v[1]);\n    };\n\n    var vRatio = function vRatio(u, v) {\n      return (u[0] * v[0] + u[1] * v[1]) / (vMag(u) * vMag(v));\n    };\n\n    var vAngle = function vAngle(u, v) {\n      return (u[0] * v[1] < u[1] * v[0] ? -1 : 1) * Math.acos(vRatio(u, v));\n    };\n\n    var theta = vAngle([1, 0], [(xp - cxp) / rx, (yp - cyp) / ry]);\n    var u = [(xp - cxp) / rx, (yp - cyp) / ry];\n    var v = [(-1 * xp - cxp) / rx, (-1 * yp - cyp) / ry];\n    var dTheta = vAngle(u, v);\n\n    if (vRatio(u, v) <= -1) {\n      dTheta = Math.PI;\n    }\n\n    if (vRatio(u, v) >= 1) {\n      dTheta = 0;\n    }\n\n    if (fs === 0 && dTheta > 0) {\n      dTheta = dTheta - 2 * Math.PI;\n    }\n\n    if (fs === 1 && dTheta < 0) {\n      dTheta = dTheta + 2 * Math.PI;\n    }\n\n    return [cx, cy, rx, ry, theta, dTheta, psi, fs];\n  };\n\n  return Path;\n}(Shape_1.Shape);\n\nexports.Path = Path;\nPath.prototype.className = 'Path';\nPath.prototype._attrsAffectingSize = ['data'];\n\nGlobal_1._registerNode(Path);\n\nFactory_1.Factory.addGetterSetter(Path, 'data');\nUtil_1.Collection.mapMethods(Path);","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Util_1 = require(\"../Util\");\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Shape_1 = require(\"../Shape\");\n\nvar Global_1 = require(\"../Global\");\n\nvar Rect = function (_super) {\n  __extends(Rect, _super);\n\n  function Rect() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  Rect.prototype._sceneFunc = function (context) {\n    var cornerRadius = this.cornerRadius(),\n        width = this.width(),\n        height = this.height();\n    context.beginPath();\n\n    if (!cornerRadius) {\n      context.rect(0, 0, width, height);\n    } else {\n      var topLeft = 0;\n      var topRight = 0;\n      var bottomLeft = 0;\n      var bottomRight = 0;\n\n      if (typeof cornerRadius === 'number') {\n        topLeft = topRight = bottomLeft = bottomRight = Math.min(cornerRadius, width / 2, height / 2);\n      } else {\n        topLeft = Math.min(cornerRadius[0], width / 2, height / 2);\n        topRight = Math.min(cornerRadius[1], width / 2, height / 2);\n        bottomRight = Math.min(cornerRadius[2], width / 2, height / 2);\n        bottomLeft = Math.min(cornerRadius[3], width / 2, height / 2);\n      }\n\n      context.moveTo(topLeft, 0);\n      context.lineTo(width - topRight, 0);\n      context.arc(width - topRight, topRight, topRight, Math.PI * 3 / 2, 0, false);\n      context.lineTo(width, height - bottomRight);\n      context.arc(width - bottomRight, height - bottomRight, bottomRight, 0, Math.PI / 2, false);\n      context.lineTo(bottomLeft, height);\n      context.arc(bottomLeft, height - bottomLeft, bottomLeft, Math.PI / 2, Math.PI, false);\n      context.lineTo(0, topLeft);\n      context.arc(topLeft, topLeft, topLeft, Math.PI, Math.PI * 3 / 2, false);\n    }\n\n    context.closePath();\n    context.fillStrokeShape(this);\n  };\n\n  return Rect;\n}(Shape_1.Shape);\n\nexports.Rect = Rect;\nRect.prototype.className = 'Rect';\n\nGlobal_1._registerNode(Rect);\n\nFactory_1.Factory.addGetterSetter(Rect, 'cornerRadius', 0);\nUtil_1.Collection.mapMethods(Rect);","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Util_1 = require(\"../Util\");\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Shape_1 = require(\"../Shape\");\n\nvar Validators_1 = require(\"../Validators\");\n\nvar Global_1 = require(\"../Global\");\n\nvar RegularPolygon = function (_super) {\n  __extends(RegularPolygon, _super);\n\n  function RegularPolygon() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  RegularPolygon.prototype._sceneFunc = function (context) {\n    var sides = this.sides(),\n        radius = this.radius(),\n        n,\n        x,\n        y;\n    context.beginPath();\n    context.moveTo(0, 0 - radius);\n\n    for (n = 1; n < sides; n++) {\n      x = radius * Math.sin(n * 2 * Math.PI / sides);\n      y = -1 * radius * Math.cos(n * 2 * Math.PI / sides);\n      context.lineTo(x, y);\n    }\n\n    context.closePath();\n    context.fillStrokeShape(this);\n  };\n\n  RegularPolygon.prototype.getWidth = function () {\n    return this.radius() * 2;\n  };\n\n  RegularPolygon.prototype.getHeight = function () {\n    return this.radius() * 2;\n  };\n\n  RegularPolygon.prototype.setWidth = function (width) {\n    this.radius(width / 2);\n  };\n\n  RegularPolygon.prototype.setHeight = function (height) {\n    this.radius(height / 2);\n  };\n\n  return RegularPolygon;\n}(Shape_1.Shape);\n\nexports.RegularPolygon = RegularPolygon;\nRegularPolygon.prototype.className = 'RegularPolygon';\nRegularPolygon.prototype._centroid = true;\nRegularPolygon.prototype._attrsAffectingSize = ['radius'];\n\nGlobal_1._registerNode(RegularPolygon);\n\nFactory_1.Factory.addGetterSetter(RegularPolygon, 'radius', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(RegularPolygon, 'sides', 0, Validators_1.getNumberValidator());\nUtil_1.Collection.mapMethods(RegularPolygon);","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Util_1 = require(\"../Util\");\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Shape_1 = require(\"../Shape\");\n\nvar Validators_1 = require(\"../Validators\");\n\nvar Global_1 = require(\"../Global\");\n\nvar PIx2 = Math.PI * 2;\n\nvar Ring = function (_super) {\n  __extends(Ring, _super);\n\n  function Ring() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  Ring.prototype._sceneFunc = function (context) {\n    context.beginPath();\n    context.arc(0, 0, this.innerRadius(), 0, PIx2, false);\n    context.moveTo(this.outerRadius(), 0);\n    context.arc(0, 0, this.outerRadius(), PIx2, 0, true);\n    context.closePath();\n    context.fillStrokeShape(this);\n  };\n\n  Ring.prototype.getWidth = function () {\n    return this.outerRadius() * 2;\n  };\n\n  Ring.prototype.getHeight = function () {\n    return this.outerRadius() * 2;\n  };\n\n  Ring.prototype.setWidth = function (width) {\n    this.outerRadius(width / 2);\n  };\n\n  Ring.prototype.setHeight = function (height) {\n    this.outerRadius(height / 2);\n  };\n\n  return Ring;\n}(Shape_1.Shape);\n\nexports.Ring = Ring;\nRing.prototype.className = 'Ring';\nRing.prototype._centroid = true;\nRing.prototype._attrsAffectingSize = ['innerRadius', 'outerRadius'];\n\nGlobal_1._registerNode(Ring);\n\nFactory_1.Factory.addGetterSetter(Ring, 'innerRadius', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Ring, 'outerRadius', 0, Validators_1.getNumberValidator());\nUtil_1.Collection.mapMethods(Ring);","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Util_1 = require(\"../Util\");\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Shape_1 = require(\"../Shape\");\n\nvar Animation_1 = require(\"../Animation\");\n\nvar Validators_1 = require(\"../Validators\");\n\nvar Global_1 = require(\"../Global\");\n\nvar Sprite = function (_super) {\n  __extends(Sprite, _super);\n\n  function Sprite(config) {\n    var _this = _super.call(this, config) || this;\n\n    _this._updated = true;\n    _this.anim = new Animation_1.Animation(function () {\n      var updated = _this._updated;\n      _this._updated = false;\n      return updated;\n    });\n\n    _this.on('animationChange.konva', function () {\n      this.frameIndex(0);\n    });\n\n    _this.on('frameIndexChange.konva', function () {\n      this._updated = true;\n    });\n\n    _this.on('frameRateChange.konva', function () {\n      if (!this.anim.isRunning()) {\n        return;\n      }\n\n      clearInterval(this.interval);\n\n      this._setInterval();\n    });\n\n    return _this;\n  }\n\n  Sprite.prototype._sceneFunc = function (context) {\n    var anim = this.animation(),\n        index = this.frameIndex(),\n        ix4 = index * 4,\n        set = this.animations()[anim],\n        offsets = this.frameOffsets(),\n        x = set[ix4 + 0],\n        y = set[ix4 + 1],\n        width = set[ix4 + 2],\n        height = set[ix4 + 3],\n        image = this.image();\n\n    if (this.hasFill() || this.hasStroke()) {\n      context.beginPath();\n      context.rect(0, 0, width, height);\n      context.closePath();\n      context.fillStrokeShape(this);\n    }\n\n    if (image) {\n      if (offsets) {\n        var offset = offsets[anim],\n            ix2 = index * 2;\n        context.drawImage(image, x, y, width, height, offset[ix2 + 0], offset[ix2 + 1], width, height);\n      } else {\n        context.drawImage(image, x, y, width, height, 0, 0, width, height);\n      }\n    }\n  };\n\n  Sprite.prototype._hitFunc = function (context) {\n    var anim = this.animation(),\n        index = this.frameIndex(),\n        ix4 = index * 4,\n        set = this.animations()[anim],\n        offsets = this.frameOffsets(),\n        width = set[ix4 + 2],\n        height = set[ix4 + 3];\n    context.beginPath();\n\n    if (offsets) {\n      var offset = offsets[anim];\n      var ix2 = index * 2;\n      context.rect(offset[ix2 + 0], offset[ix2 + 1], width, height);\n    } else {\n      context.rect(0, 0, width, height);\n    }\n\n    context.closePath();\n    context.fillShape(this);\n  };\n\n  Sprite.prototype._useBufferCanvas = function () {\n    return (this.hasShadow() || this.getAbsoluteOpacity() !== 1) && this.hasStroke();\n  };\n\n  Sprite.prototype._setInterval = function () {\n    var that = this;\n    this.interval = setInterval(function () {\n      that._updateIndex();\n    }, 1000 / this.frameRate());\n  };\n\n  Sprite.prototype.start = function () {\n    if (this.isRunning()) {\n      return;\n    }\n\n    var layer = this.getLayer();\n    this.anim.setLayers(layer);\n\n    this._setInterval();\n\n    this.anim.start();\n  };\n\n  Sprite.prototype.stop = function () {\n    this.anim.stop();\n    clearInterval(this.interval);\n  };\n\n  Sprite.prototype.isRunning = function () {\n    return this.anim.isRunning();\n  };\n\n  Sprite.prototype._updateIndex = function () {\n    var index = this.frameIndex(),\n        animation = this.animation(),\n        animations = this.animations(),\n        anim = animations[animation],\n        len = anim.length / 4;\n\n    if (index < len - 1) {\n      this.frameIndex(index + 1);\n    } else {\n      this.frameIndex(0);\n    }\n  };\n\n  return Sprite;\n}(Shape_1.Shape);\n\nexports.Sprite = Sprite;\nSprite.prototype.className = 'Sprite';\n\nGlobal_1._registerNode(Sprite);\n\nFactory_1.Factory.addGetterSetter(Sprite, 'animation');\nFactory_1.Factory.addGetterSetter(Sprite, 'animations');\nFactory_1.Factory.addGetterSetter(Sprite, 'frameOffsets');\nFactory_1.Factory.addGetterSetter(Sprite, 'image');\nFactory_1.Factory.addGetterSetter(Sprite, 'frameIndex', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Sprite, 'frameRate', 17, Validators_1.getNumberValidator());\nFactory_1.Factory.backCompat(Sprite, {\n  index: 'frameIndex',\n  getIndex: 'getFrameIndex',\n  setIndex: 'setFrameIndex'\n});\nUtil_1.Collection.mapMethods(Sprite);","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Util_1 = require(\"../Util\");\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Shape_1 = require(\"../Shape\");\n\nvar Validators_1 = require(\"../Validators\");\n\nvar Global_1 = require(\"../Global\");\n\nvar Star = function (_super) {\n  __extends(Star, _super);\n\n  function Star() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  Star.prototype._sceneFunc = function (context) {\n    var innerRadius = this.innerRadius(),\n        outerRadius = this.outerRadius(),\n        numPoints = this.numPoints();\n    context.beginPath();\n    context.moveTo(0, 0 - outerRadius);\n\n    for (var n = 1; n < numPoints * 2; n++) {\n      var radius = n % 2 === 0 ? outerRadius : innerRadius;\n      var x = radius * Math.sin(n * Math.PI / numPoints);\n      var y = -1 * radius * Math.cos(n * Math.PI / numPoints);\n      context.lineTo(x, y);\n    }\n\n    context.closePath();\n    context.fillStrokeShape(this);\n  };\n\n  Star.prototype.getWidth = function () {\n    return this.outerRadius() * 2;\n  };\n\n  Star.prototype.getHeight = function () {\n    return this.outerRadius() * 2;\n  };\n\n  Star.prototype.setWidth = function (width) {\n    this.outerRadius(width / 2);\n  };\n\n  Star.prototype.setHeight = function (height) {\n    this.outerRadius(height / 2);\n  };\n\n  return Star;\n}(Shape_1.Shape);\n\nexports.Star = Star;\nStar.prototype.className = 'Star';\nStar.prototype._centroid = true;\nStar.prototype._attrsAffectingSize = ['innerRadius', 'outerRadius'];\n\nGlobal_1._registerNode(Star);\n\nFactory_1.Factory.addGetterSetter(Star, 'numPoints', 5, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Star, 'innerRadius', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Star, 'outerRadius', 0, Validators_1.getNumberValidator());\nUtil_1.Collection.mapMethods(Star);","\"use strict\";\n\nrequire(\"core-js/modules/es.string.trim-end.js\");\n\nrequire(\"core-js/modules/es.string.trim-start.js\");\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Util_1 = require(\"../Util\");\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Shape_1 = require(\"../Shape\");\n\nvar Global_1 = require(\"../Global\");\n\nvar Validators_1 = require(\"../Validators\");\n\nvar Global_2 = require(\"../Global\");\n\nvar AUTO = 'auto',\n    CENTER = 'center',\n    JUSTIFY = 'justify',\n    CHANGE_KONVA = 'Change.konva',\n    CONTEXT_2D = '2d',\n    DASH = '-',\n    LEFT = 'left',\n    TEXT = 'text',\n    TEXT_UPPER = 'Text',\n    TOP = 'top',\n    BOTTOM = 'bottom',\n    MIDDLE = 'middle',\n    NORMAL = 'normal',\n    PX_SPACE = 'px ',\n    SPACE = ' ',\n    RIGHT = 'right',\n    WORD = 'word',\n    CHAR = 'char',\n    NONE = 'none',\n    ELLIPSIS = '…',\n    ATTR_CHANGE_LIST = ['fontFamily', 'fontSize', 'fontStyle', 'fontVariant', 'padding', 'align', 'verticalAlign', 'lineHeight', 'text', 'width', 'height', 'wrap', 'ellipsis', 'letterSpacing'],\n    attrChangeListLen = ATTR_CHANGE_LIST.length;\nvar dummyContext;\n\nfunction getDummyContext() {\n  if (dummyContext) {\n    return dummyContext;\n  }\n\n  dummyContext = Util_1.Util.createCanvasElement().getContext(CONTEXT_2D);\n  return dummyContext;\n}\n\nfunction _fillFunc(context) {\n  context.fillText(this._partialText, this._partialTextX, this._partialTextY);\n}\n\nfunction _strokeFunc(context) {\n  context.strokeText(this._partialText, this._partialTextX, this._partialTextY);\n}\n\nfunction checkDefaultFill(config) {\n  config = config || {};\n\n  if (!config.fillLinearGradientColorStops && !config.fillRadialGradientColorStops && !config.fillPatternImage) {\n    config.fill = config.fill || 'black';\n  }\n\n  return config;\n}\n\nvar Text = function (_super) {\n  __extends(Text, _super);\n\n  function Text(config) {\n    var _this = _super.call(this, checkDefaultFill(config)) || this;\n\n    _this._partialTextX = 0;\n    _this._partialTextY = 0;\n\n    for (var n = 0; n < attrChangeListLen; n++) {\n      _this.on(ATTR_CHANGE_LIST[n] + CHANGE_KONVA, _this._setTextData);\n    }\n\n    _this._setTextData();\n\n    return _this;\n  }\n\n  Text.prototype._sceneFunc = function (context) {\n    var padding = this.padding(),\n        fontSize = this.fontSize(),\n        lineHeightPx = this.lineHeight() * fontSize,\n        textArr = this.textArr,\n        textArrLen = textArr.length,\n        verticalAlign = this.verticalAlign(),\n        alignY = 0,\n        align = this.align(),\n        totalWidth = this.getWidth(),\n        letterSpacing = this.letterSpacing(),\n        fill = this.fill(),\n        textDecoration = this.textDecoration(),\n        shouldUnderline = textDecoration.indexOf('underline') !== -1,\n        shouldLineThrough = textDecoration.indexOf('line-through') !== -1,\n        n;\n    var translateY = 0;\n    var translateY = lineHeightPx / 2;\n    var lineTranslateX = 0;\n    var lineTranslateY = 0;\n    context.setAttr('font', this._getContextFont());\n    context.setAttr('textBaseline', MIDDLE);\n    context.setAttr('textAlign', LEFT);\n\n    if (verticalAlign === MIDDLE) {\n      alignY = (this.getHeight() - textArrLen * lineHeightPx - padding * 2) / 2;\n    } else if (verticalAlign === BOTTOM) {\n      alignY = this.getHeight() - textArrLen * lineHeightPx - padding * 2;\n    }\n\n    context.translate(padding, alignY + padding);\n\n    for (n = 0; n < textArrLen; n++) {\n      var lineTranslateX = 0;\n      var lineTranslateY = 0;\n      var obj = textArr[n],\n          text = obj.text,\n          width = obj.width,\n          lastLine = n !== textArrLen - 1,\n          spacesNumber,\n          oneWord,\n          lineWidth;\n      context.save();\n\n      if (align === RIGHT) {\n        lineTranslateX += totalWidth - width - padding * 2;\n      } else if (align === CENTER) {\n        lineTranslateX += (totalWidth - width - padding * 2) / 2;\n      }\n\n      if (shouldUnderline) {\n        context.save();\n        context.beginPath();\n        context.moveTo(lineTranslateX, translateY + lineTranslateY + Math.round(fontSize / 2));\n        spacesNumber = text.split(' ').length - 1;\n        oneWord = spacesNumber === 0;\n        lineWidth = align === JUSTIFY && lastLine && !oneWord ? totalWidth - padding * 2 : width;\n        context.lineTo(lineTranslateX + Math.round(lineWidth), translateY + lineTranslateY + Math.round(fontSize / 2));\n        context.lineWidth = fontSize / 15;\n        context.strokeStyle = fill;\n        context.stroke();\n        context.restore();\n      }\n\n      if (shouldLineThrough) {\n        context.save();\n        context.beginPath();\n        context.moveTo(lineTranslateX, translateY + lineTranslateY);\n        spacesNumber = text.split(' ').length - 1;\n        oneWord = spacesNumber === 0;\n        lineWidth = align === JUSTIFY && lastLine && !oneWord ? totalWidth - padding * 2 : width;\n        context.lineTo(lineTranslateX + Math.round(lineWidth), translateY + lineTranslateY);\n        context.lineWidth = fontSize / 15;\n        context.strokeStyle = fill;\n        context.stroke();\n        context.restore();\n      }\n\n      if (letterSpacing !== 0 || align === JUSTIFY) {\n        spacesNumber = text.split(' ').length - 1;\n\n        for (var li = 0; li < text.length; li++) {\n          var letter = text[li];\n\n          if (letter === ' ' && n !== textArrLen - 1 && align === JUSTIFY) {\n            lineTranslateX += Math.floor((totalWidth - padding * 2 - width) / spacesNumber);\n          }\n\n          this._partialTextX = lineTranslateX;\n          this._partialTextY = translateY + lineTranslateY;\n          this._partialText = letter;\n          context.fillStrokeShape(this);\n          lineTranslateX += Math.round(this.measureSize(letter).width) + letterSpacing;\n        }\n      } else {\n        this._partialTextX = lineTranslateX;\n        this._partialTextY = translateY + lineTranslateY;\n        this._partialText = text;\n        context.fillStrokeShape(this);\n      }\n\n      context.restore();\n\n      if (textArrLen > 1) {\n        translateY += lineHeightPx;\n      }\n    }\n  };\n\n  Text.prototype._hitFunc = function (context) {\n    var width = this.getWidth(),\n        height = this.getHeight();\n    context.beginPath();\n    context.rect(0, 0, width, height);\n    context.closePath();\n    context.fillStrokeShape(this);\n  };\n\n  Text.prototype.setText = function (text) {\n    var str = Util_1.Util._isString(text) ? text : (text || '').toString();\n\n    this._setAttr(TEXT, str);\n\n    return this;\n  };\n\n  Text.prototype.getWidth = function () {\n    var isAuto = this.attrs.width === AUTO || this.attrs.width === undefined;\n    return isAuto ? this.getTextWidth() + this.padding() * 2 : this.attrs.width;\n  };\n\n  Text.prototype.getHeight = function () {\n    var isAuto = this.attrs.height === AUTO || this.attrs.height === undefined;\n    return isAuto ? this.fontSize() * this.textArr.length * this.lineHeight() + this.padding() * 2 : this.attrs.height;\n  };\n\n  Text.prototype.getTextWidth = function () {\n    return this.textWidth;\n  };\n\n  Text.prototype.getTextHeight = function () {\n    Util_1.Util.warn('text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height.');\n    return this.textHeight;\n  };\n\n  Text.prototype.measureSize = function (text) {\n    var _context = getDummyContext(),\n        fontSize = this.fontSize(),\n        metrics;\n\n    _context.save();\n\n    _context.font = this._getContextFont();\n    metrics = _context.measureText(text);\n\n    _context.restore();\n\n    return {\n      width: metrics.width,\n      height: fontSize\n    };\n  };\n\n  Text.prototype._getContextFont = function () {\n    if (Global_1.Konva.UA.isIE) {\n      return this.fontStyle() + SPACE + this.fontSize() + PX_SPACE + this.fontFamily();\n    }\n\n    return this.fontStyle() + SPACE + this.fontVariant() + SPACE + this.fontSize() + PX_SPACE + this.fontFamily();\n  };\n\n  Text.prototype._addTextLine = function (line) {\n    if (this.align() === JUSTIFY) {\n      line = line.trim();\n    }\n\n    var width = this._getTextWidth(line);\n\n    return this.textArr.push({\n      text: line,\n      width: width\n    });\n  };\n\n  Text.prototype._getTextWidth = function (text) {\n    var letterSpacing = this.letterSpacing();\n    var length = text.length;\n    return getDummyContext().measureText(text).width + (length ? letterSpacing * (length - 1) : 0);\n  };\n\n  Text.prototype._setTextData = function () {\n    var lines = this.text().split('\\n'),\n        fontSize = +this.fontSize(),\n        textWidth = 0,\n        lineHeightPx = this.lineHeight() * fontSize,\n        width = this.attrs.width,\n        height = this.attrs.height,\n        fixedWidth = width !== AUTO && width !== undefined,\n        fixedHeight = height !== AUTO && height !== undefined,\n        padding = this.padding(),\n        maxWidth = width - padding * 2,\n        maxHeightPx = height - padding * 2,\n        currentHeightPx = 0,\n        wrap = this.wrap(),\n        shouldWrap = wrap !== NONE,\n        wrapAtWord = wrap !== CHAR && shouldWrap,\n        shouldAddEllipsis = this.ellipsis() && !shouldWrap;\n    this.textArr = [];\n    getDummyContext().font = this._getContextFont();\n    var additionalWidth = shouldAddEllipsis ? this._getTextWidth(ELLIPSIS) : 0;\n\n    for (var i = 0, max = lines.length; i < max; ++i) {\n      var line = lines[i];\n\n      var lineWidth = this._getTextWidth(line);\n\n      if (fixedWidth && lineWidth > maxWidth) {\n        while (line.length > 0) {\n          var low = 0,\n              high = line.length,\n              match = '',\n              matchWidth = 0;\n\n          while (low < high) {\n            var mid = low + high >>> 1,\n                substr = line.slice(0, mid + 1),\n                substrWidth = this._getTextWidth(substr) + additionalWidth;\n\n            if (substrWidth <= maxWidth) {\n              low = mid + 1;\n              match = substr + (shouldAddEllipsis ? ELLIPSIS : '');\n              matchWidth = substrWidth;\n            } else {\n              high = mid;\n            }\n          }\n\n          if (match) {\n            if (wrapAtWord) {\n              var wrapIndex;\n              var nextChar = line[match.length];\n              var nextIsSpaceOrDash = nextChar === SPACE || nextChar === DASH;\n\n              if (nextIsSpaceOrDash && matchWidth <= maxWidth) {\n                wrapIndex = match.length;\n              } else {\n                wrapIndex = Math.max(match.lastIndexOf(SPACE), match.lastIndexOf(DASH)) + 1;\n              }\n\n              if (wrapIndex > 0) {\n                low = wrapIndex;\n                match = match.slice(0, low);\n                matchWidth = this._getTextWidth(match);\n              }\n            }\n\n            match = match.trimRight();\n\n            this._addTextLine(match);\n\n            textWidth = Math.max(textWidth, matchWidth);\n            currentHeightPx += lineHeightPx;\n\n            if (!shouldWrap || fixedHeight && currentHeightPx + lineHeightPx > maxHeightPx) {\n              break;\n            }\n\n            line = line.slice(low);\n            line = line.trimLeft();\n\n            if (line.length > 0) {\n              lineWidth = this._getTextWidth(line);\n\n              if (lineWidth <= maxWidth) {\n                this._addTextLine(line);\n\n                currentHeightPx += lineHeightPx;\n                textWidth = Math.max(textWidth, lineWidth);\n                break;\n              }\n            }\n          } else {\n            break;\n          }\n        }\n      } else {\n        this._addTextLine(line);\n\n        currentHeightPx += lineHeightPx;\n        textWidth = Math.max(textWidth, lineWidth);\n      }\n\n      if (fixedHeight && currentHeightPx + lineHeightPx > maxHeightPx) {\n        break;\n      }\n    }\n\n    this.textHeight = fontSize;\n    this.textWidth = textWidth;\n  };\n\n  Text.prototype.getStrokeScaleEnabled = function () {\n    return true;\n  };\n\n  return Text;\n}(Shape_1.Shape);\n\nexports.Text = Text;\nText.prototype._fillFunc = _fillFunc;\nText.prototype._strokeFunc = _strokeFunc;\nText.prototype.className = TEXT_UPPER;\nText.prototype._attrsAffectingSize = ['text', 'fontSize', 'padding', 'wrap', 'lineHeight'];\n\nGlobal_2._registerNode(Text);\n\nFactory_1.Factory.overWriteSetter(Text, 'width', Validators_1.getNumberOrAutoValidator());\nFactory_1.Factory.overWriteSetter(Text, 'height', Validators_1.getNumberOrAutoValidator());\nFactory_1.Factory.addGetterSetter(Text, 'fontFamily', 'Arial');\nFactory_1.Factory.addGetterSetter(Text, 'fontSize', 12, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Text, 'fontStyle', NORMAL);\nFactory_1.Factory.addGetterSetter(Text, 'fontVariant', NORMAL);\nFactory_1.Factory.addGetterSetter(Text, 'padding', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Text, 'align', LEFT);\nFactory_1.Factory.addGetterSetter(Text, 'verticalAlign', TOP);\nFactory_1.Factory.addGetterSetter(Text, 'lineHeight', 1, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Text, 'wrap', WORD);\nFactory_1.Factory.addGetterSetter(Text, 'ellipsis', false);\nFactory_1.Factory.addGetterSetter(Text, 'letterSpacing', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Text, 'text', '', Validators_1.getStringValidator());\nFactory_1.Factory.addGetterSetter(Text, 'textDecoration', '');\nUtil_1.Collection.mapMethods(Text);","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Util_1 = require(\"../Util\");\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Shape_1 = require(\"../Shape\");\n\nvar Path_1 = require(\"./Path\");\n\nvar Text_1 = require(\"./Text\");\n\nvar Validators_1 = require(\"../Validators\");\n\nvar Global_1 = require(\"../Global\");\n\nvar EMPTY_STRING = '',\n    NORMAL = 'normal';\n\nfunction _fillFunc(context) {\n  context.fillText(this.partialText, 0, 0);\n}\n\nfunction _strokeFunc(context) {\n  context.strokeText(this.partialText, 0, 0);\n}\n\nvar TextPath = function (_super) {\n  __extends(TextPath, _super);\n\n  function TextPath(config) {\n    var _this = _super.call(this, config) || this;\n\n    _this.dummyCanvas = Util_1.Util.createCanvasElement();\n    _this.dataArray = [];\n    _this.dataArray = Path_1.Path.parsePathData(_this.attrs.data);\n\n    _this.on('dataChange.konva', function () {\n      this.dataArray = Path_1.Path.parsePathData(this.attrs.data);\n\n      this._setTextData();\n    });\n\n    _this.on('textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva', _this._setTextData);\n\n    if (config && config['getKerning']) {\n      Util_1.Util.warn('getKerning TextPath API is deprecated. Please use \"kerningFunc\" instead.');\n\n      _this.kerningFunc(config['getKerning']);\n    }\n\n    _this._setTextData();\n\n    return _this;\n  }\n\n  TextPath.prototype._sceneFunc = function (context) {\n    context.setAttr('font', this._getContextFont());\n    context.setAttr('textBaseline', this.textBaseline());\n    context.setAttr('textAlign', 'left');\n    context.save();\n    var textDecoration = this.textDecoration();\n    var fill = this.fill();\n    var fontSize = this.fontSize();\n    var glyphInfo = this.glyphInfo;\n\n    if (textDecoration === 'underline') {\n      context.beginPath();\n    }\n\n    for (var i = 0; i < glyphInfo.length; i++) {\n      context.save();\n      var p0 = glyphInfo[i].p0;\n      context.translate(p0.x, p0.y);\n      context.rotate(glyphInfo[i].rotation);\n      this.partialText = glyphInfo[i].text;\n      context.fillStrokeShape(this);\n\n      if (textDecoration === 'underline') {\n        if (i === 0) {\n          context.moveTo(0, fontSize / 2 + 1);\n        }\n\n        context.lineTo(fontSize, fontSize / 2 + 1);\n      }\n\n      context.restore();\n    }\n\n    if (textDecoration === 'underline') {\n      context.strokeStyle = fill;\n      context.lineWidth = fontSize / 20;\n      context.stroke();\n    }\n\n    context.restore();\n  };\n\n  TextPath.prototype._hitFunc = function (context) {\n    context.beginPath();\n    var glyphInfo = this.glyphInfo;\n\n    if (glyphInfo.length >= 1) {\n      var p0 = glyphInfo[0].p0;\n      context.moveTo(p0.x, p0.y);\n    }\n\n    for (var i = 0; i < glyphInfo.length; i++) {\n      var p1 = glyphInfo[i].p1;\n      context.lineTo(p1.x, p1.y);\n    }\n\n    context.setAttr('lineWidth', this.fontSize());\n    context.setAttr('strokeStyle', this.colorKey);\n    context.stroke();\n  };\n\n  TextPath.prototype.getTextWidth = function () {\n    return this.textWidth;\n  };\n\n  TextPath.prototype.getTextHeight = function () {\n    Util_1.Util.warn('text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height.');\n    return this.textHeight;\n  };\n\n  TextPath.prototype.setText = function (text) {\n    return Text_1.Text.prototype.setText.call(this, text);\n  };\n\n  TextPath.prototype._getContextFont = function () {\n    return Text_1.Text.prototype._getContextFont.call(this);\n  };\n\n  TextPath.prototype._getTextSize = function (text) {\n    var dummyCanvas = this.dummyCanvas;\n\n    var _context = dummyCanvas.getContext('2d');\n\n    _context.save();\n\n    _context.font = this._getContextFont();\n\n    var metrics = _context.measureText(text);\n\n    _context.restore();\n\n    return {\n      width: metrics.width,\n      height: parseInt(this.attrs.fontSize, 10)\n    };\n  };\n\n  TextPath.prototype._setTextData = function () {\n    var that = this;\n\n    var size = this._getTextSize(this.attrs.text);\n\n    var letterSpacing = this.letterSpacing();\n    var align = this.align();\n    var kerningFunc = this.kerningFunc();\n    this.textWidth = size.width;\n    this.textHeight = size.height;\n    var textFullWidth = Math.max(this.textWidth + ((this.attrs.text || '').length - 1) * letterSpacing, 0);\n    this.glyphInfo = [];\n    var fullPathWidth = 0;\n\n    for (var l = 0; l < that.dataArray.length; l++) {\n      if (that.dataArray[l].pathLength > 0) {\n        fullPathWidth += that.dataArray[l].pathLength;\n      }\n    }\n\n    var offset = 0;\n\n    if (align === 'center') {\n      offset = Math.max(0, fullPathWidth / 2 - textFullWidth / 2);\n    }\n\n    if (align === 'right') {\n      offset = Math.max(0, fullPathWidth - textFullWidth);\n    }\n\n    var charArr = this.text().split('');\n    var spacesNumber = this.text().split(' ').length - 1;\n    var p0, p1, pathCmd;\n    var pIndex = -1;\n    var currentT = 0;\n\n    var getNextPathSegment = function getNextPathSegment() {\n      currentT = 0;\n      var pathData = that.dataArray;\n\n      for (var j = pIndex + 1; j < pathData.length; j++) {\n        if (pathData[j].pathLength > 0) {\n          pIndex = j;\n          return pathData[j];\n        } else if (pathData[j].command === 'M') {\n          p0 = {\n            x: pathData[j].points[0],\n            y: pathData[j].points[1]\n          };\n        }\n      }\n\n      return {};\n    };\n\n    var findSegmentToFitCharacter = function findSegmentToFitCharacter(c) {\n      var glyphWidth = that._getTextSize(c).width + letterSpacing;\n\n      if (c === ' ' && align === 'justify') {\n        glyphWidth += (fullPathWidth - textFullWidth) / spacesNumber;\n      }\n\n      var currLen = 0;\n      var attempts = 0;\n      p1 = undefined;\n\n      while (Math.abs(glyphWidth - currLen) / glyphWidth > 0.01 && attempts < 25) {\n        attempts++;\n        var cumulativePathLength = currLen;\n\n        while (pathCmd === undefined) {\n          pathCmd = getNextPathSegment();\n\n          if (pathCmd && cumulativePathLength + pathCmd.pathLength < glyphWidth) {\n            cumulativePathLength += pathCmd.pathLength;\n            pathCmd = undefined;\n          }\n        }\n\n        if (pathCmd === {} || p0 === undefined) {\n          return undefined;\n        }\n\n        var needNewSegment = false;\n\n        switch (pathCmd.command) {\n          case 'L':\n            if (Path_1.Path.getLineLength(p0.x, p0.y, pathCmd.points[0], pathCmd.points[1]) > glyphWidth) {\n              p1 = Path_1.Path.getPointOnLine(glyphWidth, p0.x, p0.y, pathCmd.points[0], pathCmd.points[1], p0.x, p0.y);\n            } else {\n              pathCmd = undefined;\n            }\n\n            break;\n\n          case 'A':\n            var start = pathCmd.points[4];\n            var dTheta = pathCmd.points[5];\n            var end = pathCmd.points[4] + dTheta;\n\n            if (currentT === 0) {\n              currentT = start + 0.00000001;\n            } else if (glyphWidth > currLen) {\n              currentT += Math.PI / 180.0 * dTheta / Math.abs(dTheta);\n            } else {\n              currentT -= Math.PI / 360.0 * dTheta / Math.abs(dTheta);\n            }\n\n            if (dTheta < 0 && currentT < end || dTheta >= 0 && currentT > end) {\n              currentT = end;\n              needNewSegment = true;\n            }\n\n            p1 = Path_1.Path.getPointOnEllipticalArc(pathCmd.points[0], pathCmd.points[1], pathCmd.points[2], pathCmd.points[3], currentT, pathCmd.points[6]);\n            break;\n\n          case 'C':\n            if (currentT === 0) {\n              if (glyphWidth > pathCmd.pathLength) {\n                currentT = 0.00000001;\n              } else {\n                currentT = glyphWidth / pathCmd.pathLength;\n              }\n            } else if (glyphWidth > currLen) {\n              currentT += (glyphWidth - currLen) / pathCmd.pathLength;\n            } else {\n              currentT -= (currLen - glyphWidth) / pathCmd.pathLength;\n            }\n\n            if (currentT > 1.0) {\n              currentT = 1.0;\n              needNewSegment = true;\n            }\n\n            p1 = Path_1.Path.getPointOnCubicBezier(currentT, pathCmd.start.x, pathCmd.start.y, pathCmd.points[0], pathCmd.points[1], pathCmd.points[2], pathCmd.points[3], pathCmd.points[4], pathCmd.points[5]);\n            break;\n\n          case 'Q':\n            if (currentT === 0) {\n              currentT = glyphWidth / pathCmd.pathLength;\n            } else if (glyphWidth > currLen) {\n              currentT += (glyphWidth - currLen) / pathCmd.pathLength;\n            } else {\n              currentT -= (currLen - glyphWidth) / pathCmd.pathLength;\n            }\n\n            if (currentT > 1.0) {\n              currentT = 1.0;\n              needNewSegment = true;\n            }\n\n            p1 = Path_1.Path.getPointOnQuadraticBezier(currentT, pathCmd.start.x, pathCmd.start.y, pathCmd.points[0], pathCmd.points[1], pathCmd.points[2], pathCmd.points[3]);\n            break;\n        }\n\n        if (p1 !== undefined) {\n          currLen = Path_1.Path.getLineLength(p0.x, p0.y, p1.x, p1.y);\n        }\n\n        if (needNewSegment) {\n          needNewSegment = false;\n          pathCmd = undefined;\n        }\n      }\n    };\n\n    var testChar = 'C';\n    var glyphWidth = that._getTextSize(testChar).width + letterSpacing;\n\n    for (var k = 0; k < offset / glyphWidth; k++) {\n      findSegmentToFitCharacter(testChar);\n\n      if (p0 === undefined || p1 === undefined) {\n        break;\n      }\n\n      p0 = p1;\n    }\n\n    for (var i = 0; i < charArr.length; i++) {\n      findSegmentToFitCharacter(charArr[i]);\n\n      if (p0 === undefined || p1 === undefined) {\n        break;\n      }\n\n      var width = Path_1.Path.getLineLength(p0.x, p0.y, p1.x, p1.y);\n      var kern = 0;\n\n      if (kerningFunc) {\n        try {\n          kern = kerningFunc(charArr[i - 1], charArr[i]) * this.fontSize();\n        } catch (e) {\n          kern = 0;\n        }\n      }\n\n      p0.x += kern;\n      p1.x += kern;\n      this.textWidth += kern;\n      var midpoint = Path_1.Path.getPointOnLine(kern + width / 2.0, p0.x, p0.y, p1.x, p1.y);\n      var rotation = Math.atan2(p1.y - p0.y, p1.x - p0.x);\n      this.glyphInfo.push({\n        transposeX: midpoint.x,\n        transposeY: midpoint.y,\n        text: charArr[i],\n        rotation: rotation,\n        p0: p0,\n        p1: p1\n      });\n      p0 = p1;\n    }\n  };\n\n  TextPath.prototype.getSelfRect = function () {\n    var points = [];\n    this.glyphInfo.forEach(function (info) {\n      points.push(info.p0.x);\n      points.push(info.p0.y);\n      points.push(info.p1.x);\n      points.push(info.p1.y);\n    });\n    var minX = points[0];\n    var maxX = points[0];\n    var minY = points[0];\n    var maxY = points[0];\n    var x, y;\n\n    for (var i = 0; i < points.length / 2; i++) {\n      x = points[i * 2];\n      y = points[i * 2 + 1];\n      minX = Math.min(minX, x);\n      maxX = Math.max(maxX, x);\n      minY = Math.min(minY, y);\n      maxY = Math.max(maxY, y);\n    }\n\n    var fontSize = this.fontSize();\n    return {\n      x: Math.round(minX) - fontSize / 2,\n      y: Math.round(minY) - fontSize / 2,\n      width: Math.round(maxX - minX) + fontSize,\n      height: Math.round(maxY - minY) + fontSize\n    };\n  };\n\n  return TextPath;\n}(Shape_1.Shape);\n\nexports.TextPath = TextPath;\nTextPath.prototype._fillFunc = _fillFunc;\nTextPath.prototype._strokeFunc = _strokeFunc;\nTextPath.prototype._fillFuncHit = _fillFunc;\nTextPath.prototype._strokeFuncHit = _strokeFunc;\nTextPath.prototype.className = 'TextPath';\nTextPath.prototype._attrsAffectingSize = ['text', 'fontSize', 'data'];\n\nGlobal_1._registerNode(TextPath);\n\nFactory_1.Factory.addGetterSetter(TextPath, 'data');\nFactory_1.Factory.addGetterSetter(TextPath, 'fontFamily', 'Arial');\nFactory_1.Factory.addGetterSetter(TextPath, 'fontSize', 12, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(TextPath, 'fontStyle', NORMAL);\nFactory_1.Factory.addGetterSetter(TextPath, 'align', 'left');\nFactory_1.Factory.addGetterSetter(TextPath, 'letterSpacing', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(TextPath, 'textBaseline', 'middle');\nFactory_1.Factory.addGetterSetter(TextPath, 'fontVariant', NORMAL);\nFactory_1.Factory.addGetterSetter(TextPath, 'text', EMPTY_STRING);\nFactory_1.Factory.addGetterSetter(TextPath, 'textDecoration', null);\nFactory_1.Factory.addGetterSetter(TextPath, 'kerningFunc', null);\nUtil_1.Collection.mapMethods(TextPath);","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Util_1 = require(\"../Util\");\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Node_1 = require(\"../Node\");\n\nvar Shape_1 = require(\"../Shape\");\n\nvar Rect_1 = require(\"./Rect\");\n\nvar Group_1 = require(\"../Group\");\n\nvar Global_1 = require(\"../Global\");\n\nvar Validators_1 = require(\"../Validators\");\n\nvar Global_2 = require(\"../Global\");\n\nvar ATTR_CHANGE_LIST = ['resizeEnabledChange', 'rotateAnchorOffsetChange', 'rotateEnabledChange', 'enabledAnchorsChange', 'anchorSizeChange', 'borderEnabledChange', 'borderStrokeChange', 'borderStrokeWidthChange', 'borderDashChange', 'anchorStrokeChange', 'anchorStrokeWidthChange', 'anchorFillChange', 'anchorCornerRadiusChange', 'ignoreStrokeChange'].join(' ');\nvar NODE_RECT = 'nodeRect';\nvar TRANSFORM_CHANGE_STR = ['widthChange.tr', 'heightChange.tr', 'scaleXChange.tr', 'scaleYChange.tr', 'skewXChange.tr', 'skewYChange.tr', 'rotationChange.tr', 'offsetXChange.tr', 'offsetYChange.tr', 'transformsEnabledChange.tr', 'strokeWidthChange.tr'].join(' ');\nvar ANGLES = {\n  'top-left': -45,\n  'top-center': 0,\n  'top-right': 45,\n  'middle-right': -90,\n  'middle-left': 90,\n  'bottom-left': -135,\n  'bottom-center': 180,\n  'bottom-right': 135\n};\n\nfunction getCursor(anchorName, rad, isMirrored) {\n  if (anchorName === 'rotater') {\n    return 'crosshair';\n  }\n\n  rad += Util_1.Util._degToRad(ANGLES[anchorName] || 0);\n\n  if (isMirrored) {\n    rad *= -1;\n  }\n\n  var angle = (Util_1.Util._radToDeg(rad) % 360 + 360) % 360;\n\n  if (Util_1.Util._inRange(angle, 315 + 22.5, 360) || Util_1.Util._inRange(angle, 0, 22.5)) {\n    return 'ns-resize';\n  } else if (Util_1.Util._inRange(angle, 45 - 22.5, 45 + 22.5)) {\n    return 'nesw-resize';\n  } else if (Util_1.Util._inRange(angle, 90 - 22.5, 90 + 22.5)) {\n    return 'ew-resize';\n  } else if (Util_1.Util._inRange(angle, 135 - 22.5, 135 + 22.5)) {\n    return 'nwse-resize';\n  } else if (Util_1.Util._inRange(angle, 180 - 22.5, 180 + 22.5)) {\n    return 'ns-resize';\n  } else if (Util_1.Util._inRange(angle, 225 - 22.5, 225 + 22.5)) {\n    return 'nesw-resize';\n  } else if (Util_1.Util._inRange(angle, 270 - 22.5, 270 + 22.5)) {\n    return 'ew-resize';\n  } else if (Util_1.Util._inRange(angle, 315 - 22.5, 315 + 22.5)) {\n    return 'nwse-resize';\n  } else {\n    Util_1.Util.error('Transformer has unknown angle for cursor detection: ' + angle);\n    return 'pointer';\n  }\n}\n\nvar ANCHORS_NAMES = ['top-left', 'top-center', 'top-right', 'middle-right', 'middle-left', 'bottom-left', 'bottom-center', 'bottom-right'];\nvar MAX_SAFE_INTEGER = 100000000;\n\nvar Transformer = function (_super) {\n  __extends(Transformer, _super);\n\n  function Transformer(config) {\n    var _this = _super.call(this, config) || this;\n\n    _this._transforming = false;\n\n    _this._createElements();\n\n    _this._handleMouseMove = _this._handleMouseMove.bind(_this);\n    _this._handleMouseUp = _this._handleMouseUp.bind(_this);\n    _this.update = _this.update.bind(_this);\n\n    _this.on(ATTR_CHANGE_LIST, _this.update);\n\n    if (_this.getNode()) {\n      _this.update();\n    }\n\n    return _this;\n  }\n\n  Transformer.prototype.attachTo = function (node) {\n    this.setNode(node);\n    return this;\n  };\n\n  Transformer.prototype.setNode = function (node) {\n    var _this = this;\n\n    if (this._node) {\n      this.detach();\n    }\n\n    this._node = node;\n\n    this._resetTransformCache();\n\n    var additionalEvents = node._attrsAffectingSize.map(function (prop) {\n      return prop + 'Change.tr';\n    }).join(' ');\n\n    var onChange = function onChange() {\n      _this._resetTransformCache();\n\n      if (!_this._transforming) {\n        _this.update();\n      }\n    };\n\n    node.on(additionalEvents, onChange);\n    node.on(TRANSFORM_CHANGE_STR, onChange);\n    node.on('xChange.tr yChange.tr', function () {\n      return _this._resetTransformCache();\n    });\n    var elementsCreated = !!this.findOne('.top-left');\n\n    if (elementsCreated) {\n      this.update();\n    }\n\n    return this;\n  };\n\n  Transformer.prototype.getNode = function () {\n    return this._node;\n  };\n\n  Transformer.prototype.detach = function () {\n    if (this.getNode()) {\n      this.getNode().off('.tr');\n      this._node = undefined;\n    }\n\n    this._resetTransformCache();\n  };\n\n  Transformer.prototype._resetTransformCache = function () {\n    this._clearCache(NODE_RECT);\n\n    this._clearCache('transform');\n\n    this._clearSelfAndDescendantCache('absoluteTransform');\n  };\n\n  Transformer.prototype._getNodeRect = function () {\n    return this._getCache(NODE_RECT, this.__getNodeRect);\n  };\n\n  Transformer.prototype.__getNodeRect = function () {\n    var node = this.getNode();\n\n    if (!node) {\n      return {\n        x: -MAX_SAFE_INTEGER,\n        y: -MAX_SAFE_INTEGER,\n        width: 0,\n        height: 0,\n        rotation: 0\n      };\n    }\n\n    if (node.parent && this.parent && node.parent !== this.parent) {\n      Util_1.Util.warn('Transformer and attached node have different parents. Konva does not support such case right now. Please move Transformer to the parent of attaching node.');\n    }\n\n    var rect = node.getClientRect({\n      skipTransform: true,\n      skipShadow: true,\n      skipStroke: this.ignoreStroke()\n    });\n    var rotation = Global_1.Konva.getAngle(node.rotation());\n    var dx = rect.x * node.scaleX() - node.offsetX() * node.scaleX();\n    var dy = rect.y * node.scaleY() - node.offsetY() * node.scaleY();\n    return {\n      x: node.x() + dx * Math.cos(rotation) + dy * Math.sin(-rotation),\n      y: node.y() + dy * Math.cos(rotation) + dx * Math.sin(rotation),\n      width: rect.width * node.scaleX(),\n      height: rect.height * node.scaleY(),\n      rotation: node.rotation()\n    };\n  };\n\n  Transformer.prototype.getX = function () {\n    return this._getNodeRect().x;\n  };\n\n  Transformer.prototype.getY = function () {\n    return this._getNodeRect().y;\n  };\n\n  Transformer.prototype.getRotation = function () {\n    return this._getNodeRect().rotation;\n  };\n\n  Transformer.prototype.getWidth = function () {\n    return this._getNodeRect().width;\n  };\n\n  Transformer.prototype.getHeight = function () {\n    return this._getNodeRect().height;\n  };\n\n  Transformer.prototype._createElements = function () {\n    this._createBack();\n\n    ANCHORS_NAMES.forEach(function (name) {\n      this._createAnchor(name);\n    }.bind(this));\n\n    this._createAnchor('rotater');\n  };\n\n  Transformer.prototype._createAnchor = function (name) {\n    var _this = this;\n\n    var anchor = new Rect_1.Rect({\n      stroke: 'rgb(0, 161, 255)',\n      fill: 'white',\n      strokeWidth: 1,\n      name: name + ' _anchor',\n      dragDistance: 0,\n      draggable: true\n    });\n    var self = this;\n    anchor.on('mousedown touchstart', function (e) {\n      self._handleMouseDown(e);\n    });\n    anchor.on('dragstart', function (e) {\n      e.cancelBubble = true;\n    });\n    anchor.on('dragmove', function (e) {\n      e.cancelBubble = true;\n    });\n    anchor.on('dragend', function (e) {\n      e.cancelBubble = true;\n    });\n    anchor.on('mouseenter', function () {\n      var rad = Global_1.Konva.getAngle(_this.rotation());\n\n      var scale = _this.getNode().getAbsoluteScale();\n\n      var isMirrored = scale.y * scale.x < 0;\n      var cursor = getCursor(name, rad, isMirrored);\n      anchor.getStage().content.style.cursor = cursor;\n      _this._cursorChange = true;\n    });\n    anchor.on('mouseout', function () {\n      if (!anchor.getStage() || !anchor.getParent()) {\n        return;\n      }\n\n      anchor.getStage().content.style.cursor = '';\n      _this._cursorChange = false;\n    });\n    this.add(anchor);\n  };\n\n  Transformer.prototype._createBack = function () {\n    var back = new Shape_1.Shape({\n      name: 'back',\n      width: 0,\n      height: 0,\n      listening: false,\n      sceneFunc: function sceneFunc(ctx) {\n        var tr = this.getParent();\n        var padding = tr.padding();\n        ctx.beginPath();\n        ctx.rect(-padding, -padding, this.width() + padding * 2, this.height() + padding * 2);\n        ctx.moveTo(this.width() / 2, -padding);\n\n        if (tr.rotateEnabled()) {\n          ctx.lineTo(this.width() / 2, -tr.rotateAnchorOffset() * Util_1.Util._sign(this.height()));\n        }\n\n        ctx.fillStrokeShape(this);\n      }\n    });\n    this.add(back);\n  };\n\n  Transformer.prototype._handleMouseDown = function (e) {\n    this.movingResizer = e.target.name().split(' ')[0];\n\n    var attrs = this._getNodeRect();\n\n    var width = attrs.width;\n    var height = attrs.height;\n    var hypotenuse = Math.sqrt(Math.pow(width, 2) + Math.pow(height, 2));\n    this.sin = Math.abs(height / hypotenuse);\n    this.cos = Math.abs(width / hypotenuse);\n    window.addEventListener('mousemove', this._handleMouseMove);\n    window.addEventListener('touchmove', this._handleMouseMove);\n    window.addEventListener('mouseup', this._handleMouseUp, true);\n    window.addEventListener('touchend', this._handleMouseUp, true);\n    this._transforming = true;\n\n    this._fire('transformstart', {\n      evt: e\n    });\n\n    this.getNode()._fire('transformstart', {\n      evt: e\n    });\n  };\n\n  Transformer.prototype._handleMouseMove = function (e) {\n    var x, y, newHypotenuse;\n    var resizerNode = this.findOne('.' + this.movingResizer);\n    var stage = resizerNode.getStage();\n    var box = stage.getContent().getBoundingClientRect();\n    var zeroPoint = {\n      x: box.left,\n      y: box.top\n    };\n    var pointerPos = {\n      left: e.clientX !== undefined ? e.clientX : e.touches[0].clientX,\n      top: e.clientX !== undefined ? e.clientY : e.touches[0].clientY\n    };\n    var newAbsPos = {\n      x: pointerPos.left - zeroPoint.x,\n      y: pointerPos.top - zeroPoint.y\n    };\n    resizerNode.setAbsolutePosition(newAbsPos);\n    var keepProportion = this.keepRatio() || e.shiftKey;\n\n    if (this.movingResizer === 'top-left') {\n      if (keepProportion) {\n        newHypotenuse = Math.sqrt(Math.pow(this.findOne('.bottom-right').x() - resizerNode.x(), 2) + Math.pow(this.findOne('.bottom-right').y() - resizerNode.y(), 2));\n        var reverse = this.findOne('.top-left').x() > this.findOne('.bottom-right').x() ? -1 : 1;\n        x = newHypotenuse * this.cos * reverse;\n        y = newHypotenuse * this.sin * reverse;\n        this.findOne('.top-left').x(this.findOne('.bottom-right').x() - x);\n        this.findOne('.top-left').y(this.findOne('.bottom-right').y() - y);\n      }\n    } else if (this.movingResizer === 'top-center') {\n      this.findOne('.top-left').y(resizerNode.y());\n    } else if (this.movingResizer === 'top-right') {\n      if (keepProportion) {\n        newHypotenuse = Math.sqrt(Math.pow(this.findOne('.bottom-left').x() - resizerNode.x(), 2) + Math.pow(this.findOne('.bottom-left').y() - resizerNode.y(), 2));\n        var reverse = this.findOne('.top-right').x() < this.findOne('.top-left').x() ? -1 : 1;\n        x = newHypotenuse * this.cos * reverse;\n        y = newHypotenuse * this.sin * reverse;\n        this.findOne('.top-right').x(x);\n        this.findOne('.top-right').y(this.findOne('.bottom-left').y() - y);\n      }\n\n      var pos = resizerNode.position();\n      this.findOne('.top-left').y(pos.y);\n      this.findOne('.bottom-right').x(pos.x);\n    } else if (this.movingResizer === 'middle-left') {\n      this.findOne('.top-left').x(resizerNode.x());\n    } else if (this.movingResizer === 'middle-right') {\n      this.findOne('.bottom-right').x(resizerNode.x());\n    } else if (this.movingResizer === 'bottom-left') {\n      if (keepProportion) {\n        newHypotenuse = Math.sqrt(Math.pow(this.findOne('.top-right').x() - resizerNode.x(), 2) + Math.pow(this.findOne('.top-right').y() - resizerNode.y(), 2));\n        var reverse = this.findOne('.top-right').x() < this.findOne('.bottom-left').x() ? -1 : 1;\n        x = newHypotenuse * this.cos * reverse;\n        y = newHypotenuse * this.sin * reverse;\n        this.findOne('.bottom-left').x(this.findOne('.top-right').x() - x);\n        this.findOne('.bottom-left').y(y);\n      }\n\n      pos = resizerNode.position();\n      this.findOne('.top-left').x(pos.x);\n      this.findOne('.bottom-right').y(pos.y);\n    } else if (this.movingResizer === 'bottom-center') {\n      this.findOne('.bottom-right').y(resizerNode.y());\n    } else if (this.movingResizer === 'bottom-right') {\n      if (keepProportion) {\n        newHypotenuse = Math.sqrt(Math.pow(this.findOne('.bottom-right').x(), 2) + Math.pow(this.findOne('.bottom-right').y(), 2));\n        var reverse = this.findOne('.top-left').x() > this.findOne('.bottom-right').x() ? -1 : 1;\n        x = newHypotenuse * this.cos * reverse;\n        y = newHypotenuse * this.sin * reverse;\n        this.findOne('.bottom-right').x(x);\n        this.findOne('.bottom-right').y(y);\n      }\n    } else if (this.movingResizer === 'rotater') {\n      var padding = this.padding();\n\n      var attrs = this._getNodeRect();\n\n      x = resizerNode.x() - attrs.width / 2;\n      y = -resizerNode.y() + attrs.height / 2;\n      var dAlpha = Math.atan2(-y, x) + Math.PI / 2;\n\n      if (attrs.height < 0) {\n        dAlpha -= Math.PI;\n      }\n\n      var rot = Global_1.Konva.getAngle(this.rotation());\n\n      var newRotation = Util_1.Util._radToDeg(rot) + Util_1.Util._radToDeg(dAlpha);\n\n      var alpha = Global_1.Konva.getAngle(this.getNode().rotation());\n\n      var newAlpha = Util_1.Util._degToRad(newRotation);\n\n      var snaps = this.rotationSnaps();\n      var offset = 0.1;\n\n      for (var i = 0; i < snaps.length; i++) {\n        var angle = Global_1.Konva.getAngle(snaps[i]);\n        var dif = Math.abs(angle - Util_1.Util._degToRad(newRotation)) % (Math.PI * 2);\n\n        if (dif < offset) {\n          newRotation = Util_1.Util._radToDeg(angle);\n          newAlpha = Util_1.Util._degToRad(newRotation);\n        }\n      }\n\n      var dx = padding;\n      var dy = padding;\n\n      this._fitNodeInto({\n        rotation: Global_1.Konva.angleDeg ? newRotation : Util_1.Util._degToRad(newRotation),\n        x: attrs.x + (attrs.width / 2 + padding) * (Math.cos(alpha) - Math.cos(newAlpha)) + (attrs.height / 2 + padding) * (Math.sin(-alpha) - Math.sin(-newAlpha)) - (dx * Math.cos(rot) + dy * Math.sin(-rot)),\n        y: attrs.y + (attrs.height / 2 + padding) * (Math.cos(alpha) - Math.cos(newAlpha)) + (attrs.width / 2 + padding) * (Math.sin(alpha) - Math.sin(newAlpha)) - (dy * Math.cos(rot) + dx * Math.sin(rot)),\n        width: attrs.width + padding * 2,\n        height: attrs.height + padding * 2\n      }, e);\n    } else {\n      console.error(new Error('Wrong position argument of selection resizer: ' + this.movingResizer));\n    }\n\n    if (this.movingResizer === 'rotater') {\n      return;\n    }\n\n    var absPos = this.findOne('.top-left').getAbsolutePosition(this.getParent());\n    var centeredScaling = this.centeredScaling() || e.altKey;\n\n    if (centeredScaling) {\n      var topLeft = this.findOne('.top-left');\n      var bottomRight = this.findOne('.bottom-right');\n      var topOffsetX = topLeft.x();\n      var topOffsetY = topLeft.y();\n      var bottomOffsetX = this.getWidth() - bottomRight.x();\n      var bottomOffsetY = this.getHeight() - bottomRight.y();\n      bottomRight.move({\n        x: -topOffsetX,\n        y: -topOffsetY\n      });\n      topLeft.move({\n        x: bottomOffsetX,\n        y: bottomOffsetY\n      });\n      absPos = topLeft.getAbsolutePosition(this.getParent());\n    }\n\n    x = absPos.x;\n    y = absPos.y;\n    var width = this.findOne('.bottom-right').x() - this.findOne('.top-left').x();\n    var height = this.findOne('.bottom-right').y() - this.findOne('.top-left').y();\n\n    this._fitNodeInto({\n      x: x + this.offsetX(),\n      y: y + this.offsetY(),\n      width: width,\n      height: height\n    }, e);\n  };\n\n  Transformer.prototype._handleMouseUp = function (e) {\n    this._removeEvents(e);\n  };\n\n  Transformer.prototype._removeEvents = function (e) {\n    if (this._transforming) {\n      this._transforming = false;\n      window.removeEventListener('mousemove', this._handleMouseMove);\n      window.removeEventListener('touchmove', this._handleMouseMove);\n      window.removeEventListener('mouseup', this._handleMouseUp, true);\n      window.removeEventListener('touchend', this._handleMouseUp, true);\n\n      this._fire('transformend', {\n        evt: e\n      });\n\n      var node = this.getNode();\n\n      if (node) {\n        node.fire('transformend', {\n          evt: e\n        });\n      }\n    }\n  };\n\n  Transformer.prototype._fitNodeInto = function (newAttrs, evt) {\n    var boundBoxFunc = this.boundBoxFunc();\n\n    if (boundBoxFunc) {\n      var oldAttrs = this._getNodeRect();\n\n      newAttrs = boundBoxFunc.call(this, oldAttrs, newAttrs);\n    }\n\n    var node = this.getNode();\n\n    if (newAttrs.rotation !== undefined) {\n      this.getNode().rotation(newAttrs.rotation);\n    }\n\n    var pure = node.getClientRect({\n      skipTransform: true,\n      skipShadow: true,\n      skipStroke: this.ignoreStroke()\n    });\n    var padding = this.padding();\n    var scaleX = (newAttrs.width - padding * 2) / pure.width;\n    var scaleY = (newAttrs.height - padding * 2) / pure.height;\n    var rotation = Global_1.Konva.getAngle(node.rotation());\n    var dx = pure.x * scaleX - padding - node.offsetX() * scaleX;\n    var dy = pure.y * scaleY - padding - node.offsetY() * scaleY;\n    this.getNode().setAttrs({\n      scaleX: scaleX,\n      scaleY: scaleY,\n      x: newAttrs.x - (dx * Math.cos(rotation) + dy * Math.sin(-rotation)),\n      y: newAttrs.y - (dy * Math.cos(rotation) + dx * Math.sin(rotation))\n    });\n\n    this._fire('transform', {\n      evt: evt\n    });\n\n    this.getNode()._fire('transform', {\n      evt: evt\n    });\n\n    this.update();\n    this.getLayer().batchDraw();\n  };\n\n  Transformer.prototype.forceUpdate = function () {\n    this._resetTransformCache();\n\n    this.update();\n  };\n\n  Transformer.prototype.update = function () {\n    var _this = this;\n\n    var attrs = this._getNodeRect();\n\n    var node = this.getNode();\n    var scale = {\n      x: 1,\n      y: 1\n    };\n\n    if (node && node.getParent()) {\n      scale = node.getParent().getAbsoluteScale();\n    }\n\n    var invertedScale = {\n      x: 1 / scale.x,\n      y: 1 / scale.y\n    };\n    var width = attrs.width;\n    var height = attrs.height;\n    var enabledAnchors = this.enabledAnchors();\n    var resizeEnabled = this.resizeEnabled();\n    var padding = this.padding();\n    var anchorSize = this.anchorSize();\n    this.find('._anchor').each(function (node) {\n      return node.setAttrs({\n        width: anchorSize,\n        height: anchorSize,\n        offsetX: anchorSize / 2,\n        offsetY: anchorSize / 2,\n        stroke: _this.anchorStroke(),\n        strokeWidth: _this.anchorStrokeWidth(),\n        fill: _this.anchorFill(),\n        cornerRadius: _this.anchorCornerRadius()\n      });\n    });\n    this.findOne('.top-left').setAttrs({\n      x: -padding,\n      y: -padding,\n      scale: invertedScale,\n      visible: resizeEnabled && enabledAnchors.indexOf('top-left') >= 0\n    });\n    this.findOne('.top-center').setAttrs({\n      x: width / 2,\n      y: -padding,\n      scale: invertedScale,\n      visible: resizeEnabled && enabledAnchors.indexOf('top-center') >= 0\n    });\n    this.findOne('.top-right').setAttrs({\n      x: width + padding,\n      y: -padding,\n      scale: invertedScale,\n      visible: resizeEnabled && enabledAnchors.indexOf('top-right') >= 0\n    });\n    this.findOne('.middle-left').setAttrs({\n      x: -padding,\n      y: height / 2,\n      scale: invertedScale,\n      visible: resizeEnabled && enabledAnchors.indexOf('middle-left') >= 0\n    });\n    this.findOne('.middle-right').setAttrs({\n      x: width + padding,\n      y: height / 2,\n      scale: invertedScale,\n      visible: resizeEnabled && enabledAnchors.indexOf('middle-right') >= 0\n    });\n    this.findOne('.bottom-left').setAttrs({\n      x: -padding,\n      y: height + padding,\n      scale: invertedScale,\n      visible: resizeEnabled && enabledAnchors.indexOf('bottom-left') >= 0\n    });\n    this.findOne('.bottom-center').setAttrs({\n      x: width / 2,\n      y: height + padding,\n      scale: invertedScale,\n      visible: resizeEnabled && enabledAnchors.indexOf('bottom-center') >= 0\n    });\n    this.findOne('.bottom-right').setAttrs({\n      x: width + padding,\n      y: height + padding,\n      scale: invertedScale,\n      visible: resizeEnabled && enabledAnchors.indexOf('bottom-right') >= 0\n    });\n    var scaledRotateAnchorOffset = -this.rotateAnchorOffset() * Math.abs(invertedScale.y);\n    this.findOne('.rotater').setAttrs({\n      x: width / 2,\n      y: scaledRotateAnchorOffset * Util_1.Util._sign(height),\n      scale: invertedScale,\n      visible: this.rotateEnabled()\n    });\n    this.findOne('.back').setAttrs({\n      width: width * scale.x,\n      height: height * scale.y,\n      scale: invertedScale,\n      visible: this.borderEnabled(),\n      stroke: this.borderStroke(),\n      strokeWidth: this.borderStrokeWidth(),\n      dash: this.borderDash()\n    });\n  };\n\n  Transformer.prototype.isTransforming = function () {\n    return this._transforming;\n  };\n\n  Transformer.prototype.stopTransform = function () {\n    if (this._transforming) {\n      this._removeEvents();\n\n      var resizerNode = this.findOne('.' + this.movingResizer);\n\n      if (resizerNode) {\n        resizerNode.stopDrag();\n      }\n    }\n  };\n\n  Transformer.prototype.destroy = function () {\n    if (this.getStage() && this._cursorChange) {\n      this.getStage().content.style.cursor = '';\n    }\n\n    Group_1.Group.prototype.destroy.call(this);\n    this.detach();\n\n    this._removeEvents();\n\n    return this;\n  };\n\n  Transformer.prototype.toObject = function () {\n    return Node_1.Node.prototype.toObject.call(this);\n  };\n\n  return Transformer;\n}(Group_1.Group);\n\nexports.Transformer = Transformer;\n\nfunction validateAnchors(val) {\n  if (!(val instanceof Array)) {\n    Util_1.Util.warn('enabledAnchors value should be an array');\n  }\n\n  if (val instanceof Array) {\n    val.forEach(function (name) {\n      if (ANCHORS_NAMES.indexOf(name) === -1) {\n        Util_1.Util.warn('Unknown anchor name: ' + name + '. Available names are: ' + ANCHORS_NAMES.join(', '));\n      }\n    });\n  }\n\n  return val || [];\n}\n\nTransformer.prototype.className = 'Transformer';\n\nGlobal_2._registerNode(Transformer);\n\nFactory_1.Factory.addGetterSetter(Transformer, 'enabledAnchors', ANCHORS_NAMES, validateAnchors);\nFactory_1.Factory.addGetterSetter(Transformer, 'resizeEnabled', true);\nFactory_1.Factory.addGetterSetter(Transformer, 'anchorSize', 10, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Transformer, 'rotateEnabled', true);\nFactory_1.Factory.addGetterSetter(Transformer, 'rotationSnaps', []);\nFactory_1.Factory.addGetterSetter(Transformer, 'rotateAnchorOffset', 50, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Transformer, 'borderEnabled', true);\nFactory_1.Factory.addGetterSetter(Transformer, 'anchorStroke', 'rgb(0, 161, 255)');\nFactory_1.Factory.addGetterSetter(Transformer, 'anchorStrokeWidth', 1, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Transformer, 'anchorFill', 'white');\nFactory_1.Factory.addGetterSetter(Transformer, 'anchorCornerRadius', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Transformer, 'borderStroke', 'rgb(0, 161, 255)');\nFactory_1.Factory.addGetterSetter(Transformer, 'borderStrokeWidth', 1, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Transformer, 'borderDash');\nFactory_1.Factory.addGetterSetter(Transformer, 'keepRatio', true);\nFactory_1.Factory.addGetterSetter(Transformer, 'centeredScaling', false);\nFactory_1.Factory.addGetterSetter(Transformer, 'ignoreStroke', false);\nFactory_1.Factory.addGetterSetter(Transformer, 'padding', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Transformer, 'node');\nFactory_1.Factory.addGetterSetter(Transformer, 'boundBoxFunc');\nFactory_1.Factory.backCompat(Transformer, {\n  lineEnabled: 'borderEnabled',\n  rotateHandlerOffset: 'rotateAnchorOffset',\n  enabledHandlers: 'enabledAnchors'\n});\nUtil_1.Collection.mapMethods(Transformer);","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Util_1 = require(\"../Util\");\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Shape_1 = require(\"../Shape\");\n\nvar Global_1 = require(\"../Global\");\n\nvar Validators_1 = require(\"../Validators\");\n\nvar Global_2 = require(\"../Global\");\n\nvar Wedge = function (_super) {\n  __extends(Wedge, _super);\n\n  function Wedge() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  Wedge.prototype._sceneFunc = function (context) {\n    context.beginPath();\n    context.arc(0, 0, this.radius(), 0, Global_1.Konva.getAngle(this.angle()), this.clockwise());\n    context.lineTo(0, 0);\n    context.closePath();\n    context.fillStrokeShape(this);\n  };\n\n  Wedge.prototype.getWidth = function () {\n    return this.radius() * 2;\n  };\n\n  Wedge.prototype.getHeight = function () {\n    return this.radius() * 2;\n  };\n\n  Wedge.prototype.setWidth = function (width) {\n    this.radius(width / 2);\n  };\n\n  Wedge.prototype.setHeight = function (height) {\n    this.radius(height / 2);\n  };\n\n  return Wedge;\n}(Shape_1.Shape);\n\nexports.Wedge = Wedge;\nWedge.prototype.className = 'Wedge';\nWedge.prototype._centroid = true;\nWedge.prototype._attrsAffectingSize = ['radius'];\n\nGlobal_2._registerNode(Wedge);\n\nFactory_1.Factory.addGetterSetter(Wedge, 'radius', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Wedge, 'angle', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Wedge, 'clockwise', false);\nFactory_1.Factory.backCompat(Wedge, {\n  angleDeg: 'angle',\n  getAngleDeg: 'getAngle',\n  setAngleDeg: 'setAngle'\n});\nUtil_1.Collection.mapMethods(Wedge);","/*!\n * vue-konva v2.1.7 - https://github.com/konvajs/vue-konva#readme\n * MIT Licensed\n */\n(function webpackUniversalModuleDefinition(root, factory) {\n  if (typeof exports === 'object' && typeof module === 'object') module.exports = factory(require(\"vue\"), require(\"konva\"));else if (typeof define === 'function' && define.amd) define([\"vue\", \"konva\"], factory);else if (typeof exports === 'object') exports[\"VueKonva\"] = factory(require(\"vue\"), require(\"konva\"));else root[\"VueKonva\"] = factory(root[\"Vue\"], root[\"Konva\"]);\n})(this, function (__WEBPACK_EXTERNAL_MODULE__0__, __WEBPACK_EXTERNAL_MODULE__2__) {\n  return (\n    /******/\n    function (modules) {\n      // webpackBootstrap\n\n      /******/\n      // The module cache\n\n      /******/\n      var installedModules = {};\n      /******/\n\n      /******/\n      // The require function\n\n      /******/\n\n      function __webpack_require__(moduleId) {\n        /******/\n\n        /******/\n        // Check if module is in cache\n\n        /******/\n        if (installedModules[moduleId]) {\n          /******/\n          return installedModules[moduleId].exports;\n          /******/\n        }\n        /******/\n        // Create a new module (and put it into the cache)\n\n        /******/\n\n\n        var module = installedModules[moduleId] = {\n          /******/\n          i: moduleId,\n\n          /******/\n          l: false,\n\n          /******/\n          exports: {}\n          /******/\n\n        };\n        /******/\n\n        /******/\n        // Execute the module function\n\n        /******/\n\n        modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n        /******/\n\n        /******/\n        // Flag the module as loaded\n\n        /******/\n\n        module.l = true;\n        /******/\n\n        /******/\n        // Return the exports of the module\n\n        /******/\n\n        return module.exports;\n        /******/\n      }\n      /******/\n\n      /******/\n\n      /******/\n      // expose the modules object (__webpack_modules__)\n\n      /******/\n\n\n      __webpack_require__.m = modules;\n      /******/\n\n      /******/\n      // expose the module cache\n\n      /******/\n\n      __webpack_require__.c = installedModules;\n      /******/\n\n      /******/\n      // define getter function for harmony exports\n\n      /******/\n\n      __webpack_require__.d = function (exports, name, getter) {\n        /******/\n        if (!__webpack_require__.o(exports, name)) {\n          /******/\n          Object.defineProperty(exports, name, {\n            enumerable: true,\n            get: getter\n          });\n          /******/\n        }\n        /******/\n\n      };\n      /******/\n\n      /******/\n      // define __esModule on exports\n\n      /******/\n\n\n      __webpack_require__.r = function (exports) {\n        /******/\n        if (typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n          /******/\n          Object.defineProperty(exports, Symbol.toStringTag, {\n            value: 'Module'\n          });\n          /******/\n        }\n        /******/\n\n\n        Object.defineProperty(exports, '__esModule', {\n          value: true\n        });\n        /******/\n      };\n      /******/\n\n      /******/\n      // create a fake namespace object\n\n      /******/\n      // mode & 1: value is a module id, require it\n\n      /******/\n      // mode & 2: merge all properties of value into the ns\n\n      /******/\n      // mode & 4: return value when already ns object\n\n      /******/\n      // mode & 8|1: behave like require\n\n      /******/\n\n\n      __webpack_require__.t = function (value, mode) {\n        /******/\n        if (mode & 1) value = __webpack_require__(value);\n        /******/\n\n        if (mode & 8) return value;\n        /******/\n\n        if (mode & 4 && typeof value === 'object' && value && value.__esModule) return value;\n        /******/\n\n        var ns = Object.create(null);\n        /******/\n\n        __webpack_require__.r(ns);\n        /******/\n\n\n        Object.defineProperty(ns, 'default', {\n          enumerable: true,\n          value: value\n        });\n        /******/\n\n        if (mode & 2 && typeof value != 'string') for (var key in value) {\n          __webpack_require__.d(ns, key, function (key) {\n            return value[key];\n          }.bind(null, key));\n        }\n        /******/\n\n        return ns;\n        /******/\n      };\n      /******/\n\n      /******/\n      // getDefaultExport function for compatibility with non-harmony modules\n\n      /******/\n\n\n      __webpack_require__.n = function (module) {\n        /******/\n        var getter = module && module.__esModule ?\n        /******/\n        function getDefault() {\n          return module['default'];\n        } :\n        /******/\n        function getModuleExports() {\n          return module;\n        };\n        /******/\n\n        __webpack_require__.d(getter, 'a', getter);\n        /******/\n\n\n        return getter;\n        /******/\n      };\n      /******/\n\n      /******/\n      // Object.prototype.hasOwnProperty.call\n\n      /******/\n\n\n      __webpack_require__.o = function (object, property) {\n        return Object.prototype.hasOwnProperty.call(object, property);\n      };\n      /******/\n\n      /******/\n      // __webpack_public_path__\n\n      /******/\n\n\n      __webpack_require__.p = \"\";\n      /******/\n\n      /******/\n\n      /******/\n      // Load entry module and return exports\n\n      /******/\n\n      return __webpack_require__(__webpack_require__.s = 1);\n      /******/\n    }\n    /************************************************************************/\n\n    /******/\n    ([\n    /* 0 */\n\n    /***/\n    function (module, exports) {\n      module.exports = __WEBPACK_EXTERNAL_MODULE__0__;\n      /***/\n    },\n    /* 1 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      module.exports = __webpack_require__(3);\n      /***/\n    },\n    /* 2 */\n\n    /***/\n    function (module, exports) {\n      module.exports = __WEBPACK_EXTERNAL_MODULE__2__;\n      /***/\n    },\n    /* 3 */\n\n    /***/\n    function (module, __webpack_exports__, __webpack_require__) {\n      \"use strict\"; // ESM COMPAT FLAG\n\n      __webpack_require__.r(__webpack_exports__); // EXTERNAL MODULE: external {\"root\":\"Vue\",\"commonjs2\":\"vue\",\"commonjs\":\"vue\",\"amd\":\"vue\"}\n\n\n      var external_root_Vue_commonjs2_vue_commonjs_vue_amd_vue_ = __webpack_require__(0);\n\n      var external_root_Vue_commonjs2_vue_commonjs_vue_amd_vue_default = /*#__PURE__*/__webpack_require__.n(external_root_Vue_commonjs2_vue_commonjs_vue_amd_vue_); // CONCATENATED MODULE: ./src/utils/updatePicture.js\n      // adapted FROM: https://github.com/lavrton/react-konva/blob/master/src/react-konva-fiber.js\n\n\n      function updatePicture(node) {\n        var drawingNode = node.getLayer() || node.getStage();\n        drawingNode && drawingNode.batchDraw();\n      } // CONCATENATED MODULE: ./src/utils/applyNodeProps.js\n      // adapted FROM: https://github.com/lavrton/react-konva/blob/master/src/react-konva-fiber.js\n\n\n      var propsToSkip = {\n        key: true,\n        style: true,\n        elm: true,\n        isRootInsert: true\n      };\n      var EVENTS_NAMESPACE = '.vue-konva-event';\n\n      function applyNodeProps(vueComponent, props, oldProps, useStrict) {\n        if (props === void 0) {\n          props = {};\n        }\n\n        if (oldProps === void 0) {\n          oldProps = {};\n        }\n\n        var instance = vueComponent._konvaNode;\n        var updatedProps = {};\n        var hasUpdates = false;\n\n        for (var key in oldProps) {\n          if (propsToSkip[key]) {\n            continue;\n          }\n\n          var isEvent = key.slice(0, 2) === 'on';\n          var propChanged = oldProps[key] !== props[key];\n\n          if (isEvent && propChanged) {\n            var eventName = key.substr(2).toLowerCase();\n\n            if (eventName.substr(0, 7) === 'content') {\n              eventName = 'content' + eventName.substr(7, 1).toUpperCase() + eventName.substr(8);\n            }\n\n            instance.off(eventName + EVENTS_NAMESPACE, oldProps[key]);\n          }\n\n          var toRemove = !props.hasOwnProperty(key);\n\n          if (toRemove) {\n            instance.setAttr(key, undefined);\n          }\n        }\n\n        for (var _key in props) {\n          if (propsToSkip[_key]) {\n            continue;\n          }\n\n          var _isEvent = _key.slice(0, 2) === 'on';\n\n          var toAdd = oldProps[_key] !== props[_key];\n\n          if (_isEvent && toAdd) {\n            var _eventName = _key.substr(2).toLowerCase();\n\n            if (_eventName.substr(0, 7) === 'content') {\n              _eventName = 'content' + _eventName.substr(7, 1).toUpperCase() + _eventName.substr(8);\n            }\n\n            if (props[_key]) {\n              instance.off(_eventName + EVENTS_NAMESPACE);\n              instance.on(_eventName + EVENTS_NAMESPACE, props[_key]);\n            }\n          }\n\n          if (!_isEvent && (props[_key] !== oldProps[_key] || useStrict && props[_key] !== instance.getAttr(_key))) {\n            hasUpdates = true;\n            updatedProps[_key] = props[_key];\n          }\n        }\n\n        if (hasUpdates) {\n          instance.setAttrs(updatedProps);\n          updatePicture(instance);\n        }\n      } // CONCATENATED MODULE: ./src/utils/index.js\n\n\n      var componentPrefix = 'v';\n      var konvaNodeMarker = '_konvaNode';\n\n      function copy(obj) {\n        return JSON.parse(JSON.stringify(obj));\n      }\n\n      function createListener(obj) {\n        var output = {};\n        Object.keys(obj).forEach(function (eventName) {\n          output['on' + eventName] = obj[eventName];\n        });\n        return output;\n      }\n\n      function findParentKonva(instance) {\n        function re(instance) {\n          if (instance._konvaNode) {\n            return instance;\n          }\n\n          if (instance.$parent) {\n            return re(instance.$parent);\n          }\n\n          return {};\n        }\n\n        return re(instance.$parent);\n      }\n\n      function findKonvaNode(instance) {\n        if (!instance) {\n          return null;\n        }\n\n        if (instance.$options[konvaNodeMarker]) {\n          return instance.getNode();\n        }\n\n        if (instance.$children.length === 0) {\n          return null;\n        }\n\n        return findKonvaNode(instance.$children[0]);\n      }\n\n      function checkOrder($vnode, konvaNode) {\n        var needRedraw = false; // check indexes\n        // somehow this.$children are not ordered correctly\n        // so we have to dive-in into componentOptions of vnode\n        // also componentOptions.children may have empty nodes, and other non Konva elements so we need to filter them first\n\n        var children = $vnode.componentOptions.children || [];\n        var nodes = [];\n        children.forEach(function ($vnode) {\n          var konvaNode = findKonvaNode($vnode.componentInstance);\n\n          if (konvaNode) {\n            nodes.push(konvaNode);\n          }\n\n          var elm = $vnode.elm,\n              componentInstance = $vnode.componentInstance;\n\n          if (elm && elm.tagName && componentInstance && !konvaNode) {\n            var name = elm && elm.tagName.toLowerCase();\n            console.error(\"vue-konva error: You are trying to render \\\"\" + name + \"\\\" inside your component tree. Looks like it is not a Konva node. You can render only Konva components inside the Stage.\");\n          }\n        });\n        nodes.forEach(function (konvaNode, index) {\n          if (konvaNode.getZIndex() !== index) {\n            konvaNode.setZIndex(index);\n            needRedraw = true;\n          }\n        });\n\n        if (needRedraw) {\n          updatePicture(konvaNode);\n        }\n      } // CONCATENATED MODULE: ./src/components/Stage.js\n\n\n      function _extends() {\n        _extends = Object.assign || function (target) {\n          for (var i = 1; i < arguments.length; i++) {\n            var source = arguments[i];\n\n            for (var key in source) {\n              if (Object.prototype.hasOwnProperty.call(source, key)) {\n                target[key] = source[key];\n              }\n            }\n          }\n\n          return target;\n        };\n\n        return _extends.apply(this, arguments);\n      }\n      /* harmony default export */\n\n\n      var Stage = external_root_Vue_commonjs2_vue_commonjs_vue_amd_vue_default.a.component('v-stage', {\n        render: function render(createElement) {\n          return createElement('div', this.$slots.default);\n        },\n        watch: {\n          config: {\n            handler: function handler(val) {\n              this.uploadKonva();\n            },\n            deep: true\n          }\n        },\n        props: {\n          config: {\n            type: Object,\n            default: function _default() {\n              return {};\n            }\n          },\n          __useStrictMode: {\n            type: Boolean\n          }\n        },\n        created: function created() {\n          this._konvaNode = new window.Konva.Stage({\n            width: this.config.width,\n            height: this.config.height,\n            // create fake container, later it will be replaced with real div on the page\n            container: document.createElement('div')\n          });\n        },\n        mounted: function mounted() {\n          this.$el.innerHTML = '';\n\n          this._konvaNode.container(this.$el);\n\n          this.uploadKonva();\n          this.validateChildren();\n        },\n        updated: function updated() {\n          this.uploadKonva();\n          this.uploadKonva();\n          checkOrder(this.$vnode, this._konvaNode);\n        },\n        beforeDestroy: function beforeDestroy() {\n          this._konvaNode.destroy();\n        },\n        methods: {\n          getNode: function getNode() {\n            return this._konvaNode;\n          },\n          getStage: function getStage() {\n            return this._konvaNode;\n          },\n          uploadKonva: function uploadKonva() {\n            var oldProps = this.oldProps || {};\n\n            var props = _extends({}, this.$attrs, this.config, createListener(this.$listeners));\n\n            applyNodeProps(this, props, oldProps, this.__useStrictMode);\n            this.oldProps = props;\n          },\n          validateChildren: function validateChildren() {// TODO: add a waring if we see non-Konva element here\n            // this.$vnode.componentOptions.children.forEach(child => {\n            //   console.log(child);\n            // })\n          }\n        }\n      }); // CONCATENATED MODULE: ./src/components/KonvaNode.js\n\n      function KonvaNode_extends() {\n        KonvaNode_extends = Object.assign || function (target) {\n          for (var i = 1; i < arguments.length; i++) {\n            var source = arguments[i];\n\n            for (var key in source) {\n              if (Object.prototype.hasOwnProperty.call(source, key)) {\n                target[key] = source[key];\n              }\n            }\n          }\n\n          return target;\n        };\n\n        return KonvaNode_extends.apply(this, arguments);\n      }\n\n      var KonvaNode_EVENTS_NAMESPACE = '.vue-konva-event';\n      var CONTAINERS = {\n        Group: true,\n        Layer: true,\n        FastLayer: true,\n        Label: true\n      };\n      /* harmony default export */\n\n      var KonvaNode = function KonvaNode(nameNode) {\n        var _ref;\n\n        return _ref = {}, _ref[konvaNodeMarker] = true, _ref.render = function render(createElement) {\n          // containers should be able to draw children\n          var isContainer = CONTAINERS[nameNode];\n\n          if (isContainer) {\n            return createElement('template', this.$slots.default);\n          } // other elements are not containers\n\n\n          return null;\n        }, _ref.watch = {\n          config: {\n            handler: function handler(val) {\n              this.uploadKonva();\n            },\n            deep: true\n          }\n        }, _ref.props = {\n          config: {\n            type: Object,\n            default: function _default() {\n              return {};\n            }\n          },\n          __useStrictMode: {\n            type: Boolean\n          }\n        }, _ref.created = function created() {\n          this.initKonva();\n        }, _ref.mounted = function mounted() {\n          var parentVueInstance = findParentKonva(this);\n          var parentKonvaNode = parentVueInstance._konvaNode;\n          parentKonvaNode.add(this._konvaNode);\n          updatePicture(this._konvaNode);\n        }, _ref.updated = function updated() {\n          this.uploadKonva();\n          checkOrder(this.$vnode, this._konvaNode);\n        }, _ref.destroyed = function destroyed() {\n          updatePicture(this._konvaNode);\n\n          this._konvaNode.destroy();\n\n          this._konvaNode.off(KonvaNode_EVENTS_NAMESPACE);\n        }, _ref.methods = {\n          getNode: function getNode() {\n            return this._konvaNode;\n          },\n          getStage: function getStage() {\n            return this._konvaNode;\n          },\n          initKonva: function initKonva() {\n            var NodeClass = window.Konva[nameNode];\n\n            if (!NodeClass) {\n              console.error('vue-konva error: Can not find node ' + nameNode);\n              return;\n            }\n\n            this._konvaNode = new NodeClass();\n            this._konvaNode.VueComponent = this;\n            this.uploadKonva();\n          },\n          uploadKonva: function uploadKonva() {\n            var oldProps = this.oldProps || {};\n            var props = KonvaNode_extends({}, this.$attrs, this.config, createListener(this.$listeners));\n            applyNodeProps(this, props, oldProps, this.__useStrictMode);\n            this.oldProps = props;\n          }\n        }, _ref;\n      }; // CONCATENATED MODULE: ./src/index.js\n\n\n      if (typeof window !== 'undefined' && !window.Konva) {\n        __webpack_require__(2);\n      }\n\n      var KONVA_NODES = ['Layer', 'FastLayer', 'Group', 'Label', 'Rect', 'Circle', 'Ellipse', 'Wedge', 'Line', 'Sprite', 'Image', 'Text', 'TextPath', 'Star', 'Ring', 'Arc', 'Tag', 'Path', 'RegularPolygon', 'Arrow', 'Shape', 'Transformer'];\n      var components = [{\n        name: 'Stage',\n        component: Stage\n      }].concat(KONVA_NODES.map(function (name) {\n        return {\n          name: name,\n          component: KonvaNode(name)\n        };\n      }));\n      var VueKonva = {\n        install: function install(Vue, options) {\n          var prefixToUse = componentPrefix;\n\n          if (options && options.prefix) {\n            prefixToUse = options.prefix;\n          }\n\n          components.forEach(function (k) {\n            Vue.component(\"\" + prefixToUse + k.name, k.component);\n          });\n        }\n      };\n      /* harmony default export */\n\n      var src = __webpack_exports__[\"default\"] = VueKonva;\n\n      if (typeof window !== 'undefined' && window.Vue) {\n        window.Vue.use(VueKonva);\n      }\n      /***/\n\n    }\n    /******/\n    ])[\"default\"]\n  );\n});","'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nfunction _interopDefault(ex) {\n  return ex && typeof ex === 'object' && 'default' in ex ? ex['default'] : ex;\n}\n\nvar React = _interopDefault(require('react'));\n\nvar ReactDOM = _interopDefault(require('react-dom'));\n\nvar Vue = _interopDefault(require('vue'));\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\nvar classCallCheck = function classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar defineProperty = function defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n};\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar inherits = function inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n};\n\nvar objectWithoutProperties = function objectWithoutProperties(obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n};\n\nvar possibleConstructorReturn = function possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n};\n\nvar slicedToArray = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if (Symbol.iterator in Object(arr)) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();\n\nvar VUE_COMPONENT_NAME = 'vuera-internal-component-name';\n\nvar wrapReactChildren = function wrapReactChildren(createElement, children) {\n  return createElement('vuera-internal-react-wrapper', {\n    props: {\n      component: function component() {\n        return React.createElement('div', null, children);\n      }\n    }\n  });\n};\n\nvar VueContainer = function (_React$Component) {\n  inherits(VueContainer, _React$Component);\n\n  function VueContainer(props) {\n    classCallCheck(this, VueContainer);\n    /**\n     * We have to track the current Vue component so that we can reliably catch updates to the\n     * `component` prop.\n     */\n\n    var _this = possibleConstructorReturn(this, (VueContainer.__proto__ || Object.getPrototypeOf(VueContainer)).call(this, props));\n\n    _this.currentVueComponent = props.component;\n    /**\n     * Modify createVueInstance function to pass this binding correctly. Doing this in the\n     * constructor to avoid instantiating functions in render.\n     */\n\n    var createVueInstance = _this.createVueInstance;\n    var self = _this;\n\n    _this.createVueInstance = function (element, component, prevComponent) {\n      createVueInstance(element, self, component, prevComponent);\n    };\n\n    return _this;\n  }\n\n  createClass(VueContainer, [{\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(nextProps) {\n      var component = nextProps.component,\n          props = objectWithoutProperties(nextProps, ['component']);\n\n      if (this.currentVueComponent !== component) {\n        this.updateVueComponent(this.props.component, component);\n      }\n      /**\n       * NOTE: we're not comparing this.props and nextProps here, because I didn't want to write a\n       * function for deep object comparison. I don't know if this hurts performance a lot, maybe\n       * we do need to compare those objects.\n       */\n\n\n      Object.assign(this.vueInstance.$data, props);\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      this.vueInstance.$destroy();\n    }\n    /**\n     * Creates and mounts the Vue instance.\n     * NOTE: since we need to access the current instance of VueContainer, as well as the Vue instance\n     * inside of the Vue constructor, we cannot bind this function to VueContainer, and we need to\n     * pass VueContainer's binding explicitly.\n     * @param {HTMLElement} targetElement - element to attact the Vue instance to\n     * @param {ReactInstance} reactThisBinding - current instance of VueContainer\n     */\n\n  }, {\n    key: 'createVueInstance',\n    value: function createVueInstance(targetElement, reactThisBinding) {\n      var _components;\n\n      var _reactThisBinding$pro = reactThisBinding.props,\n          component = _reactThisBinding$pro.component,\n          on = _reactThisBinding$pro.on,\n          props = objectWithoutProperties(_reactThisBinding$pro, ['component', 'on']); // `this` refers to Vue instance in the constructor\n\n      reactThisBinding.vueInstance = new Vue(_extends({\n        el: targetElement,\n        data: props\n      }, config.vueInstanceOptions, {\n        render: function render(createElement) {\n          return createElement(VUE_COMPONENT_NAME, {\n            props: this.$data,\n            on: on\n          }, [wrapReactChildren(createElement, this.children)]);\n        },\n        components: (_components = {}, defineProperty(_components, VUE_COMPONENT_NAME, component), defineProperty(_components, 'vuera-internal-react-wrapper', ReactWrapper), _components)\n      }));\n    }\n  }, {\n    key: 'updateVueComponent',\n    value: function updateVueComponent(prevComponent, nextComponent) {\n      this.currentVueComponent = nextComponent;\n      /**\n       * Replace the component in the Vue instance and update it.\n       */\n\n      this.vueInstance.$options.components[VUE_COMPONENT_NAME] = nextComponent;\n      this.vueInstance.$forceUpdate();\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      return React.createElement('div', {\n        ref: this.createVueInstance\n      });\n    }\n  }]);\n  return VueContainer;\n}(React.Component);\n\nvar makeReactContainer = function makeReactContainer(Component) {\n  var _class, _temp;\n\n  return _temp = _class = function (_React$Component) {\n    inherits(ReactInVue, _React$Component);\n\n    function ReactInVue(props) {\n      classCallCheck(this, ReactInVue);\n      /**\n       * We create a stateful component in order to attach a ref on it. We will use that ref to\n       * update component's state, which seems better than re-rendering the whole thing with\n       * ReactDOM.\n       */\n\n      var _this = possibleConstructorReturn(this, (ReactInVue.__proto__ || Object.getPrototypeOf(ReactInVue)).call(this, props));\n\n      _this.state = _extends({}, props);\n      return _this;\n    }\n\n    createClass(ReactInVue, [{\n      key: 'wrapVueChildren',\n      value: function wrapVueChildren(children) {\n        return {\n          render: function render(createElement) {\n            return createElement('div', children);\n          }\n        };\n      }\n    }, {\n      key: 'render',\n      value: function render() {\n        var _state = this.state,\n            children = _state.children,\n            _invoker = _state[''],\n            rest = objectWithoutProperties(_state, ['children', '']);\n        var wrappedChildren = this.wrapVueChildren(children);\n        return React.createElement(Component, rest, children && React.createElement(VueContainer, {\n          component: wrappedChildren\n        }));\n      }\n    }]);\n    return ReactInVue;\n  }(React.Component), _class.displayName = 'ReactInVue' + (Component.displayName || Component.name || 'Component'), _temp;\n};\n\nvar ReactWrapper = {\n  props: ['component', 'passedProps'],\n  render: function render(createElement) {\n    return createElement('div', {\n      ref: 'react'\n    });\n  },\n  methods: {\n    mountReactComponent: function mountReactComponent(component) {\n      var _this2 = this;\n\n      var Component = makeReactContainer(component);\n      var children = this.$slots.default !== undefined ? {\n        children: this.$slots.default\n      } : {};\n      ReactDOM.render(React.createElement(Component, _extends({}, this.$props.passedProps, this.$attrs, this.$listeners, children, {\n        ref: function ref(_ref) {\n          return _this2.reactComponentRef = _ref;\n        }\n      })), this.$refs.react);\n    }\n  },\n  mounted: function mounted() {\n    this.mountReactComponent(this.$props.component);\n  },\n  beforeDestroy: function beforeDestroy() {\n    ReactDOM.unmountComponentAtNode(this.$refs.react);\n  },\n  updated: function updated() {\n    /**\n     * AFAIK, this is the only way to update children. It doesn't seem to be possible to watch\n     * `$slots` or `$children`.\n     */\n    if (this.$slots.default !== undefined) {\n      this.reactComponentRef.setState({\n        children: this.$slots.default\n      });\n    } else {\n      this.reactComponentRef.setState({\n        children: null\n      });\n    }\n  },\n  inheritAttrs: false,\n  watch: {\n    $attrs: {\n      handler: function handler() {\n        this.reactComponentRef.setState(_extends({}, this.$attrs));\n      },\n      deep: true\n    },\n    '$props.component': {\n      handler: function handler(newValue) {\n        this.mountReactComponent(newValue);\n      }\n    },\n    $listeners: {\n      handler: function handler() {\n        this.reactComponentRef.setState(_extends({}, this.$listeners));\n      },\n      deep: true\n    },\n    '$props.passedProps': {\n      handler: function handler() {\n        this.reactComponentRef.setState(_extends({}, this.$props.passedProps));\n      },\n      deep: true\n    }\n  }\n};\n\nfunction isReactComponent(component) {\n  if ((typeof component === 'undefined' ? 'undefined' : _typeof(component)) === 'object' && !isReactForwardReference(component)) {\n    return false;\n  }\n\n  return !(typeof component === 'function' && component.prototype && (component.prototype.constructor.super && component.prototype.constructor.super.isVue || component.prototype instanceof Vue));\n}\n\nfunction isReactForwardReference(component) {\n  return component.$$typeof && component.$$typeof.toString() === 'Symbol(react.forward_ref)';\n}\n\nfunction VueResolver$$1(component) {\n  return {\n    components: {\n      ReactWrapper: ReactWrapper\n    },\n    props: ['passedProps'],\n    inheritAttrs: false,\n    render: function render(createElement) {\n      return createElement('react-wrapper', {\n        props: {\n          component: component,\n          passedProps: this.$props.passedProps\n        },\n        attrs: this.$attrs,\n        on: this.$listeners\n      }, this.$slots.default);\n    }\n  };\n}\n/**\n * This mixin automatically wraps all React components into Vue.\n */\n\n\nvar VuePlugin = {\n  install: function install(Vue$$1, options) {\n    /**\n     * We define a custom merging strategy for the `components` field. This strategy really just\n     * wraps all the React components while leaving Vue components as is.\n     */\n    var originalComponentsMergeStrategy = Vue$$1.config.optionMergeStrategies.components;\n\n    Vue$$1.config.optionMergeStrategies.components = function (parent) {\n      for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n\n      var mergedValue = originalComponentsMergeStrategy.apply(undefined, [parent].concat(args));\n      var wrappedComponents = mergedValue ? Object.entries(mergedValue).reduce(function (acc, _ref) {\n        var _ref2 = slicedToArray(_ref, 2),\n            k = _ref2[0],\n            v = _ref2[1];\n\n        return _extends({}, acc, defineProperty({}, k, isReactComponent(v) ? VueResolver$$1(v) : v));\n      }, {}) : mergedValue;\n      return Object.assign(mergedValue, wrappedComponents);\n    };\n\n    Vue$$1.prototype.constructor.isVue = true;\n  }\n};\n/* eslint-disable prefer-object-spread/prefer-object-spread */\n\nfunction ReactResolver$$1(component) {\n  return isReactComponent(component) ? component : function (props) {\n    return React.createElement(VueContainer, _extends({}, props, {\n      component: component\n    }));\n  };\n}\n/**\n * This function gets imported by the babel plugin. It wraps a suspected React element and, if it\n * isn't a valid React element, wraps it into a Vue container.\n */\n\n\nfunction babelReactResolver$$1(component, props, children) {\n  return isReactComponent(component) ? React.createElement(component, props, children) : React.createElement(VueContainer, Object.assign({\n    component: component\n  }, props), children);\n}\n\nfunction defaultConfig() {\n  return {\n    vueInstanceOptions: {}\n  };\n}\n\nvar config = defaultConfig();\nexports.ReactWrapper = ReactWrapper;\nexports.VueWrapper = VueContainer;\nexports.__vueraReactResolver = babelReactResolver$$1;\nexports.VuePlugin = VuePlugin;\nexports.VueInReact = ReactResolver$$1;\nexports.ReactInVue = VueResolver$$1;\nexports.config = config;","var global = require('../internals/global');\nvar TO_STRING_TAG_SUPPORT = require('../internals/to-string-tag-support');\nvar isCallable = require('../internals/is-callable');\nvar classofRaw = require('../internals/classof-raw');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar Object = global.Object;\n\n// ES3 wrong here\nvar CORRECT_ARGUMENTS = classofRaw(function () { return arguments; }()) == 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function (it, key) {\n  try {\n    return it[key];\n  } catch (error) { /* empty */ }\n};\n\n// getting tag from ES6+ `Object.prototype.toString`\nmodule.exports = TO_STRING_TAG_SUPPORT ? classofRaw : function (it) {\n  var O, tag, result;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (tag = tryGet(O = Object(it), TO_STRING_TAG)) == 'string' ? tag\n    // builtinTag case\n    : CORRECT_ARGUMENTS ? classofRaw(O)\n    // ES3 arguments fallback\n    : (result = classofRaw(O)) == 'Object' && isCallable(O.callee) ? 'Arguments' : result;\n};\n","var PROPER_FUNCTION_NAME = require('../internals/function-name').PROPER;\nvar fails = require('../internals/fails');\nvar whitespaces = require('../internals/whitespaces');\n\nvar non = '\\u200B\\u0085\\u180E';\n\n// check that a method works with the correct list\n// of whitespaces and has a correct name\nmodule.exports = function (METHOD_NAME) {\n  return fails(function () {\n    return !!whitespaces[METHOD_NAME]()\n      || non[METHOD_NAME]() !== non\n      || (PROPER_FUNCTION_NAME && whitespaces[METHOD_NAME].name !== METHOD_NAME);\n  });\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar toString = require('../internals/to-string');\nvar whitespaces = require('../internals/whitespaces');\n\nvar replace = uncurryThis(''.replace);\nvar whitespace = '[' + whitespaces + ']';\nvar ltrim = RegExp('^' + whitespace + whitespace + '*');\nvar rtrim = RegExp(whitespace + whitespace + '*$');\n\n// `String.prototype.{ trim, trimStart, trimEnd, trimLeft, trimRight }` methods implementation\nvar createMethod = function (TYPE) {\n  return function ($this) {\n    var string = toString(requireObjectCoercible($this));\n    if (TYPE & 1) string = replace(string, ltrim, '');\n    if (TYPE & 2) string = replace(string, rtrim, '');\n    return string;\n  };\n};\n\nmodule.exports = {\n  // `String.prototype.{ trimLeft, trimStart }` methods\n  // https://tc39.es/ecma262/#sec-string.prototype.trimstart\n  start: createMethod(1),\n  // `String.prototype.{ trimRight, trimEnd }` methods\n  // https://tc39.es/ecma262/#sec-string.prototype.trimend\n  end: createMethod(2),\n  // `String.prototype.trim` method\n  // https://tc39.es/ecma262/#sec-string.prototype.trim\n  trim: createMethod(3)\n};\n","var wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar test = {};\n\ntest[TO_STRING_TAG] = 'z';\n\nmodule.exports = String(test) === '[object z]';\n","var global = require('../internals/global');\nvar classof = require('../internals/classof');\n\nvar String = global.String;\n\nmodule.exports = function (argument) {\n  if (classof(argument) === 'Symbol') throw TypeError('Cannot convert a Symbol value to a string');\n  return String(argument);\n};\n","// a string of all valid unicode whitespaces\nmodule.exports = '\\u0009\\u000A\\u000B\\u000C\\u000D\\u0020\\u00A0\\u1680\\u2000\\u2001\\u2002' +\n  '\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF';\n","'use strict';\nvar $ = require('../internals/export');\nvar $trimEnd = require('../internals/string-trim').end;\nvar forcedStringTrimMethod = require('../internals/string-trim-forced');\n\nvar FORCED = forcedStringTrimMethod('trimEnd');\n\nvar trimEnd = FORCED ? function trimEnd() {\n  return $trimEnd(this);\n// eslint-disable-next-line es/no-string-prototype-trimstart-trimend -- safe\n} : ''.trimEnd;\n\n// `String.prototype.{ trimEnd, trimRight }` methods\n// https://tc39.es/ecma262/#sec-string.prototype.trimend\n// https://tc39.es/ecma262/#String.prototype.trimright\n$({ target: 'String', proto: true, name: 'trimEnd', forced: FORCED }, {\n  trimEnd: trimEnd,\n  trimRight: trimEnd\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar $trimStart = require('../internals/string-trim').start;\nvar forcedStringTrimMethod = require('../internals/string-trim-forced');\n\nvar FORCED = forcedStringTrimMethod('trimStart');\n\nvar trimStart = FORCED ? function trimStart() {\n  return $trimStart(this);\n// eslint-disable-next-line es/no-string-prototype-trimstart-trimend -- safe\n} : ''.trimStart;\n\n// `String.prototype.{ trimStart, trimLeft }` methods\n// https://tc39.es/ecma262/#sec-string.prototype.trimstart\n// https://tc39.es/ecma262/#String.prototype.trimleft\n$({ target: 'String', proto: true, name: 'trimStart', forced: FORCED }, {\n  trimStart: trimStart,\n  trimLeft: trimStart\n});\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"stageWrapper\",staticClass:\"stage-wrapper\",on:{\"contextmenu\":function($event){$event.preventDefault();void 0}}},[_c('v-stage',{ref:\"stage\",staticClass:\"stage\",attrs:{\"config\":_vm.stageConfig},on:{\"mousedown\":_vm.handleMouseDown}},[_c('v-layer',[_c('v-rect',{attrs:{\"config\":{\n        x: -50000,\n        y: -50000,\n        width: 100000,\n        height: 100000,\n        fill: '#1d2951'}}}),_vm._v(\" \"),_vm._l((_vm.waterConnectionConfigs),function(waterConnection){return _c('v-line',{key:waterConnection.num,attrs:{\"config\":waterConnection}})})],2),_vm._v(\" \"),_c('v-layer',_vm._l((_vm.territoryData),function(territory,index){return _c('v-territory',{key:index,attrs:{\"castle\":territory.castle,\"highlight\":territory.highlight,\"baseColor\":territory.baseColor,\"path\":territory.path},on:{\"territory-click-raw\":function (left, isTouch) { return _vm.handleTerritoryMouseUp(index, left, isTouch); }}})}),1),_vm._v(\" \"),_c('v-layer',{ref:\"castleLayer\"},[_vm._l((_vm.castleData),function(castle){return _c('v-castle-icon',_vm._b({key:castle.num,attrs:{\"onLoad\":_vm.handleCastleIconLoad}},'v-castle-icon',castle,false))}),_vm._v(\" \"),_vm._l((_vm.armyData),function(army){return _c('v-army-shape',_vm._b({key:army.num},'v-army-shape',army,false))})],2)],1),_vm._v(\" \"),_c('div',{staticClass:\"stage-fill\"})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/* eslint-disable */\n\nexport const colorLuminance = (hex, lum) => {\n  // validate hex string\n  hex = String(hex).replace(/[^0-9a-f]/gi, \"\");\n  if (hex.length < 6) {\n    hex = hex[0] + hex[0] + hex[1] + hex[1] + hex[2] + hex[2];\n  }\n  lum = lum || 0;\n  // convert to decimal and change luminosity\n  let rgb = \"#\",\n    c,\n    i;\n  for (i = 0; i < 3; i++) {\n    c = parseInt(hex.substr(i * 2, 2), 16);\n    c = Math.round(Math.min(Math.max(0, c + c * lum), 255)).toString(16);\n    rgb += (\"00\" + c).substr(c.length);\n  }\n  return rgb;\n};\n\n//rgb to hsv function\nconst hsvToRgb = (color) => {\n  let r, g, b, i, f, p, q, t;\n  let h = color.h;\n  let s = color.s;\n  let v = color.v;\n  i = Math.floor(h * 6);\n  f = h * 6 - i;\n  p = v * (1 - s);\n  q = v * (1 - f * s);\n  t = v * (1 - (1 - f) * s);\n  switch (i % 6) {\n    case 0:\n      (r = v), (g = t), (b = p);\n      break;\n    case 1:\n      (r = q), (g = v), (b = p);\n      break;\n    case 2:\n      (r = p), (g = v), (b = t);\n      break;\n    case 3:\n      (r = p), (g = q), (b = v);\n      break;\n    case 4:\n      (r = t), (g = p), (b = v);\n      break;\n    case 5:\n      (r = v), (g = p), (b = q);\n      break;\n  }\n  return {\n    r: Math.round(r * 255),\n    g: Math.round(g * 255),\n    b: Math.round(b * 255),\n  };\n};\n\n//hsv to rgb function\nconst rgbToHsv = (color) => {\n  let r = color.r;\n  let g = color.g;\n  let b = color.b;\n  let max = Math.max(r, g, b),\n    min = Math.min(r, g, b),\n    d = max - min,\n    h,\n    s = max === 0 ? 0 : d / max,\n    v = max / 255;\n\n  switch (max) {\n    case min:\n      h = 0;\n      break;\n    case r:\n      h = g - b + d * (g < b ? 6 : 0);\n      h /= 6 * d;\n      break;\n    case g:\n      h = b - r + d * 2;\n      h /= 6 * d;\n      break;\n    case b:\n      h = r - g + d * 4;\n      h /= 6 * d;\n      break;\n  }\n\n  return {\n    h: h,\n    s: s,\n    v: v,\n  };\n};\n\nconst componentToHex = (c) => {\n  let hex = c.toString(16);\n  return hex.length === 1 ? \"0\" + hex : hex;\n};\n\nconst rgbToHex = (color) => {\n  return (\n    \"#\" +\n    componentToHex(color.r) +\n    componentToHex(color.g) +\n    componentToHex(color.b)\n  );\n};\n\nconst hexToRgb = (hex) => {\n  let result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n  return result\n    ? {\n        r: parseInt(result[1], 16),\n        g: parseInt(result[2], 16),\n        b: parseInt(result[3], 16),\n      }\n    : null;\n};\n\nexport const alphaBlended = (hex, alpha) => {\n  const rgb = hexToRgb(hex);\n  return \"rgba(\" + rgb.r + \",\" + rgb.g + \",\" + rgb.b + \",\" + alpha + \")\";\n};\n\nexport const colorSaturation = (hex, sat) => {\n  let rgb = hexToRgb(hex);\n\n  let hsv = rgbToHsv(rgb);\n  const brightness = hsv.v >= 0.7 ? 0.85 : 1;\n  hsv.s *= sat;\n  hsv.v *= brightness;\n  rgb = hsvToRgb(hsv);\n  hex = rgbToHex(rgb);\n  return hex;\n};\n\nexport const distance = (p1, p2) => {\n  return Math.sqrt(Math.pow(p2.x - p1.x, 2) + Math.pow(p2.y - p1.y, 2));\n};\n\nexport const clamp = (num, min, max) => {\n  return num <= min ? min : num >= max ? max : num;\n};\n\nexport const seqStringToArray = (string) => {\n  return string.indexOf(\"List(\") === 0\n    ? string\n        .slice(5, string.length - 1)\n        .split(\", \")\n        .map(function (item) {\n          return parseInt(item, 10);\n        })\n    : [];\n};\n\nexport const specialSeqToArray = (string) => {\n  let matches = /^\\([A-Z][a-z]+\\((.+)\\),(\\d),(\\d)\\)$/gi.exec(string);\n  return matches.length > 3\n    ? [\n        matches[1].split(\", \").map(function (item) {\n          return parseInt(item, 10);\n        }),\n        parseInt(matches[2], 10),\n        parseInt(matches[3], 10),\n      ]\n    : [];\n};\n\nexport const exists = (object) =>\n  !(typeof object === \"undefined\" || object === null);\n\nimport { log } from \"../index\";\nexport const logError = (message) => log(message, \"Vue\", \"Error\");\n\nexport const debounce = (fn, delay) => {\n  var timer = null;\n  return function () {\n    var context = this,\n      args = arguments;\n    clearTimeout(timer);\n    timer = setTimeout(function () {\n      fn.apply(context, args);\n    }, delay);\n  };\n};\n","/* globals __VUE_SSR_CONTEXT__ */\n\n// IMPORTANT: Do NOT use ES2015 features in this file (except for modules).\n// This module is a runtime utility for cleaner component module output and will\n// be included in the final webpack user bundle.\n\nexport default function normalizeComponent (\n  scriptExports,\n  render,\n  staticRenderFns,\n  functionalTemplate,\n  injectStyles,\n  scopeId,\n  moduleIdentifier, /* server only */\n  shadowMode /* vue-cli only */\n) {\n  // Vue.extend constructor export interop\n  var options = typeof scriptExports === 'function'\n    ? scriptExports.options\n    : scriptExports\n\n  // render functions\n  if (render) {\n    options.render = render\n    options.staticRenderFns = staticRenderFns\n    options._compiled = true\n  }\n\n  // functional template\n  if (functionalTemplate) {\n    options.functional = true\n  }\n\n  // scopedId\n  if (scopeId) {\n    options._scopeId = 'data-v-' + scopeId\n  }\n\n  var hook\n  if (moduleIdentifier) { // server build\n    hook = function (context) {\n      // 2.3 injection\n      context =\n        context || // cached call\n        (this.$vnode && this.$vnode.ssrContext) || // stateful\n        (this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext) // functional\n      // 2.2 with runInNewContext: true\n      if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {\n        context = __VUE_SSR_CONTEXT__\n      }\n      // inject component styles\n      if (injectStyles) {\n        injectStyles.call(this, context)\n      }\n      // register component module identifier for async chunk inferrence\n      if (context && context._registeredComponents) {\n        context._registeredComponents.add(moduleIdentifier)\n      }\n    }\n    // used by ssr in case component is cached and beforeCreate\n    // never gets called\n    options._ssrRegister = hook\n  } else if (injectStyles) {\n    hook = shadowMode\n      ? function () {\n        injectStyles.call(\n          this,\n          (options.functional ? this.parent : this).$root.$options.shadowRoot\n        )\n      }\n      : injectStyles\n  }\n\n  if (hook) {\n    if (options.functional) {\n      // for template-only hot-reload because in that case the render fn doesn't\n      // go through the normalizer\n      options._injectStyles = hook\n      // register for functional component in vue file\n      var originalRender = options.render\n      options.render = function renderWithStyleInjection (h, context) {\n        hook.call(context)\n        return originalRender(h, context)\n      }\n    } else {\n      // inject component registration as beforeCreate hook\n      var existing = options.beforeCreate\n      options.beforeCreate = existing\n        ? [].concat(existing, hook)\n        : [hook]\n    }\n  }\n\n  return {\n    exports: scriptExports,\n    options: options\n  }\n}\n","import { render, staticRenderFns } from \"./ArmyShape.vue?vue&type=template&id=1e576e0e&\"\nimport script from \"./ArmyShape.vue?vue&type=script&lang=js&\"\nexport * from \"./ArmyShape.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <v-shape :config=\"config\"></v-shape>\n</template>\n\n<script>\nexport default {\n  props: {\n    color: String,\n    size: Number,\n    x: Number,\n    y: Number,\n  },\n  computed: {\n    config: function() {\n      const size = this.size\n      const color = this.color\n      const radius = size < 5 ? 5 : size > 9 ? 12 : 10\n      const bgOffset = 3\n      const bgFill = 'rgba(245, 242, 242, 0.55)'\n      const textFill = 'rgb(245, 242, 242)'\n      const position = {\n        a: this.x,\n        b: this.y,\n      }\n      return {\n        x: position.a,\n        y: position.b,\n        width: radius,\n        height: radius,\n        listening: false,\n        sceneFunc: function(context) {\n          if (size <= 0) return\n          context.beginPath()\n          const spacing = 1\n          if (size <= 4) {\n            if (size === 1) {\n              // background - circle\n              context.beginPath()\n              context.arc(0, 0, radius + bgOffset, 0, 2 * Math.PI)\n              context.closePath()\n              context.fillStyle = bgFill\n              context.fill()\n\n              // foreground\n              context.beginPath()\n              context.arc(0, 0, radius, 0, 2 * Math.PI, false)\n              context.closePath()\n              context.fillStyle = color\n              context.fill()\n            } else if (size === 2) {\n              // background - capsule shape\n              context.beginPath()\n              context.arcTo(\n                -radius - spacing,\n                0,\n                radius + bgOffset,\n                0.5 * Math.PI,\n                1.5 * Math.PI\n              )\n              context.arcTo(\n                radius + spacing,\n                0,\n                radius + bgOffset,\n                1.5 * Math.PI,\n                0.5 * Math.PI,\n                false\n              )\n              context.closePath()\n              context.fillStyle = bgFill\n              context.fill()\n\n              // foreground\n              context.beginPath()\n              context.arc(-radius - spacing, 0, radius, 0, 2 * Math.PI, false)\n              context.moveTo(radius + spacing, 0)\n              context.arc(radius + spacing, 0, radius, 0, 2 * Math.PI, false)\n              context.closePath()\n              context.fillStyle = color\n              context.fill()\n            } else if (size === 3) {\n              const correction = 1\n\n              // background - rounded triangle shape\n              context.beginPath()\n              context.arcTo(\n                -radius - spacing,\n                radius + spacing,\n                radius + bgOffset,\n                1.3333 * Math.PI,\n                0.3333 * Math.PI,\n                true\n              )\n              context.arcTo(\n                radius + spacing,\n                radius + spacing,\n                radius + bgOffset,\n                0.6667 * Math.PI,\n                1.6667 * Math.PI,\n                true\n              )\n              context.arcTo(\n                0,\n                -radius - spacing + correction,\n                radius + bgOffset,\n                0,\n                Math.PI,\n                true\n              )\n              context.closePath()\n              context.fillStyle = bgFill\n              context.fill()\n\n              // foreground\n              context.beginPath()\n              context.arc(\n                -radius - spacing,\n                radius + spacing,\n                radius,\n                0,\n                2 * Math.PI,\n                false\n              )\n              context.moveTo(radius + spacing, radius + spacing)\n              context.arc(\n                radius + spacing,\n                radius + spacing,\n                radius,\n                0,\n                2 * Math.PI,\n                false\n              )\n              context.moveTo(0, -radius - spacing + correction)\n              context.arc(\n                0,\n                -radius - spacing + correction,\n                radius,\n                0,\n                2 * Math.PI,\n                false\n              )\n              context.closePath()\n              context.fillStyle = color\n              context.fill()\n            } else {\n              // background - rounded rectangle\n              context.beginPath()\n              context.arcTo(\n                -radius - spacing,\n                -radius - spacing,\n                radius + bgOffset,\n                0.75 * Math.PI,\n                1.75 * Math.PI,\n                false\n              )\n              context.arcTo(\n                radius + spacing,\n                -radius - spacing,\n                radius + bgOffset,\n                1.25 * Math.PI,\n                0.25 * Math.PI,\n                false\n              )\n              context.arcTo(\n                radius + spacing,\n                radius + spacing,\n                radius + bgOffset,\n                1.75 * Math.PI,\n                0.75 * Math.PI,\n                false\n              )\n              context.arcTo(\n                -radius - spacing,\n                radius + spacing,\n                radius + bgOffset,\n                0.25 * Math.PI,\n                1.25 * Math.PI,\n                false\n              )\n              context.closePath()\n              context.fillStyle = bgFill\n              context.fill()\n\n              // foreground\n              context.beginPath()\n              context.arc(\n                -radius - spacing,\n                -radius - spacing,\n                radius,\n                0,\n                2 * Math.PI,\n                false\n              )\n              context.moveTo(radius + spacing, -radius - spacing)\n              context.arc(\n                radius + spacing,\n                -radius - spacing,\n                radius,\n                0,\n                2 * Math.PI,\n                false\n              )\n              context.moveTo(-radius - spacing, radius + spacing)\n              context.arc(\n                -radius - spacing,\n                radius + spacing,\n                radius,\n                0,\n                2 * Math.PI,\n                false\n              )\n              context.moveTo(radius + spacing, radius + spacing)\n              context.arc(\n                radius + spacing,\n                radius + spacing,\n                radius,\n                0,\n                2 * Math.PI,\n                false\n              )\n              context.closePath()\n              context.fillStyle = color\n              context.fill()\n            }\n          } else {\n            // background circle\n            context.beginPath()\n            context.arc(0, 0, radius, 0, 2 * Math.PI, false)\n            context.closePath()\n            context.fillStyle = color\n            context.fill()\n\n            // foreground text\n            context.fillStyle = textFill\n            context.font = 'bold 15px Roboto'\n            context.shadowBlur = 6\n            context.shadowOpacity = 0.4\n            context.textBaseline = 'middle'\n            context.textAlign = 'center'\n            context.fillText(size, 0, 2)\n          }\n        },\n      }\n    },\n  },\n}\n</script>\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-shape',{attrs:{\"config\":_vm.config}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-image :config=\"config\"></v-image>\n</template>\n\n<script>\nimport { log } from '../index'\n\nconst image = document.createElement('img')\nconst imgWidth = 28\nconst imgHeight = 28\nconst imageOnLoadCallbacks = new Set()\nimage.onload = () => {\n  log('Image loaded, forcing redraw', 'Vue', 'CastleIcon')\n  imageOnLoadCallbacks.forEach(callback => callback())\n}\nimage.src = '/projects/risk-game/demo_castle.png'\n\nconst layerRefWrapper = {\n  layerRef: null,\n  needsRedraw: false,\n}\n\nexport default {\n  props: {\n    x: Number,\n    y: Number,\n    onLoad: Function,\n  },\n  computed: {\n    config: function() {\n      const position = {\n        a: this.x,\n        b: this.y,\n      }\n      return {\n        x: position.a - imgWidth / 4,\n        y: position.b - imgHeight / 4,\n        image: image,\n        width: imgWidth,\n        height: imgHeight,\n        listening: false,\n      }\n    },\n  },\n  mounted() {\n    imageOnLoadCallbacks.add(this.onLoad)\n  },\n}\n</script>\n","import { render, staticRenderFns } from \"./CastleIcon.vue?vue&type=template&id=eda004fa&\"\nimport script from \"./CastleIcon.vue?vue&type=script&lang=js&\"\nexport * from \"./CastleIcon.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-image',{attrs:{\"config\":_vm.config}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./Territory.vue?vue&type=template&id=00f57a1e&\"\nimport script from \"./Territory.vue?vue&type=script&lang=js&\"\nexport * from \"./Territory.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<!--suppress HtmlUnknownTag -->\n<template>\n  <v-group>\n    <v-path\n      :config=\"pathConfig\"\n      @mouseover=\"handleMouseOver\"\n      @mouseout=\"handleMouseOut\"\n      @mouseup=\"handleMouseUp\"\n      @tap=\"handleMouseUp({evt: {which: 1}}, true)\"\n    ></v-path>\n    <v-group v-if=\"isHighlighted\" :config=\"clipConfig\">\n      <v-path :config=\"highlightConfig\"></v-path>\n    </v-group>\n  </v-group>\n</template>\n\n<script>\nimport { alphaBlended, colorLuminance, colorSaturation, exists } from './util'\nimport Konva from 'konva'\n\nexport default {\n  props: {\n    // Location of castle, or null if no castle\n    castle: Object,\n    // Color of highlight, or null if no highlight\n    highlight: String,\n    // Base fill of the territory shape\n    baseColor: String,\n    // SVG path data\n    path: String,\n  },\n\n  data() {\n    return {\n      mouseOver: false,\n    }\n  },\n\n  methods: {\n    // Mouse over event callback\n    handleMouseOver() {\n      this.mouseOver = true\n    },\n\n    // Mouse out event callback\n    handleMouseOut() {\n      this.mouseOver = false\n    },\n\n    // Mouse down event callback\n    handleMouseUp({ evt }, isTouch = false) {\n      const { which } = evt\n      if (which !== 1 && which !== 3) return\n      this.$emit('territory-click-raw', which === 1, isTouch)\n    },\n  },\n\n  computed: {\n    // Shape config for each shape\n    pathConfig() {\n      return {\n        x: 0,\n        y: 0,\n        scale: {\n          x: 1,\n          y: 1,\n        },\n        data: this.path,\n        fill: this.color,\n        shadowBlur: 10,\n      }\n    },\n\n    // Config of highlight object\n    highlightConfig() {\n      return {\n        x: 0,\n        y: 0,\n        scale: {\n          x: 1,\n          y: 1,\n        },\n        data: this.path,\n        stroke: this.highlight,\n        strokeWidth: 10,\n        opacity: 0.4,\n        lineJoin: 'round',\n        fill: alphaBlended(this.color, 0.8),\n        listening: false,\n      }\n    },\n\n    clipConfig() {\n      const arr = Konva.Path.parsePathData(this.path)\n      return {\n        clipFunc(context) {\n          // from https://github.com/konvajs/konva/blob/master/src/shapes/Path.ts\n          context.beginPath()\n          for (var n = 0; n < arr.length; n++) {\n            var c = arr[n].command\n            var p = arr[n].points\n            switch (c) {\n              case 'L':\n                context.lineTo(p[0], p[1])\n                break\n              case 'M':\n                context.moveTo(p[0], p[1])\n                break\n              case 'C':\n                context.bezierCurveTo(p[0], p[1], p[2], p[3], p[4], p[5])\n                break\n              case 'Q':\n                context.quadraticCurveTo(p[0], p[1], p[2], p[3])\n                break\n              case 'A':\n                var cx = p[0],\n                  cy = p[1],\n                  rx = p[2],\n                  ry = p[3],\n                  theta = p[4],\n                  dTheta = p[5],\n                  psi = p[6],\n                  fs = p[7]\n                var r = rx > ry ? rx : ry\n                var scaleX = rx > ry ? 1 : rx / ry\n                var scaleY = rx > ry ? ry / rx : 1\n                context.translate(cx, cy)\n                context.rotate(psi)\n                context.scale(scaleX, scaleY)\n                context.arc(0, 0, r, theta, theta + dTheta, 1 - fs)\n                context.scale(1 / scaleX, 1 / scaleY)\n                context.rotate(-psi)\n                context.translate(-cx, -cy)\n                break\n              case 'z':\n                context.closePath()\n                break\n            }\n          }\n        },\n      }\n    },\n\n    // Color to render as\n    color() {\n      const color = this.baseColor\n      const saturOffset = 2.5\n      const luminOffset = 0.15\n      if (this.mouseOver && this.isHighlighted)\n        return colorSaturation(color, saturOffset)\n      else if (this.isHighlighted)\n        return colorLuminance(colorSaturation(color, saturOffset), -luminOffset)\n      else if (this.mouseOver) return colorLuminance(color, luminOffset)\n      else return '#' + color\n    },\n\n    // Whether or not the territory is highlighted\n    isHighlighted() {\n      return exists(this.highlight)\n    },\n  },\n}\n</script>\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-group',[_c('v-path',{attrs:{\"config\":_vm.pathConfig},on:{\"mouseover\":_vm.handleMouseOver,\"mouseout\":_vm.handleMouseOut,\"mouseup\":_vm.handleMouseUp,\"tap\":function($event){return _vm.handleMouseUp({evt: {which: 1}}, true)}}}),_vm._v(\" \"),(_vm.isHighlighted)?_c('v-group',{attrs:{\"config\":_vm.clipConfig}},[_c('v-path',{attrs:{\"config\":_vm.highlightConfig}})],1):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"stage-wrapper\" ref=\"stageWrapper\" @contextmenu.prevent=\"void 0\">\n    <v-stage :config=\"stageConfig\" ref=\"stage\" class=\"stage\" @mousedown=\"handleMouseDown\">\n      <v-layer>\n        <v-rect\n          :config=\"{\n          x: -50000,\n          y: -50000,\n          width: 100000,\n          height: 100000,\n          fill: '#1d2951'}\"\n        ></v-rect>\n        <v-line\n          v-for=\"waterConnection in waterConnectionConfigs\"\n          :key=\"waterConnection.num\"\n          :config=\"waterConnection\"\n        ></v-line>\n      </v-layer>\n      <v-layer>\n        <v-territory\n          v-for=\"(territory, index) in territoryData\"\n          :key=\"index\"\n          :castle=\"territory.castle\"\n          :highlight=\"territory.highlight\"\n          :baseColor=\"territory.baseColor\"\n          :path=\"territory.path\"\n          @territory-click-raw=\"(left, isTouch) => handleTerritoryMouseUp(index, left, isTouch)\"\n        ></v-territory>\n      </v-layer>\n      <v-layer ref=\"castleLayer\">\n        <v-castle-icon\n          v-for=\"castle in castleData\"\n          v-bind=\"castle\"\n          :key=\"castle.num\"\n          :onLoad=\"handleCastleIconLoad\"\n        ></v-castle-icon>\n        <v-army-shape v-for=\"army in armyData\" v-bind=\"army\" :key=\"army.num\"></v-army-shape>\n      </v-layer>\n    </v-stage>\n    <div class=\"stage-fill\"></div>\n  </div>\n</template>\n\n<script>\nimport { clamp, distance, exists, logError } from './util'\nimport { log } from '../index'\nimport dataFile from './data'\n\n// Components\nimport ArmyShape from './ArmyShape'\nimport CastleIcon from './CastleIcon'\n\n// hook Konva\nimport VueKonva from 'vue-konva'\nimport Vue from 'vue'\nimport Territory from './Territory'\nVue.use(VueKonva)\n\nexport default {\n  props: {\n    // Initial scale (optional)\n    initialScale: Number,\n    // Stage height (optional)\n    height: Number,\n  },\n\n  components: {\n    'v-army-shape': ArmyShape,\n    'v-territory': Territory,\n    'v-castle-icon': CastleIcon,\n  },\n\n  data() {\n    return {\n      // DOM object for the stage, gotten through refs upon mount\n      stageObj: undefined,\n      // Current stage dimensions updated upon resize\n      stageDimensions: {\n        w: 400,\n        h: this.height,\n      },\n      // Current touch state (unused if on desktop)\n      touchState: {\n        lastDist: 0,\n        point: undefined,\n      },\n      // Current scale bounds (may be updated upon initialization as appropriate)\n      scaleBounds: {\n        min: 0.8,\n        max: 5,\n      },\n      // Current index of territory with mouse over\n      mouseOver: -1,\n      armyData: dataFile.armyData,\n      // Last click location\n      mouseDownLoc: {\n        x: 0,\n        y: 0,\n      },\n    }\n  },\n\n  computed: {\n    // Configuration objects for the stage\n    stageConfig() {\n      return {\n        // Depend on dimensions changed upon resize\n        width: this.stageDimensions.w,\n        height: this.stageDimensions.h,\n        draggable: true,\n        // Clamp dragging\n        dragBoundFunc: pos => this.clampPosition(pos),\n      }\n    },\n\n    // *****************\n    // Rendering configs\n    // *****************\n\n    // Creates array of territory data\n    territoryData() {\n      return dataFile.territoryData\n    },\n\n    // Config data for water connection paths\n    waterConnectionConfigs() {\n      return dataFile.waterConnectionConfigs\n    },\n\n    // Rendering data for each castle\n    castleData() {\n      return dataFile.castleData\n    },\n\n    // Gets the size of the gameboard from the store\n    gameboardSize() {\n      return dataFile.gameboardSize\n    },\n  },\n\n  methods: {\n    // ***************\n    // Utility methods\n    // ***************\n\n    // Calculates the initial position & scale of the map in the viewport\n    calculateInitialTransform() {\n      const bounds = this.stageDimensions\n      const totalW = bounds.w\n      const totalH = bounds.h\n      const size = this.gameboardSize\n\n      let k\n      if (exists(this.initialScale)) {\n        // use passed in initial scale\n        k = this.initialScale\n        log(`Using non-default scale ${k.toFixed(2)}`, 'Vue')\n      } else {\n        // make initial map take up 3/4 of smaller dimension\n        const margin = Math.min(totalW, totalH) / 8\n        const kw = (totalW - 2 * margin) / size.a\n        const kh = (totalH - 2 * margin) / size.b\n        k = Math.min(kw, kh)\n        log(`Calculating default fit scale ${k.toFixed(2)}`, 'Vue')\n      }\n      return {\n        x: (totalW - size.a * k) / 2,\n        y: (totalH - size.b * k) / 2,\n        scale: k,\n      }\n    },\n\n    // Translates the pointer mouse pointer minus the stage offset\n    relativePointer(clientX, clientY, stage) {\n      return {\n        x: clientX - stage.getContent().offsetLeft,\n        y: clientY - stage.getContent().offsetTop,\n      }\n    },\n\n    // Clamps the scale according to the current bounds\n    clampScale(scale) {\n      return clamp(scale, this.scaleBounds.min, this.scaleBounds.max)\n    },\n\n    // Clamps the position according to newly calculated position bounds\n    clampPosition(pos) {\n      const bounds = this.calculatePositionBounds()\n      return {\n        x: clamp(pos.x, bounds.x.min, bounds.x.max),\n        y: clamp(pos.y, bounds.y.min, bounds.y.max),\n      }\n    },\n\n    // Calculates the position bounds according to the current scale & dimensions\n    calculatePositionBounds() {\n      if (exists(this.stageObj)) {\n        const scale = this.stageObj.scale()\n        const bounds = this.stageDimensions\n        const size = this.gameboardSize\n        return {\n          x: this.axisBounds(size.a * scale.x, bounds.w),\n          y: this.axisBounds(size.b * scale.y, bounds.h),\n        }\n      } else {\n        logError('StageObj or Gameboard are undefined. Ignoring')\n        // default value\n        return {\n          x: {\n            min: 0,\n            max: 1,\n          },\n          y: {\n            min: 0,\n            max: 1,\n          },\n        }\n      }\n    },\n\n    // Applies bounds, wrapping as necessary\n    axisBounds(size, bound) {\n      return size < bound\n        ? {\n            min: -(size / 2),\n            max: bound - size / 2,\n          }\n        : {\n            min: bound / 2 - size,\n            max: bound / 2,\n          }\n    },\n\n    // ***************\n    // Event listeners\n    // ***************\n\n    // Handles castle icon loading\n    handleCastleIconLoad() {\n      if (exists(this.$refs) && exists(this.$refs.castleLayer)) {\n        this.$refs.castleLayer.getStage().batchDraw()\n        log('Calling batch draw on castle layer', 'Vue', 'GameCanvas')\n      } else {\n        logError('StageWrapper not found. Skipping icon-driven redraw')\n      }\n    },\n\n    // Handles territory clicks\n    handleTerritoryMouseUp(index, left, isTouch) {\n      if (exists(this.stageObj)) {\n        if (!isTouch) {\n          // Exit if in a full drag\n          const mousePos = this.stageObj.getPointerPosition()\n          const distSquared =\n            (mousePos.x - this.mouseDownLoc.x) ** 2 +\n            (mousePos.y - this.mouseDownLoc.y) ** 2\n          if (distSquared > 144) return\n        }\n\n        if (left) {\n          ++this.armyData[index].size\n        } else if (this.armyData[index].size > 0) {\n          --this.armyData[index].size\n        }\n      } else {\n        logError('Stage object not found. Skipping mouse up event')\n      }\n    },\n\n    // Handle stage mouse down\n    handleMouseDown() {\n      if (exists(this.stageObj)) {\n        this.mouseDownLoc = this.stageObj.getPointerPosition()\n      } else {\n        logError('Stage object not found. Skipping mouse down event')\n      }\n    },\n\n    // Handles resize events\n    handleResize() {\n      if (exists(this.$refs) && exists(this.$refs.stageWrapper)) {\n        this.stageDimensions = {\n          w: this.$refs.stageWrapper.clientWidth,\n          h: this.$refs.stageWrapper.clientHeight,\n        }\n      } else {\n        logError('StageWrapper not found. Skipping resize event')\n      }\n    },\n\n    // Handles scroll wheel input (event callback)\n    handleScroll(event) {\n      const stage = this.stageObj\n      if (exists(stage)) {\n        event.preventDefault()\n        const oldScale = stage.scaleX()\n\n        const pointer = stage.getPointerPosition()\n        const startPos = {\n          x: pointer.x / oldScale - stage.x() / oldScale,\n          y: pointer.y / oldScale - stage.y() / oldScale,\n        }\n\n        let deltaYBounded = 0\n        if (!(event.deltaY % 1)) {\n          deltaYBounded = Math.abs(Math.min(-10, Math.max(10, event.deltaY)))\n        } else {\n          // noinspection JSSuspiciousNameCombination\n          deltaYBounded = Math.abs(event.deltaY)\n        }\n        const scaleBy = 1.01 + deltaYBounded / 70\n        let newScale = 0\n        if (event.deltaY > 0) {\n          newScale = oldScale / scaleBy\n        } else {\n          newScale = oldScale * scaleBy\n        }\n        newScale = this.clampScale(newScale)\n        stage.scale({ x: newScale, y: newScale })\n\n        const newPosition = {\n          x: (pointer.x / newScale - startPos.x) * newScale,\n          y: (pointer.y / newScale - startPos.y) * newScale,\n        }\n        stage.position(this.clampPosition(newPosition))\n        stage.batchDraw()\n      } else {\n        logError('StageObj not found. Scroll events will not work')\n      }\n    },\n\n    // Handles touch move input (event callback)\n    handleTouchMove(event) {\n      if (!exists(event.touches)) return\n      const t1 = event.touches[0]\n      const t2 = event.touches[1]\n      if (t1 && t2) {\n        event.preventDefault()\n        event.stopPropagation()\n        const stage = this.stageObj\n        const touchState = this.touchState\n        if (exists(stage)) {\n          const oldScale = stage.scaleX()\n          const dist = distance(\n            { x: t1.clientX, y: t1.clientY },\n            { x: t2.clientX, y: t2.clientY }\n          )\n          if (!touchState.lastDist) touchState.lastDist = dist\n          const delta = dist - touchState.lastDist\n          const px = (t1.clientX + t2.clientX) / 2\n          const py = (t1.clientY + t2.clientY) / 2\n          let pointer = {}\n          if (typeof touchState.point === 'undefined') {\n            pointer = this.relativePointer(px, py, stage)\n            touchState.point = pointer\n          } else {\n            pointer = touchState.point\n          }\n          const startPos = {\n            x: pointer.x / oldScale - stage.x() / oldScale,\n            y: pointer.y / oldScale - stage.y() / oldScale,\n          }\n          const scaleBy = 1.01 + Math.abs(delta) / 100\n          const newScale = this.clampScale(\n            delta < 0 ? oldScale / scaleBy : oldScale * scaleBy\n          )\n          stage.scale({ x: newScale, y: newScale })\n          const newPosition = {\n            x: (pointer.x / newScale - startPos.x) * newScale,\n            y: (pointer.y / newScale - startPos.y) * newScale,\n          }\n          stage.position(this.clampPosition(newPosition))\n          stage.batchDraw()\n          // Update touch state\n          touchState.lastDist = dist\n        } else {\n          logError('StageObj not found. Touch events will not work')\n        }\n      }\n    },\n\n    // Handles touch end input (event callback)\n    handleTouchEnd() {\n      // Reset touch state\n      this.touchState.lastDist = 0\n      this.touchState.point = undefined\n    },\n\n    // Handles mouse down on the document node (event callback)\n    handleDocumentMouseDown(e) {\n      if (e.button !== 0) this.stageObj.draggable(false)\n    },\n\n    // Handles mouse up on the document node (event callback)\n    handleDocumentMouseUp(e) {\n      this.stageObj.draggable(true)\n    },\n\n    // Attach event listeners upon mounting\n    attachEventListeners(stageRef) {\n      window.addEventListener('resize', this.handleResize)\n      document.addEventListener('mousedown', this.handleDocumentMouseDown)\n      document.addEventListener('mouseup', this.handleDocumentMouseUp)\n      // attach events to the stage\n      if (exists(stageRef)) {\n        stageRef.addEventListener('wheel', this.handleScroll)\n        stageRef.addEventListener('touchmove', this.handleTouchMove)\n        stageRef.addEventListener('touchend', this.handleTouchEnd)\n      } else {\n        logError('StageRef not found. Canvas events will not work')\n      }\n    },\n\n    // Detach any event listeners upon being destroyed\n    detachEventListeners(stageRef) {\n      window.removeEventListener('resize', this.handleResize)\n      document.removeEventListener('mousedown', this.handleDocumentMouseDown)\n      document.removeEventListener('mouseup', this.handleDocumentMouseUp)\n      if (exists(stageRef)) {\n        stageRef.removeEventListener('wheel', this.handleScroll)\n        stageRef.removeEventListener('touchmove', this.handleTouchMove)\n        stageRef.removeEventListener('touchend', this.handleTouchEnd)\n      }\n    },\n\n    // *********************\n    // Async synchronization\n    // *********************\n\n    // Attempts to unlock the GUI side of the async initialization lock\n    unlockInitialization() {\n      this.initializeTransforms()\n    },\n\n    // Initializes transforms once information from the server is loaded\n    initializeTransforms() {\n      const dims = {\n        w: this.$refs.stageWrapper.clientWidth,\n        h: this.$refs.stageWrapper.clientHeight,\n      }\n      log(\n        `Loaded stage dimensions from globals: { w: ${dims.w}, h: ${dims.h} }`,\n        'Vue'\n      )\n      const stage = this.stageObj\n      const initialTransform = this.calculateInitialTransform()\n      const scaleBounds = this.scaleBounds\n      if (exists(stage)) {\n        // Scale\n        stage.scale({\n          x: initialTransform.scale,\n          y: initialTransform.scale,\n        })\n        // Translate\n        stage.x(initialTransform.x)\n        stage.y(initialTransform.y)\n        // Update scale bounds\n        scaleBounds.min = Math.min(scaleBounds.min, initialTransform.scale)\n        scaleBounds.max = Math.max(scaleBounds.max, initialTransform.scale)\n      } else {\n        logError('StageObj not found. Canvas will not be positioned')\n      }\n    },\n  },\n\n  // Mounted lifecycle hook\n  mounted() {\n    this.$nextTick(function() {\n      // initialize canvas dimensions\n      this.handleResize()\n      if (exists(this.$refs.stage)) {\n        // load the stageObj\n        this.stageObj = this.$refs.stage.getStage()\n        this.attachEventListeners(this.stageObj.getContent())\n        this.unlockInitialization()\n      }\n    })\n  },\n\n  // Destruction lifecycle hook\n  beforeDestroy() {\n    this.detachEventListeners(this.stageObj.getContent())\n  },\n}\n</script>\n","import { render, staticRenderFns } from \"./GameCanvas.vue?vue&type=template&id=e7bcb0bc&\"\nimport script from \"./GameCanvas.vue?vue&type=script&lang=js&\"\nexport * from \"./GameCanvas.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["GameCanvas","VueInterop","props","state","mount","componentDidMount","preload","this","require","setState","log","render","passthroughProps","component","React","Object","defineProperty","exports","value","Global_1","now","glob","performance","Date","getTime","Animation","func","layers","id","animIdCounter","frame","time","timeDiff","lastTime","frameRate","setLayers","prototype","lays","length","getLayers","addLayer","layer","n","len","_id","push","isRunning","animations","start","stop","_addAnimation","_removeAnimation","_updateFrameObject","anim","_handleAnimation","splice","_runFrames","i","layersLen","key","layerHash","call","undefined","hasOwnProperty","draw","_animationLoop","Anim","requestAnimationFrame","animRunning","_extendStatics","__extends","d","b","setPrototypeOf","__proto__","Array","p","__","constructor","create","Util_1","Container_1","Node_1","Factory_1","Canvas_1","BaseLayer","_super","config","_this","canvas","SceneCanvas","_waitingForDraw","on","_checkVisibility","_checkSmooth","createPNGStream","_canvas","getCanvas","getHitCanvas","hitCanvas","getContext","clear","bounds","setZIndex","index","stage","getStage","content","removeChild","getChildren","insertBefore","appendChild","moveToTop","Node","moveUp","moveDown","children","moveToBottom","getLayer","remove","parentNode","Util","_isInDocument","parent","setSize","_a","width","height","_toKonvaCanvas","getWidth","getHeight","x","y","visible","style","display","_context","imageSmoothingEnabled","setWidth","warn","setHeight","getIntersection","pos","selector","batchDraw","requestAnimFrame","_applyTransform","shape","context","top","m","getAbsoluteTransform","getMatrix","transform","Container","nodeType","Factory","addGetterSetter","Collection","mapMethods","_pixelRatio","Context_1","Validators_1","Canvas","pixelRatio","isCache","Konva","createCanvasElement","_global","devicePixelRatio","webkitBackingStorePixelRatio","mozBackingStorePixelRatio","msBackingStorePixelRatio","oBackingStorePixelRatio","backingStorePixelRatio","getDevicePixelRatio","padding","margin","border","background","position","left","getPixelRatio","setPixelRatio","previousRatio","scale","toDataURL","mimeType","quality","e","err","error","message","getNumberValidator","SceneContext","HitCanvas","HitContext","DragAndDrop_1","apply","arguments","filterFunc","results","each","child","hasChildren","removeChildren","destroyChildren","destroy","add","getParent","moveTo","_validateAdd","_fire","isDragging","DD","find","_generalFind","get","findOne","result","retArr","_descendants","node","valid","_isMatch","toCollection","fn","toObject","obj","_getDescendants","arr","isAncestorOf","clone","no","getAllIntersections","isVisible","intersects","_setChildrenIndices","drawScene","can","caching","cachedCanvas","_getCanvasCache","cachedSceneCanvas","scene","save","_drawCachedSceneCanvas","restore","_drawChildren","drawHit","cachedHitCanvas","hit","shouldDrawHit","_drawCachedHitCanvas","drawMethod","skipBuffer","skipComposition","clipX","clipY","clipWidth","clipHeight","clipFunc","hasClip","beginPath","rect","clip","copy","invert","hasComposition","globalCompositeOperation","_applyGlobalCompositeOperation","layerUnderDrag","indexOf","hitGraphEnabled","getClientRect","attrs","minX","minY","maxX","maxY","skipTransform","relativeTo","selfRect","Infinity","that","skipShadow","skipStroke","Math","min","max","shapes","hasVisible","_isVisible","_transformedRect","addComponentsGetterSetter","CONTEXT_METHODS","Context","enableTrace","traceArr","_enableTrace","fillShape","getFillEnabled","_fill","strokeShape","getStrokeEnabled","_stroke","fillStrokeShape","getTrace","relaxed","trace","method","args","str","_isArray","join","property","val","clearTrace","_trace","shift","reset","setTransform","clearRect","_applyLineCap","lineCap","getLineCap","setAttr","_applyOpacity","absOpacity","getAbsoluteOpacity","_applyLineJoin","lineJoin","getLineJoin","attr","arc","a0","a1","a2","a3","a4","a5","arcTo","bezierCurveTo","closePath","createImageData","a","createLinearGradient","createPattern","createRadialGradient","drawImage","a6","a7","a8","ellipse","isPointInPath","fill","fillRect","strokeRect","fillText","measureText","text","getImageData","lineTo","putImageData","quadraticCurveTo","rotate","setLineDash","getLineDash","stroke","strokeText","translate","_simplifyArray","origSetter","methodName","ret","origMethod","slice","prop","getGlobalCompositeOperation","forEach","set","_fillColor","_fillFunc","_fillPattern","fillPatternX","getFillPatternX","fillPatternY","getFillPatternY","fillPatternScaleX","getFillPatternScaleX","fillPatternScaleY","getFillPatternScaleY","fillPatternRotation","getAngle","getFillPatternRotation","fillPatternOffsetX","getFillPatternOffsetX","fillPatternOffsetY","getFillPatternOffsetY","_getFillPattern","_fillLinearGradient","grd","_getLinearGradient","_fillRadialGradient","_getRadialGradient","hasColor","fillPriority","getFillPriority","hasPattern","getFillPatternImage","hasLinearGradient","getFillLinearGradientColorStops","hasRadialGradient","getFillRadialGradientColorStops","_strokeLinearGradient","getStrokeLinearGradientStartPoint","end","getStrokeLinearGradientEndPoint","colorStops","getStrokeLinearGradientColorStops","addColorStop","dash","strokeScaleEnabled","getStrokeScaleEnabled","hasStroke","dashEnabled","dashOffset","strokeWidth","getShadowForStrokeEnabled","_strokeFunc","_applyShadow","util","color","getShadowRGBA","blur","getShadowBlur","offset","getShadowOffset","getAbsoluteScale","ratio","scaleX","scaleY","abs","colorKey","_fillFuncHit","hitStrokeWidth","_strokeFuncHit","Animation_1","startPointerPos","dirty","justDragged","_drag","evt","getPointerPosition","setPointersPositions","dragDistance","fire","type","target","_setDragPosition","_endDragBefore","listenClickTap","dragEndNode","drawNode","_endDragAfter","isBrowser","window","addEventListener","GET","SET","def","validator","after","addGetter","addSetter","addOverloadedGetterSetter","_capitalize","overWriteSetter","_setAttr","components","capitalize","getter","setter","getAttr","basicValidator","getComponentValidator","oldVal","_fireChangeEvent","capitalizedAttr","addDeprecatedGetterSetter","backCompat","methods","oldMethodName","newMethodName","oldGetter","oldSetter","deprecated","afterSetFilter","_filterUpToDate","BaseLayer_1","FastLayer","getType","throw","_setCanvasSize","clearBeforeDraw","_registerNode","PI_OVER_180","PI","_detectIE","ua","msie","parseInt","substring","rv","edge","_parseUA","userAgent","toLowerCase","match","exec","mobile","ieMobile","browser","version","isIE","g","WorkerGlobalScope","self","toString","isUnminified","test","param","dblClickWindow","angle","angleDeg","_pointerEventsEnabled","inDblClickWindow","showWarnings","dragButtons","isDragReady","UA","navigator","document","_injectGlobal","_NODES_REGISTRY","NodeClass","getClassName","Group","Shape_1","INTERSECTION_OFFSETS","INTERSECTION_OFFSETS_LEN","Layer","intersectionOffset","spiralSearchDistance","continueSearch","_getIntersection","findAncestor","antialiased","round","data","p3","_rgbToHex","enableHitGraph","disableHitGraph","toggleHitCanvas","getBooleanValidator","ids","names","_removeId","_addName","name","_removeName","nodes","ABSOLUTE_OPACITY","ABSOLUTE_TRANSFORM","ABSOLUTE_SCALE","CANVAS","LISTENING","MOUSEENTER","MOUSELEAVE","SHAPE","SPACE","STAGE","TRANSFORM","VISIBLE","CLONE_BLACK_LIST","TRANSFORM_CHANGE_STR","SCALE_CHANGE_STR","emptyChildren","idCounter","eventListeners","_cache","Map","_lastPos","_isUnderCache","setAttrs","_clearCache","_clearSelfAndDescendantCache","delete","_getCache","privateGetter","cache","clearCache","conf","drawBorder","cachedFilterCanvas","sceneContext","hitContext","filter","Error","points","trans","point","transformed","canvasCache","cacheCanvas","_getCachedSceneCanvas","imageData","filters","sceneCanvas","filterCanvas","filterContext","evtStr","handler","_delegate","parts","baseEvent","events","split","off","callback","t","_off","dispatchEvent","removeEventListener","event","stopNode","targets","findAncestors","cloneObject","currentTarget","stopDrag","_remove","subname","_isFunction","getAncestors","ancestors","getAttrs","isListening","_isListening","listening","show","hide","getZIndex","getAbsoluteZIndex","depth","getDepth","addChildren","concat","toArray","setPosition","getPosition","getAbsolutePosition","absoluteMatrix","absoluteTransform","Transform","getTranslation","setAbsolutePosition","it","origTrans","_clearTransform","_setTransform","rotation","offsetX","offsetY","skewX","skewY","move","change","changeX","changeY","_eachAncestorReverse","family","unshift","theta","zIndex","_getAbsoluteOpacity","opacity","newContainer","defaultValue","isObject","_isPlainObject","className","_prepareToStringify","toJSON","JSON","stringify","includeSelf","res","ancestor","sel","selectorArr","replace","isValidSelector","charAt","hasName","_getStage","eventType","bubble","_fireAndBubble","_getAbsoluteTransform","at","transformsEnabled","getTransformsEnabled","multiply","getTransform","getX","getOffsetX","getY","getOffsetY","_getAbsoluteScale","_getTransform","skew","allListeners","listener","box","toCanvas","url","toImage","_urlToImage","img","size","getSize","getDragDistance","evtName","evtListeners","newVal","setId","oldId","_addId","setName","oldNames","newNames","addName","oldName","newName","fullName","removeName","_setComponentAttr","compareShape","stopBubble","cancelBubble","startDrag","ap","dbf","dragBoundFunc","newNodePos","setDraggable","draggable","_dragChange","_listenDrag","_dragCleanup","dd","container","_isString","parse","_createNode","Class","_attrsAffectingSize","getStringValidator","rotateDeg","setRotationDeg","getRotationDeg","Captures","createEvent","pointerId","releaseCapture","releasePointerCapture","PointerEvent","getCapturedShape","hasPointerCapture","setPointerCapture","dummyContext","PointerEvents","HAS_SHADOW","SHADOW_RGBA","patternImage","linearGradient","radialGradient","getDummyContext","_clearHasShadowCache","_clearGetShadowRGBACache","_clearFillPatternCache","_clearLinearGradientCache","_clearRadialGradientCache","Shape","getRandomColor","getSceneFunc","sceneFunc","getHitFunc","hitFunc","hasShadow","_hasShadow","shadowEnabled","shadowOpacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","__getFillPattern","fillPatternImage","fillPatternRepeat","__getLinearGradient","fillLinearGradientColorStops","ctx","fillLinearGradientStartPoint","fillLinearGradientEndPoint","__getRadialGradient","fillRadialGradientColorStops","fillRadialGradientStartPoint","fillRadialGradientEndPoint","fillRadialGradientStartRadius","fillRadialGradientEndRadius","_getShadowRGBA","rgba","colorToRGBA","r","hasFill","strokeEnabled","strokeLinearGradientColorStops","bufferHitCanvas","_useBufferCanvas","perfectDrawEnabled","setStrokeHitEnabled","getStrokeHitEnabled","getSelfRect","_centroid","fillAndStrokeWidth","fillAndStrokeHeight","applyShadow","preWidth","preHeight","blurRadius","roundingOffset","bufferCanvas","bufferContext","drawFunc","o","shadowForStrokeEnabled","drawHitFromCache","alphaThreshold","hitImageData","hitData","rgbColorKey","hitWidth","hitHeight","_hexToRgb","getNumberOrAutoValidator","dashArray","getDashArray","setDashArray","getDrawFunc","setDrawFunc","drawHitFunc","getDrawHitFunc","setDrawHitFunc","Global_2","MOUSEOUT","MOUSEOVER","MOUSEMOVE","MOUSEDOWN","MOUSEUP","POINTERMOVE","POINTERDOWN","POINTERUP","CONTEXTMENU","CLICK","DBL_CLICK","TOUCHSTART","TOUCHEND","DBL_TAP","TOUCHMOVE","WHEEL","EVENTS","eventsLength","addEvent","eventName","checkNoClip","stages","Stage","_buildDOM","_bindContentEvents","_resizeDOM","isLayer","isFastLayer","setContainer","getElementsByClassName","getElementById","parentElement","createElement","pointerPos","getContent","layerCanvas","_mouseenter","_mouseover","_mouseout","targetShape","_mousemove","_touchmove","differentTarget","cancelable","preventDefault","_mousedown","_touchstart","clickStartShape","_mouseup","_touchend","clickEndShape","fireDblClick","clearTimeout","dblTimeout","setTimeout","_contextmenu","tapStartShape","_wheel","_pointerdown","_pointermove","_pointerup","_pointercancel","_lostpointercapture","contentPosition","_getContentPosition","touches","touch","clientX","clientY","_setPointerPosition","getBoundingClientRect","innerHTML","userSelect","setAttribute","blacklist","duration","easing","onFinish","yoyo","colorAttrs","TweenEngine","propFunc","begin","finish","_pos","_change","prevPos","_time","_position","_startTime","_finish","pause","setTime","reverse","play","update","getTimer","onEnterFrame","seek","Tween","nodeId","Easings","Linear","tween","_tweenFunc","_addListeners","tweens","_addAttr","onReset","diff","tweenId","trueEnd","trueStart","endRGBA","_prepareArrayForTween","closed","startRGBA","onPlay","onReverse","onPause","thisId","to","params","BackEaseIn","c","s","BackEaseOut","BackEaseInOut","ElasticEaseIn","asin","pow","sin","ElasticEaseOut","ElasticEaseInOut","BounceEaseOut","BounceEaseIn","BounceEaseInOut","EaseIn","EaseOut","EaseInOut","StrongEaseIn","StrongEaseOut","StrongEaseInOut","collection","_mapMethod","prot","sx","sy","rad","cos","m11","m12","m21","m22","matrix","dx","dy","m0","m1","m2","m3","m4","m5","yt","xt","PI_OVER_DEG180","DEG180_OVER_PI","KONVA_ERROR","COLORS","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","transparent","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","RGB_REGEX","animQueue","_isElement","_isNumber","isNaN","isFinite","_isBoolean","firstChar","toUpperCase","_sign","number","queue","cb","createImageElement","el","imageObj","Image","onload","src","hex","bigint","randColor","random","getRGB","rgb","substr","_namedColorToRBA","_hex3ColorToRGBA","_hex6ColorToRGBA","_rgbColorToRGBA","_rgbaColorToRGBA","map","Number","haveIntersection","r1","r2","retObj","cloneArray","_degToRad","deg","_radToDeg","console","extend","Ctor","oldProto","__super__","super","_getControlPoints","x0","y0","x1","y1","x2","y2","d01","sqrt","d12","fa","fb","_expandPoints","tension","cp","allPoints","_inRange","right","_getProjectionToSegment","x3","y3","dist","pd2","u","_getProjectionToLine","pt","line","isClosed","pc","MAX_VALUE","p1","p2","proj","px","py","pdist","startArray","endArray","temp","newStart","pr","desc","visitedByCircularReferenceRemoval","getOwnPropertyDescriptor","configurable","_assign","source","_formatValue","RGBComponent","alphaComponent","getFunctionValidator","getNumberArrayValidator","item","Stage_1","Layer_1","FastLayer_1","Group_1","Tween_1","_CoreInternals_1","Arc_1","Arrow_1","Circle_1","Ellipse_1","Image_1","Label_1","Line_1","Path_1","Rect_1","RegularPolygon_1","Ring_1","Sprite_1","Star_1","Text_1","TextPath_1","Transformer_1","Wedge_1","Blur_1","Brighten_1","Contrast_1","Emboss_1","Enhance_1","Grayscale_1","HSL_1","HSV_1","Invert_1","Kaleidoscope_1","Mask_1","Noise_1","Pixelate_1","Posterize_1","RGB_1","RGBA_1","Sepia_1","Solarize_1","Threshold_1","Arc","Arrow","Circle","Ellipse","Label","Tag","Line","Path","Rect","RegularPolygon","Ring","Sprite","Star","Text","TextPath","Transformer","Wedge","Filters","Blur","Brighten","Contrast","Emboss","Enhance","Grayscale","HSL","HSV","Invert","Kaleidoscope","Mask","Noise","Pixelate","Posterize","RGB","RGBA","Sepia","Solarize","Threshold","BlurStack","next","mul_table","shg_table","radius","yp","yi","yw","r_sum","g_sum","b_sum","a_sum","r_out_sum","g_out_sum","b_out_sum","a_out_sum","r_in_sum","g_in_sum","b_in_sum","a_in_sum","pg","pb","pa","rbs","pixels","div","widthMinus1","heightMinus1","radiusPlus1","sumFactor","stackStart","stackEnd","stack","stackIn","stackOut","mul_sum","shg_sum","filterGaussBlurRGBA","brightness","adjust","contrast","nPixels","strength","embossStrength","greyLevel","embossWhiteLevel","direction","embossDirection","blend","embossBlend","dirY","dirX","w","h","w4","otherY","offsetYOther","otherX","offsetOther","dR","dG","dB","dif","absDif","remap","fromValue","fromMin","fromMax","toMin","toMax","fromRange","toRange","nSubPixels","rMin","rMax","gMin","gMax","bMin","bMax","enhanceAmount","enhance","rMid","rGoalMax","rGoalMin","gMid","gGoalMax","gGoalMin","bMid","bGoalMax","bGoalMin","saturation","hue","l","luminance","vsu","vsw","rr","rg","rb","gr","gg","gb","br","bg","bb","v","srcPos","dstPos","xSize","ySize","power","kaleidoscopePower","kaleidoscopeAngle","floor","tempCanvas","scratchData","dst","opt","srcPixels","dstPixels","xMid","polarCenterX","yMid","polarCenterY","rSize","tSize","conversion","ToPolar","minSectionSize","sectionSize","ceil","xStart","xEnd","xDelta","phaseShift","polarRotation","atan2","FromPolar","pixelAt","idata","idx","rgbDistance","mask","threshold","rgbv_no","rgbv_ne","rgbv_so","rgbv_se","thres","mean","pTab","rgbMean","backgroundMask","applyMask","sw","sh","weights","side","halfSide","maskResult","so","cy","cx","scy","scx","wt","smoothEdgeMask","dilateMask","erodeMask","amount","noise","half","alpha","xBinStart","xBinEnd","yBinStart","yBinEnd","xBin","yBin","pixelsInBin","pixelSize","nBinsX","nBinsY","levels","ia","level","module","_sceneFunc","clockwise","outerRadius","innerRadius","PI2","tp","fromTension","getTensionPoints","radians","pointerLength","pointerWidth","pointerAtBeginning","isDashEnabled","rx","radiusX","ry","radiusY","cropWidth","cropHeight","image","cropX","cropY","_hitFunc","fromURL","crossOrigin","ATTR_CHANGE_LIST","UP","RIGHT","DOWN","LEFT","attrChangeListLen","_sync","getText","getTag","pointerDirection","pointerHeight","tag","cornerRadius","bezier","_getTensionPoints","_getTensionPointsClosed","firstControlPoints","lastControlPoints","middle","dataArray","pathLength","parsePathData","ca","command","dTheta","psi","fs","getLength","getPointAtLength","ii","getPointOnLine","getPointOnCubicBezier","getPointOnQuadraticBezier","getPointOnEllipticalArc","getLineLength","P1x","P1y","P2x","P2y","fromX","fromY","run","rise","ix","iy","pRise","pRun","pct","P3x","P3y","P4x","P4y","CB1","CB2","CB3","CB4","QB1","QB2","QB3","cosPsi","sinPsi","cs","cc","RegExp","coords","cpx","cpy","re","j","jlen","parsed","parseFloat","prevCmd","ctlPtx","ctlPty","cmd","startX","startY","convertEndpointToCenterParameterization","calcLength","path","inc","psiDeg","xp","lambda","f","cxp","cyp","vMag","vRatio","vAngle","acos","topLeft","topRight","bottomLeft","bottomRight","sides","PIx2","_updated","updated","frameIndex","clearInterval","interval","_setInterval","animation","ix4","offsets","frameOffsets","ix2","setInterval","_updateIndex","getIndex","setIndex","numPoints","AUTO","JUSTIFY","MIDDLE","NORMAL","checkDefaultFill","_partialTextX","_partialTextY","_setTextData","fontSize","lineHeightPx","lineHeight","textArr","textArrLen","verticalAlign","alignY","align","totalWidth","letterSpacing","textDecoration","shouldUnderline","shouldLineThrough","translateY","lineTranslateX","lineTranslateY","_getContextFont","spacesNumber","oneWord","lineWidth","lastLine","strokeStyle","li","letter","_partialText","measureSize","setText","getTextWidth","textWidth","getTextHeight","textHeight","metrics","font","fontStyle","fontFamily","fontVariant","_addTextLine","trim","_getTextWidth","lines","fixedWidth","fixedHeight","maxWidth","maxHeightPx","currentHeightPx","wrap","shouldWrap","wrapAtWord","shouldAddEllipsis","ellipsis","additionalWidth","low","high","matchWidth","mid","substrWidth","wrapIndex","nextChar","lastIndexOf","trimRight","trimLeft","partialText","dummyCanvas","kerningFunc","textBaseline","glyphInfo","p0","_getTextSize","textFullWidth","fullPathWidth","pathCmd","charArr","pIndex","currentT","getNextPathSegment","pathData","findSegmentToFitCharacter","glyphWidth","currLen","attempts","cumulativePathLength","needNewSegment","k","kern","midpoint","transposeX","transposeY","info","NODE_RECT","ANGLES","ANCHORS_NAMES","_transforming","_createElements","_handleMouseMove","bind","_handleMouseUp","getNode","attachTo","setNode","_node","detach","_resetTransformCache","additionalEvents","onChange","_getNodeRect","__getNodeRect","ignoreStroke","getRotation","_createBack","_createAnchor","anchor","_handleMouseDown","isMirrored","cursor","anchorName","getCursor","_cursorChange","back","tr","rotateEnabled","rotateAnchorOffset","movingResizer","hypotenuse","newHypotenuse","resizerNode","zeroPoint","newAbsPos","keepProportion","keepRatio","shiftKey","dAlpha","rot","newRotation","newAlpha","snaps","rotationSnaps","_fitNodeInto","absPos","centeredScaling","altKey","topOffsetX","topOffsetY","bottomOffsetX","bottomOffsetY","_removeEvents","newAttrs","boundBoxFunc","oldAttrs","pure","forceUpdate","invertedScale","enabledAnchors","resizeEnabled","anchorSize","anchorStroke","anchorStrokeWidth","anchorFill","anchorCornerRadius","scaledRotateAnchorOffset","borderEnabled","borderStroke","borderStrokeWidth","borderDash","isTransforming","stopTransform","lineEnabled","rotateHandlerOffset","enabledHandlers","getAngleDeg","setAngleDeg","factory","__WEBPACK_EXTERNAL_MODULE__0__","__WEBPACK_EXTERNAL_MODULE__2__","modules","installedModules","moduleId","enumerable","Symbol","toStringTag","mode","__esModule","ns","object","__webpack_exports__","external_root_Vue_commonjs2_vue_commonjs_vue_amd_vue_","updatePicture","drawingNode","propsToSkip","elm","isRootInsert","EVENTS_NAMESPACE","applyNodeProps","vueComponent","oldProps","useStrict","instance","_konvaNode","updatedProps","hasUpdates","isEvent","propChanged","_key","_isEvent","toAdd","_eventName","createListener","output","keys","findKonvaNode","$options","$children","checkOrder","$vnode","konvaNode","needRedraw","componentOptions","componentInstance","tagName","_extends","assign","$slots","default","watch","uploadKonva","deep","__useStrictMode","Boolean","created","mounted","$el","validateChildren","beforeDestroy","$attrs","$listeners","KonvaNode_extends","CONTAINERS","nameNode","_ref","initKonva","$parent","destroyed","VueComponent","VueKonva","install","Vue","options","prefixToUse","prefix","use","_interopDefault","ex","ReactDOM","_typeof","iterator","classCallCheck","Constructor","TypeError","createClass","defineProperties","descriptor","writable","protoProps","staticProps","inherits","subClass","superClass","objectWithoutProperties","possibleConstructorReturn","ReferenceError","slicedToArray","isArray","_arr","_n","_d","_e","_s","_i","done","sliceIterator","VUE_COMPONENT_NAME","wrapReactChildren","VueContainer","_React$Component","getPrototypeOf","currentVueComponent","createVueInstance","element","prevComponent","nextProps","updateVueComponent","vueInstance","$data","$destroy","targetElement","reactThisBinding","_components","_reactThisBinding$pro","vueInstanceOptions","ReactWrapper","nextComponent","$forceUpdate","ref","Component","mountReactComponent","_this2","_class","_temp","ReactInVue","_state","rest","wrappedChildren","wrapVueChildren","displayName","makeReactContainer","$props","passedProps","reactComponentRef","$refs","react","unmountComponentAtNode","inheritAttrs","newValue","isReactComponent","$$typeof","isReactForwardReference","isVue","VueResolver$$1","VuePlugin","Vue$$1","originalComponentsMergeStrategy","optionMergeStrategies","_len","mergedValue","wrappedComponents","entries","reduce","acc","_ref2","global","TO_STRING_TAG_SUPPORT","isCallable","classofRaw","TO_STRING_TAG","wellKnownSymbol","CORRECT_ARGUMENTS","O","tryGet","callee","PROPER_FUNCTION_NAME","fails","whitespaces","METHOD_NAME","uncurryThis","requireObjectCoercible","whitespace","ltrim","rtrim","createMethod","TYPE","$this","string","String","classof","argument","$","$trimEnd","FORCED","forcedStringTrimMethod","trimEnd","proto","forced","$trimStart","trimStart","colorLuminance","lum","componentToHex","hexToRgb","colorSaturation","sat","hsv","rgbToHsv","q","hsvToRgb","clamp","num","exists","logError","normalizeComponent","scriptExports","staticRenderFns","functionalTemplate","injectStyles","scopeId","moduleIdentifier","shadowMode","hook","_compiled","functional","_scopeId","ssrContext","__VUE_SSR_CONTEXT__","_registeredComponents","_ssrRegister","$root","shadowRoot","_injectStyles","originalRender","existing","beforeCreate","_vm","_h","$createElement","_self","_c","pathConfig","handleMouseOver","handleMouseOut","handleMouseUp","$event","which","_v","clipConfig","highlightConfig","staticClass","stageConfig","handleMouseDown","_l","waterConnection","territory","castle","highlight","baseColor","isTouch","handleTerritoryMouseUp","_b","handleCastleIconLoad","army"],"sourceRoot":""}